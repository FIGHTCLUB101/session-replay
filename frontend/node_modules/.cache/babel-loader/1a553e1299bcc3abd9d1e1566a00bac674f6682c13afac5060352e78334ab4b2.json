{"ast":null,"code":"import { __values, __spreadArray, __read } from '../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nfunction initCanvas2DMutationObserver(cb, win, blockClass, mirror) {\n  var e_1, _a;\n  var handlers = [];\n  var props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\n  var _loop_1 = function (prop) {\n    try {\n      if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\n        return \"continue\";\n      }\n      var restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\n        return function () {\n          var _this = this;\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!isBlocked(this.canvas, blockClass)) {\n            setTimeout(function () {\n              var recordArgs = __spreadArray([], __read(args), false);\n              if (prop === 'drawImage') {\n                if (recordArgs[0] && recordArgs[0] instanceof HTMLCanvasElement) {\n                  var canvas = recordArgs[0];\n                  var ctx = canvas.getContext('2d');\n                  var imgd = ctx === null || ctx === void 0 ? void 0 : ctx.getImageData(0, 0, canvas.width, canvas.height);\n                  var pix = imgd === null || imgd === void 0 ? void 0 : imgd.data;\n                  recordArgs[0] = JSON.stringify(pix);\n                }\n              }\n              cb(_this.canvas, {\n                type: CanvasContext['2D'],\n                property: prop,\n                args: recordArgs\n              });\n            }, 0);\n          }\n          return original.apply(this, args);\n        };\n      });\n      handlers.push(restoreHandler);\n    } catch (_b) {\n      var hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\n        set: function (v) {\n          cb(this.canvas, {\n            type: CanvasContext['2D'],\n            property: prop,\n            args: [v],\n            setter: true\n          });\n        }\n      });\n      handlers.push(hookHandler);\n    }\n  };\n  try {\n    for (var props2D_1 = __values(props2D), props2D_1_1 = props2D_1.next(); !props2D_1_1.done; props2D_1_1 = props2D_1.next()) {\n      var prop = props2D_1_1.value;\n      _loop_1(prop);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (props2D_1_1 && !props2D_1_1.done && (_a = props2D_1.return)) _a.call(props2D_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nexport default initCanvas2DMutationObserver;","map":{"version":3,"names":["__values","__spreadArray","__read","CanvasContext","patch","isBlocked","hookSetter","initCanvas2DMutationObserver","cb","win","blockClass","mirror","e_1","_a","handlers","props2D","Object","getOwnPropertyNames","CanvasRenderingContext2D","prototype","_loop_1","prop","restoreHandler","original","_this","args","_i","arguments","length","canvas","setTimeout","recordArgs","HTMLCanvasElement","ctx","getContext","imgd","getImageData","width","height","pix","data","JSON","stringify","type","property","apply","push","_b","hookHandler","set","v","setter","props2D_1","props2D_1_1","next","done","value","e_1_1","error","return","call","forEach","h"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/2d.js"],"sourcesContent":["import { __values, __spreadArray, __read } from '../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\n\nfunction initCanvas2DMutationObserver(cb, win, blockClass, mirror) {\n    var e_1, _a;\n    var handlers = [];\n    var props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\n    var _loop_1 = function (prop) {\n        try {\n            if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\n                return \"continue\";\n            }\n            var restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\n                return function () {\n                    var _this = this;\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    if (!isBlocked(this.canvas, blockClass)) {\n                        setTimeout(function () {\n                            var recordArgs = __spreadArray([], __read(args), false);\n                            if (prop === 'drawImage') {\n                                if (recordArgs[0] &&\n                                    recordArgs[0] instanceof HTMLCanvasElement) {\n                                    var canvas = recordArgs[0];\n                                    var ctx = canvas.getContext('2d');\n                                    var imgd = ctx === null || ctx === void 0 ? void 0 : ctx.getImageData(0, 0, canvas.width, canvas.height);\n                                    var pix = imgd === null || imgd === void 0 ? void 0 : imgd.data;\n                                    recordArgs[0] = JSON.stringify(pix);\n                                }\n                            }\n                            cb(_this.canvas, {\n                                type: CanvasContext['2D'],\n                                property: prop,\n                                args: recordArgs,\n                            });\n                        }, 0);\n                    }\n                    return original.apply(this, args);\n                };\n            });\n            handlers.push(restoreHandler);\n        }\n        catch (_b) {\n            var hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\n                set: function (v) {\n                    cb(this.canvas, {\n                        type: CanvasContext['2D'],\n                        property: prop,\n                        args: [v],\n                        setter: true,\n                    });\n                },\n            });\n            handlers.push(hookHandler);\n        }\n    };\n    try {\n        for (var props2D_1 = __values(props2D), props2D_1_1 = props2D_1.next(); !props2D_1_1.done; props2D_1_1 = props2D_1.next()) {\n            var prop = props2D_1_1.value;\n            _loop_1(prop);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (props2D_1_1 && !props2D_1_1.done && (_a = props2D_1.return)) _a.call(props2D_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\n\nexport default initCanvas2DMutationObserver;\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,aAAa,EAAEC,MAAM,QAAQ,oCAAoC;AACpF,SAASC,aAAa,QAAQ,mBAAmB;AACjD,SAASC,KAAK,EAAEC,SAAS,EAAEC,UAAU,QAAQ,mBAAmB;AAEhE,SAASC,4BAA4BA,CAACC,EAAE,EAAEC,GAAG,EAAEC,UAAU,EAAEC,MAAM,EAAE;EAC/D,IAAIC,GAAG,EAAEC,EAAE;EACX,IAAIC,QAAQ,GAAG,EAAE;EACjB,IAAIC,OAAO,GAAGC,MAAM,CAACC,mBAAmB,CAACR,GAAG,CAACS,wBAAwB,CAACC,SAAS,CAAC;EAChF,IAAIC,OAAO,GAAG,SAAAA,CAAUC,IAAI,EAAE;IAC1B,IAAI;MACA,IAAI,OAAOZ,GAAG,CAACS,wBAAwB,CAACC,SAAS,CAACE,IAAI,CAAC,KAAK,UAAU,EAAE;QACpE,OAAO,UAAU;MACrB;MACA,IAAIC,cAAc,GAAGlB,KAAK,CAACK,GAAG,CAACS,wBAAwB,CAACC,SAAS,EAAEE,IAAI,EAAE,UAAUE,QAAQ,EAAE;QACzF,OAAO,YAAY;UACf,IAAIC,KAAK,GAAG,IAAI;UAChB,IAAIC,IAAI,GAAG,EAAE;UACb,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGC,SAAS,CAACC,MAAM,EAAEF,EAAE,EAAE,EAAE;YAC1CD,IAAI,CAACC,EAAE,CAAC,GAAGC,SAAS,CAACD,EAAE,CAAC;UAC5B;UACA,IAAI,CAACrB,SAAS,CAAC,IAAI,CAACwB,MAAM,EAAEnB,UAAU,CAAC,EAAE;YACrCoB,UAAU,CAAC,YAAY;cACnB,IAAIC,UAAU,GAAG9B,aAAa,CAAC,EAAE,EAAEC,MAAM,CAACuB,IAAI,CAAC,EAAE,KAAK,CAAC;cACvD,IAAIJ,IAAI,KAAK,WAAW,EAAE;gBACtB,IAAIU,UAAU,CAAC,CAAC,CAAC,IACbA,UAAU,CAAC,CAAC,CAAC,YAAYC,iBAAiB,EAAE;kBAC5C,IAAIH,MAAM,GAAGE,UAAU,CAAC,CAAC,CAAC;kBAC1B,IAAIE,GAAG,GAAGJ,MAAM,CAACK,UAAU,CAAC,IAAI,CAAC;kBACjC,IAAIC,IAAI,GAAGF,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACG,YAAY,CAAC,CAAC,EAAE,CAAC,EAAEP,MAAM,CAACQ,KAAK,EAAER,MAAM,CAACS,MAAM,CAAC;kBACxG,IAAIC,GAAG,GAAGJ,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACK,IAAI;kBAC/DT,UAAU,CAAC,CAAC,CAAC,GAAGU,IAAI,CAACC,SAAS,CAACH,GAAG,CAAC;gBACvC;cACJ;cACA/B,EAAE,CAACgB,KAAK,CAACK,MAAM,EAAE;gBACbc,IAAI,EAAExC,aAAa,CAAC,IAAI,CAAC;gBACzByC,QAAQ,EAAEvB,IAAI;gBACdI,IAAI,EAAEM;cACV,CAAC,CAAC;YACN,CAAC,EAAE,CAAC,CAAC;UACT;UACA,OAAOR,QAAQ,CAACsB,KAAK,CAAC,IAAI,EAAEpB,IAAI,CAAC;QACrC,CAAC;MACL,CAAC,CAAC;MACFX,QAAQ,CAACgC,IAAI,CAACxB,cAAc,CAAC;IACjC,CAAC,CACD,OAAOyB,EAAE,EAAE;MACP,IAAIC,WAAW,GAAG1C,UAAU,CAACG,GAAG,CAACS,wBAAwB,CAACC,SAAS,EAAEE,IAAI,EAAE;QACvE4B,GAAG,EAAE,SAAAA,CAAUC,CAAC,EAAE;UACd1C,EAAE,CAAC,IAAI,CAACqB,MAAM,EAAE;YACZc,IAAI,EAAExC,aAAa,CAAC,IAAI,CAAC;YACzByC,QAAQ,EAAEvB,IAAI;YACdI,IAAI,EAAE,CAACyB,CAAC,CAAC;YACTC,MAAM,EAAE;UACZ,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;MACFrC,QAAQ,CAACgC,IAAI,CAACE,WAAW,CAAC;IAC9B;EACJ,CAAC;EACD,IAAI;IACA,KAAK,IAAII,SAAS,GAAGpD,QAAQ,CAACe,OAAO,CAAC,EAAEsC,WAAW,GAAGD,SAAS,CAACE,IAAI,CAAC,CAAC,EAAE,CAACD,WAAW,CAACE,IAAI,EAAEF,WAAW,GAAGD,SAAS,CAACE,IAAI,CAAC,CAAC,EAAE;MACvH,IAAIjC,IAAI,GAAGgC,WAAW,CAACG,KAAK;MAC5BpC,OAAO,CAACC,IAAI,CAAC;IACjB;EACJ,CAAC,CACD,OAAOoC,KAAK,EAAE;IAAE7C,GAAG,GAAG;MAAE8C,KAAK,EAAED;IAAM,CAAC;EAAE,CAAC,SACjC;IACJ,IAAI;MACA,IAAIJ,WAAW,IAAI,CAACA,WAAW,CAACE,IAAI,KAAK1C,EAAE,GAAGuC,SAAS,CAACO,MAAM,CAAC,EAAE9C,EAAE,CAAC+C,IAAI,CAACR,SAAS,CAAC;IACvF,CAAC,SACO;MAAE,IAAIxC,GAAG,EAAE,MAAMA,GAAG,CAAC8C,KAAK;IAAE;EACxC;EACA,OAAO,YAAY;IACf5C,QAAQ,CAAC+C,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAClD,CAAC;AACL;AAEA,eAAevD,4BAA4B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}