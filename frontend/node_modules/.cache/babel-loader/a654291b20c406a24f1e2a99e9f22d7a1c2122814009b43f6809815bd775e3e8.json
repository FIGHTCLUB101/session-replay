{"ast":null,"code":"import { __read, __values, __spreadArray, __assign } from '../../ext/tslib/tslib.es6.js';\nimport { maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isTouchEvent, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch } from '../utils.js';\nimport { IncrementalSource, MouseInteractions } from '../types.js';\nimport MutationBuffer from './mutation.js';\nvar mutationBuffers = [];\nvar isCSSGroupingRuleSupported = typeof CSSGroupingRule !== 'undefined';\nvar isCSSMediaRuleSupported = typeof CSSMediaRule !== 'undefined';\nvar isCSSSupportsRuleSupported = typeof CSSSupportsRule !== 'undefined';\nvar isCSSConditionRuleSupported = typeof CSSConditionRule !== 'undefined';\nfunction getEventTarget(event) {\n  try {\n    if ('composedPath' in event) {\n      var path = event.composedPath();\n      if (path.length) {\n        return path[0];\n      }\n    } else if ('path' in event && event.path.length) {\n      return event.path[0];\n    }\n    return event.target;\n  } catch (_a) {\n    return event.target;\n  }\n}\nfunction initMutationObserver(options, rootEl) {\n  var _a, _b;\n  var mutationBuffer = new MutationBuffer();\n  mutationBuffers.push(mutationBuffer);\n  mutationBuffer.init(options);\n  var mutationObserverCtor = window.MutationObserver || window.__rrMutationObserver;\n  var angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\n  if (angularZoneSymbol && window[angularZoneSymbol]) {\n    mutationObserverCtor = window[angularZoneSymbol];\n  }\n  var observer = new mutationObserverCtor(mutationBuffer.processMutations.bind(mutationBuffer));\n  observer.observe(rootEl, {\n    attributes: true,\n    attributeOldValue: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true\n  });\n  return observer;\n}\nfunction initMoveObserver(_a) {\n  var mousemoveCb = _a.mousemoveCb,\n    sampling = _a.sampling,\n    doc = _a.doc,\n    mirror = _a.mirror;\n  if (sampling.mousemove === false) {\n    return function () {};\n  }\n  var threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\n  var callbackThreshold = typeof sampling.mousemoveCallback === 'number' ? sampling.mousemoveCallback : 500;\n  var positions = [];\n  var timeBaseline;\n  var wrappedCb = throttle(function (source) {\n    var totalOffset = Date.now() - timeBaseline;\n    mousemoveCb(positions.map(function (p) {\n      p.timeOffset -= totalOffset;\n      return p;\n    }), source);\n    positions = [];\n    timeBaseline = null;\n  }, callbackThreshold);\n  var updatePosition = throttle(function (evt) {\n    var target = getEventTarget(evt);\n    var _a = isTouchEvent(evt) ? evt.changedTouches[0] : evt,\n      clientX = _a.clientX,\n      clientY = _a.clientY;\n    if (!timeBaseline) {\n      timeBaseline = Date.now();\n    }\n    positions.push({\n      x: clientX,\n      y: clientY,\n      id: mirror.getId(target),\n      timeOffset: Date.now() - timeBaseline\n    });\n    wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent ? IncrementalSource.Drag : evt instanceof MouseEvent ? IncrementalSource.MouseMove : IncrementalSource.TouchMove);\n  }, threshold, {\n    trailing: false\n  });\n  var handlers = [on('mousemove', updatePosition, doc), on('touchmove', updatePosition, doc), on('drag', updatePosition, doc)];\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nfunction initMouseInteractionObserver(_a) {\n  var mouseInteractionCb = _a.mouseInteractionCb,\n    doc = _a.doc,\n    mirror = _a.mirror,\n    blockClass = _a.blockClass,\n    sampling = _a.sampling;\n  if (sampling.mouseInteraction === false) {\n    return function () {};\n  }\n  var disableMap = sampling.mouseInteraction === true || sampling.mouseInteraction === undefined ? {} : sampling.mouseInteraction;\n  var handlers = [];\n  var getHandler = function (eventKey) {\n    return function (event) {\n      var target = getEventTarget(event);\n      if (isBlocked(target, blockClass)) {\n        return;\n      }\n      var e = isTouchEvent(event) ? event.changedTouches[0] : event;\n      if (!e) {\n        return;\n      }\n      var id = mirror.getId(target);\n      var clientX = e.clientX,\n        clientY = e.clientY;\n      mouseInteractionCb({\n        type: MouseInteractions[eventKey],\n        id: id,\n        x: clientX,\n        y: clientY\n      });\n    };\n  };\n  Object.keys(MouseInteractions).filter(function (key) {\n    return Number.isNaN(Number(key)) && !key.endsWith('_Departed') && disableMap[key] !== false;\n  }).forEach(function (eventKey) {\n    var eventName = eventKey.toLowerCase();\n    var handler = getHandler(eventKey);\n    handlers.push(on(eventName, handler, doc));\n  });\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nfunction initScrollObserver(_a) {\n  var scrollCb = _a.scrollCb,\n    doc = _a.doc,\n    mirror = _a.mirror,\n    blockClass = _a.blockClass,\n    sampling = _a.sampling;\n  var updatePosition = throttle(function (evt) {\n    var target = getEventTarget(evt);\n    if (!target || isBlocked(target, blockClass)) {\n      return;\n    }\n    var id = mirror.getId(target);\n    if (target === doc) {\n      var scrollEl = doc.scrollingElement || doc.documentElement;\n      scrollCb({\n        id: id,\n        x: scrollEl.scrollLeft,\n        y: scrollEl.scrollTop\n      });\n    } else {\n      scrollCb({\n        id: id,\n        x: target.scrollLeft,\n        y: target.scrollTop\n      });\n    }\n  }, sampling.scroll || 100);\n  return on('scroll', updatePosition, doc);\n}\nfunction initViewportResizeObserver(_a) {\n  var viewportResizeCb = _a.viewportResizeCb;\n  var lastH = -1;\n  var lastW = -1;\n  var updateDimension = throttle(function () {\n    var height = getWindowHeight();\n    var width = getWindowWidth();\n    if (lastH !== height || lastW !== width) {\n      viewportResizeCb({\n        width: Number(width),\n        height: Number(height)\n      });\n      lastH = height;\n      lastW = width;\n    }\n  }, 200);\n  return on('resize', updateDimension, window);\n}\nfunction wrapEventWithUserTriggeredFlag(v, enable) {\n  var value = __assign({}, v);\n  if (!enable) delete value.userTriggered;\n  return value;\n}\nvar INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nvar lastInputValueMap = new WeakMap();\nfunction initInputObserver(_a) {\n  var inputCb = _a.inputCb,\n    doc = _a.doc,\n    mirror = _a.mirror,\n    blockClass = _a.blockClass,\n    ignoreClass = _a.ignoreClass,\n    maskInputOptions = _a.maskInputOptions,\n    maskInputFn = _a.maskInputFn,\n    sampling = _a.sampling,\n    userTriggeredOnInput = _a.userTriggeredOnInput;\n  function eventHandler(event) {\n    var target = getEventTarget(event);\n    var userTriggered = event.isTrusted;\n    if (target && target.tagName === 'OPTION') target = target.parentElement;\n    if (!target || !target.tagName || INPUT_TAGS.indexOf(target.tagName) < 0 || isBlocked(target, blockClass)) {\n      return;\n    }\n    var type = target.type;\n    if (target.classList.contains(ignoreClass)) {\n      return;\n    }\n    var text = target.value;\n    var isChecked = false;\n    if (type === 'radio' || type === 'checkbox') {\n      isChecked = target.checked;\n    } else if (maskInputOptions[target.tagName.toLowerCase()] || maskInputOptions[type]) {\n      text = maskInputValue({\n        maskInputOptions: maskInputOptions,\n        tagName: target.tagName,\n        type: type,\n        value: text,\n        maskInputFn: maskInputFn\n      });\n    }\n    cbWithDedup(target, wrapEventWithUserTriggeredFlag({\n      text: text,\n      isChecked: isChecked,\n      userTriggered: userTriggered\n    }, userTriggeredOnInput));\n    var name = target.name;\n    if (type === 'radio' && name && isChecked) {\n      doc.querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\".concat(name, \"\\\"]\")).forEach(function (el) {\n        if (el !== target) {\n          cbWithDedup(el, wrapEventWithUserTriggeredFlag({\n            text: el.value,\n            isChecked: !isChecked,\n            userTriggered: false\n          }, userTriggeredOnInput));\n        }\n      });\n    }\n  }\n  function cbWithDedup(target, v) {\n    var lastInputValue = lastInputValueMap.get(target);\n    if (!lastInputValue || lastInputValue.text !== v.text || lastInputValue.isChecked !== v.isChecked) {\n      lastInputValueMap.set(target, v);\n      var id = mirror.getId(target);\n      inputCb(__assign(__assign({}, v), {\n        id: id\n      }));\n    }\n  }\n  var events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\n  var handlers = events.map(function (eventName) {\n    return on(eventName, eventHandler, doc);\n  });\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n  var hookProperties = [[HTMLInputElement.prototype, 'value'], [HTMLInputElement.prototype, 'checked'], [HTMLSelectElement.prototype, 'value'], [HTMLTextAreaElement.prototype, 'value'], [HTMLSelectElement.prototype, 'selectedIndex'], [HTMLOptionElement.prototype, 'selected']];\n  if (propertyDescriptor && propertyDescriptor.set) {\n    handlers.push.apply(handlers, __spreadArray([], __read(hookProperties.map(function (p) {\n      return hookSetter(p[0], p[1], {\n        set: function () {\n          eventHandler({\n            target: this\n          });\n        }\n      });\n    })), false));\n  }\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nfunction getNestedCSSRulePositions(rule) {\n  var positions = [];\n  function recurse(childRule, pos) {\n    if (isCSSGroupingRuleSupported && childRule.parentRule instanceof CSSGroupingRule || isCSSMediaRuleSupported && childRule.parentRule instanceof CSSMediaRule || isCSSSupportsRuleSupported && childRule.parentRule instanceof CSSSupportsRule || isCSSConditionRuleSupported && childRule.parentRule instanceof CSSConditionRule) {\n      var rules = Array.from(childRule.parentRule.cssRules);\n      var index = rules.indexOf(childRule);\n      pos.unshift(index);\n    } else {\n      var rules = Array.from(childRule.parentStyleSheet.cssRules);\n      var index = rules.indexOf(childRule);\n      pos.unshift(index);\n    }\n    return pos;\n  }\n  return recurse(rule, positions);\n}\nfunction initStyleSheetObserver(_a, _b) {\n  var styleSheetRuleCb = _a.styleSheetRuleCb,\n    mirror = _a.mirror;\n  var win = _b.win;\n  var insertRule = win.CSSStyleSheet.prototype.insertRule;\n  win.CSSStyleSheet.prototype.insertRule = function (rule, index) {\n    var id = mirror.getId(this.ownerNode);\n    if (id !== -1) {\n      styleSheetRuleCb({\n        id: id,\n        adds: [{\n          rule: rule,\n          index: index\n        }]\n      });\n    }\n    return insertRule.apply(this, arguments);\n  };\n  var deleteRule = win.CSSStyleSheet.prototype.deleteRule;\n  win.CSSStyleSheet.prototype.deleteRule = function (index) {\n    var id = mirror.getId(this.ownerNode);\n    if (id !== -1) {\n      styleSheetRuleCb({\n        id: id,\n        removes: [{\n          index: index\n        }]\n      });\n    }\n    return deleteRule.apply(this, arguments);\n  };\n  var supportedNestedCSSRuleTypes = {};\n  if (isCSSGroupingRuleSupported) {\n    supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\n  } else {\n    if (isCSSMediaRuleSupported) {\n      supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\n    }\n    if (isCSSConditionRuleSupported) {\n      supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\n    }\n    if (isCSSSupportsRuleSupported) {\n      supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\n    }\n  }\n  var unmodifiedFunctions = {};\n  Object.entries(supportedNestedCSSRuleTypes).forEach(function (_a) {\n    var _b = __read(_a, 2),\n      typeKey = _b[0],\n      type = _b[1];\n    unmodifiedFunctions[typeKey] = {\n      insertRule: type.prototype.insertRule,\n      deleteRule: type.prototype.deleteRule\n    };\n    type.prototype.insertRule = function (rule, index) {\n      var id = mirror.getId(this.parentStyleSheet.ownerNode);\n      if (id !== -1) {\n        styleSheetRuleCb({\n          id: id,\n          adds: [{\n            rule: rule,\n            index: __spreadArray(__spreadArray([], __read(getNestedCSSRulePositions(this)), false), [index || 0], false)\n          }]\n        });\n      }\n      return unmodifiedFunctions[typeKey].insertRule.apply(this, arguments);\n    };\n    type.prototype.deleteRule = function (index) {\n      var id = mirror.getId(this.parentStyleSheet.ownerNode);\n      if (id !== -1) {\n        styleSheetRuleCb({\n          id: id,\n          removes: [{\n            index: __spreadArray(__spreadArray([], __read(getNestedCSSRulePositions(this)), false), [index], false)\n          }]\n        });\n      }\n      return unmodifiedFunctions[typeKey].deleteRule.apply(this, arguments);\n    };\n  });\n  return function () {\n    win.CSSStyleSheet.prototype.insertRule = insertRule;\n    win.CSSStyleSheet.prototype.deleteRule = deleteRule;\n    Object.entries(supportedNestedCSSRuleTypes).forEach(function (_a) {\n      var _b = __read(_a, 2),\n        typeKey = _b[0],\n        type = _b[1];\n      type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\n      type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\n    });\n  };\n}\nfunction initStyleDeclarationObserver(_a, _b) {\n  var styleDeclarationCb = _a.styleDeclarationCb,\n    mirror = _a.mirror;\n  var win = _b.win;\n  var setProperty = win.CSSStyleDeclaration.prototype.setProperty;\n  win.CSSStyleDeclaration.prototype.setProperty = function (property, value, priority) {\n    var _a, _b;\n    var id = mirror.getId((_b = (_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet) === null || _b === void 0 ? void 0 : _b.ownerNode);\n    if (id !== -1) {\n      styleDeclarationCb({\n        id: id,\n        set: {\n          property: property,\n          value: value,\n          priority: priority\n        },\n        index: getNestedCSSRulePositions(this.parentRule)\n      });\n    }\n    return setProperty.apply(this, arguments);\n  };\n  var removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\n  win.CSSStyleDeclaration.prototype.removeProperty = function (property) {\n    var _a, _b;\n    var id = mirror.getId((_b = (_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet) === null || _b === void 0 ? void 0 : _b.ownerNode);\n    if (id !== -1) {\n      styleDeclarationCb({\n        id: id,\n        remove: {\n          property: property\n        },\n        index: getNestedCSSRulePositions(this.parentRule)\n      });\n    }\n    return removeProperty.apply(this, arguments);\n  };\n  return function () {\n    win.CSSStyleDeclaration.prototype.setProperty = setProperty;\n    win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\n  };\n}\nfunction initMediaInteractionObserver(_a) {\n  var mediaInteractionCb = _a.mediaInteractionCb,\n    blockClass = _a.blockClass,\n    mirror = _a.mirror,\n    sampling = _a.sampling;\n  var handler = function (type) {\n    return throttle(function (event) {\n      var target = getEventTarget(event);\n      if (!target || isBlocked(target, blockClass)) {\n        return;\n      }\n      var _a = target,\n        currentTime = _a.currentTime,\n        volume = _a.volume,\n        muted = _a.muted;\n      mediaInteractionCb({\n        type: type,\n        id: mirror.getId(target),\n        currentTime: currentTime,\n        volume: volume,\n        muted: muted\n      });\n    }, sampling.media || 500);\n  };\n  var handlers = [on('play', handler(0)), on('pause', handler(1)), on('seeked', handler(2)), on('volumechange', handler(3))];\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nfunction initFontObserver(_a) {\n  var fontCb = _a.fontCb,\n    doc = _a.doc;\n  var win = doc.defaultView;\n  if (!win) {\n    return function () {};\n  }\n  var handlers = [];\n  var fontMap = new WeakMap();\n  var originalFontFace = win.FontFace;\n  win.FontFace = function FontFace(family, source, descriptors) {\n    var fontFace = new originalFontFace(family, source, descriptors);\n    fontMap.set(fontFace, {\n      family: family,\n      buffer: typeof source !== 'string',\n      descriptors: descriptors,\n      fontSource: typeof source === 'string' ? source : JSON.stringify(Array.from(new Uint8Array(source)))\n    });\n    return fontFace;\n  };\n  var restoreHandler = patch(doc.fonts, 'add', function (original) {\n    return function (fontFace) {\n      setTimeout(function () {\n        var p = fontMap.get(fontFace);\n        if (p) {\n          fontCb(p);\n          fontMap.delete(fontFace);\n        }\n      }, 0);\n      return original.apply(this, [fontFace]);\n    };\n  });\n  handlers.push(function () {\n    win.FontFace = originalFontFace;\n  });\n  handlers.push(restoreHandler);\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nfunction mergeHooks(o, hooks) {\n  var mutationCb = o.mutationCb,\n    mousemoveCb = o.mousemoveCb,\n    mouseInteractionCb = o.mouseInteractionCb,\n    scrollCb = o.scrollCb,\n    viewportResizeCb = o.viewportResizeCb,\n    inputCb = o.inputCb,\n    mediaInteractionCb = o.mediaInteractionCb,\n    styleSheetRuleCb = o.styleSheetRuleCb,\n    styleDeclarationCb = o.styleDeclarationCb,\n    canvasMutationCb = o.canvasMutationCb,\n    fontCb = o.fontCb;\n  o.mutationCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.mutation) {\n      hooks.mutation.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    mutationCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.mousemoveCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.mousemove) {\n      hooks.mousemove.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    mousemoveCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.mouseInteractionCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.mouseInteraction) {\n      hooks.mouseInteraction.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    mouseInteractionCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.scrollCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.scroll) {\n      hooks.scroll.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    scrollCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.viewportResizeCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.viewportResize) {\n      hooks.viewportResize.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    viewportResizeCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.inputCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.input) {\n      hooks.input.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    inputCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.mediaInteractionCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.mediaInteaction) {\n      hooks.mediaInteaction.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    mediaInteractionCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.styleSheetRuleCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.styleSheetRule) {\n      hooks.styleSheetRule.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    styleSheetRuleCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.styleDeclarationCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.styleDeclaration) {\n      hooks.styleDeclaration.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    styleDeclarationCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.canvasMutationCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.canvasMutation) {\n      hooks.canvasMutation.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    canvasMutationCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n  o.fontCb = function () {\n    var p = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      p[_i] = arguments[_i];\n    }\n    if (hooks.font) {\n      hooks.font.apply(hooks, __spreadArray([], __read(p), false));\n    }\n    fontCb.apply(void 0, __spreadArray([], __read(p), false));\n  };\n}\nfunction initObservers(o, hooks) {\n  var e_1, _a;\n  if (hooks === void 0) {\n    hooks = {};\n  }\n  var currentWindow = o.doc.defaultView;\n  if (!currentWindow) {\n    return function () {};\n  }\n  mergeHooks(o, hooks);\n  var mutationObserver = initMutationObserver(o, o.doc);\n  var mousemoveHandler = initMoveObserver(o);\n  var mouseInteractionHandler = initMouseInteractionObserver(o);\n  var scrollHandler = initScrollObserver(o);\n  var viewportResizeHandler = initViewportResizeObserver(o);\n  var inputHandler = initInputObserver(o);\n  var mediaInteractionHandler = initMediaInteractionObserver(o);\n  var styleSheetObserver = initStyleSheetObserver(o, {\n    win: currentWindow\n  });\n  var styleDeclarationObserver = initStyleDeclarationObserver(o, {\n    win: currentWindow\n  });\n  var fontObserver = o.collectFonts ? initFontObserver(o) : function () {};\n  var pluginHandlers = [];\n  try {\n    for (var _b = __values(o.plugins), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var plugin = _c.value;\n      pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return function () {\n    mutationBuffers.forEach(function (b) {\n      return b.reset();\n    });\n    mutationObserver.disconnect();\n    mousemoveHandler();\n    mouseInteractionHandler();\n    scrollHandler();\n    viewportResizeHandler();\n    inputHandler();\n    mediaInteractionHandler();\n    styleSheetObserver();\n    styleDeclarationObserver();\n    fontObserver();\n    pluginHandlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nexport { INPUT_TAGS, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };","map":{"version":3,"names":["__read","__values","__spreadArray","__assign","maskInputValue","on","throttle","isTouchEvent","isBlocked","getWindowHeight","getWindowWidth","hookSetter","patch","IncrementalSource","MouseInteractions","MutationBuffer","mutationBuffers","isCSSGroupingRuleSupported","CSSGroupingRule","isCSSMediaRuleSupported","CSSMediaRule","isCSSSupportsRuleSupported","CSSSupportsRule","isCSSConditionRuleSupported","CSSConditionRule","getEventTarget","event","path","composedPath","length","target","_a","initMutationObserver","options","rootEl","_b","mutationBuffer","push","init","mutationObserverCtor","window","MutationObserver","__rrMutationObserver","angularZoneSymbol","Zone","__symbol__","call","observer","processMutations","bind","observe","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMoveObserver","mousemoveCb","sampling","doc","mirror","mousemove","threshold","callbackThreshold","mousemoveCallback","positions","timeBaseline","wrappedCb","source","totalOffset","Date","now","map","p","timeOffset","updatePosition","evt","changedTouches","clientX","clientY","x","y","id","getId","DragEvent","Drag","MouseEvent","MouseMove","TouchMove","trailing","handlers","forEach","h","initMouseInteractionObserver","mouseInteractionCb","blockClass","mouseInteraction","disableMap","undefined","getHandler","eventKey","e","type","Object","keys","filter","key","Number","isNaN","endsWith","eventName","toLowerCase","handler","initScrollObserver","scrollCb","scrollEl","scrollingElement","documentElement","scrollLeft","scrollTop","scroll","initViewportResizeObserver","viewportResizeCb","lastH","lastW","updateDimension","height","width","wrapEventWithUserTriggeredFlag","v","enable","value","userTriggered","INPUT_TAGS","lastInputValueMap","WeakMap","initInputObserver","inputCb","ignoreClass","maskInputOptions","maskInputFn","userTriggeredOnInput","eventHandler","isTrusted","tagName","parentElement","indexOf","classList","contains","text","isChecked","checked","cbWithDedup","name","querySelectorAll","concat","el","lastInputValue","get","set","events","input","propertyDescriptor","getOwnPropertyDescriptor","HTMLInputElement","prototype","hookProperties","HTMLSelectElement","HTMLTextAreaElement","HTMLOptionElement","apply","getNestedCSSRulePositions","rule","recurse","childRule","pos","parentRule","rules","Array","from","cssRules","index","unshift","parentStyleSheet","initStyleSheetObserver","styleSheetRuleCb","win","insertRule","CSSStyleSheet","ownerNode","adds","arguments","deleteRule","removes","supportedNestedCSSRuleTypes","unmodifiedFunctions","entries","typeKey","initStyleDeclarationObserver","styleDeclarationCb","setProperty","CSSStyleDeclaration","property","priority","removeProperty","remove","initMediaInteractionObserver","mediaInteractionCb","currentTime","volume","muted","media","initFontObserver","fontCb","defaultView","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","buffer","fontSource","JSON","stringify","Uint8Array","restoreHandler","fonts","original","setTimeout","delete","mergeHooks","o","hooks","mutationCb","canvasMutationCb","_i","mutation","viewportResize","mediaInteaction","styleSheetRule","styleDeclaration","canvasMutation","font","initObservers","e_1","currentWindow","mutationObserver","mousemoveHandler","mouseInteractionHandler","scrollHandler","viewportResizeHandler","inputHandler","mediaInteractionHandler","styleSheetObserver","styleDeclarationObserver","fontObserver","collectFonts","pluginHandlers","plugins","_c","next","done","plugin","callback","e_1_1","error","return","b","reset","disconnect"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observer.js"],"sourcesContent":["import { __read, __values, __spreadArray, __assign } from '../../ext/tslib/tslib.es6.js';\nimport { maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isTouchEvent, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch } from '../utils.js';\nimport { IncrementalSource, MouseInteractions } from '../types.js';\nimport MutationBuffer from './mutation.js';\n\nvar mutationBuffers = [];\nvar isCSSGroupingRuleSupported = typeof CSSGroupingRule !== 'undefined';\nvar isCSSMediaRuleSupported = typeof CSSMediaRule !== 'undefined';\nvar isCSSSupportsRuleSupported = typeof CSSSupportsRule !== 'undefined';\nvar isCSSConditionRuleSupported = typeof CSSConditionRule !== 'undefined';\nfunction getEventTarget(event) {\n    try {\n        if ('composedPath' in event) {\n            var path = event.composedPath();\n            if (path.length) {\n                return path[0];\n            }\n        }\n        else if ('path' in event && event.path.length) {\n            return event.path[0];\n        }\n        return event.target;\n    }\n    catch (_a) {\n        return event.target;\n    }\n}\nfunction initMutationObserver(options, rootEl) {\n    var _a, _b;\n    var mutationBuffer = new MutationBuffer();\n    mutationBuffers.push(mutationBuffer);\n    mutationBuffer.init(options);\n    var mutationObserverCtor = window.MutationObserver ||\n        window.__rrMutationObserver;\n    var angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\n    if (angularZoneSymbol &&\n        window[angularZoneSymbol]) {\n        mutationObserverCtor = window[angularZoneSymbol];\n    }\n    var observer = new mutationObserverCtor(mutationBuffer.processMutations.bind(mutationBuffer));\n    observer.observe(rootEl, {\n        attributes: true,\n        attributeOldValue: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true,\n    });\n    return observer;\n}\nfunction initMoveObserver(_a) {\n    var mousemoveCb = _a.mousemoveCb, sampling = _a.sampling, doc = _a.doc, mirror = _a.mirror;\n    if (sampling.mousemove === false) {\n        return function () { };\n    }\n    var threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\n    var callbackThreshold = typeof sampling.mousemoveCallback === 'number'\n        ? sampling.mousemoveCallback\n        : 500;\n    var positions = [];\n    var timeBaseline;\n    var wrappedCb = throttle(function (source) {\n        var totalOffset = Date.now() - timeBaseline;\n        mousemoveCb(positions.map(function (p) {\n            p.timeOffset -= totalOffset;\n            return p;\n        }), source);\n        positions = [];\n        timeBaseline = null;\n    }, callbackThreshold);\n    var updatePosition = throttle(function (evt) {\n        var target = getEventTarget(evt);\n        var _a = isTouchEvent(evt)\n            ? evt.changedTouches[0]\n            : evt, clientX = _a.clientX, clientY = _a.clientY;\n        if (!timeBaseline) {\n            timeBaseline = Date.now();\n        }\n        positions.push({\n            x: clientX,\n            y: clientY,\n            id: mirror.getId(target),\n            timeOffset: Date.now() - timeBaseline,\n        });\n        wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent\n            ? IncrementalSource.Drag\n            : evt instanceof MouseEvent\n                ? IncrementalSource.MouseMove\n                : IncrementalSource.TouchMove);\n    }, threshold, {\n        trailing: false,\n    });\n    var handlers = [\n        on('mousemove', updatePosition, doc),\n        on('touchmove', updatePosition, doc),\n        on('drag', updatePosition, doc),\n    ];\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initMouseInteractionObserver(_a) {\n    var mouseInteractionCb = _a.mouseInteractionCb, doc = _a.doc, mirror = _a.mirror, blockClass = _a.blockClass, sampling = _a.sampling;\n    if (sampling.mouseInteraction === false) {\n        return function () { };\n    }\n    var disableMap = sampling.mouseInteraction === true ||\n        sampling.mouseInteraction === undefined\n        ? {}\n        : sampling.mouseInteraction;\n    var handlers = [];\n    var getHandler = function (eventKey) {\n        return function (event) {\n            var target = getEventTarget(event);\n            if (isBlocked(target, blockClass)) {\n                return;\n            }\n            var e = isTouchEvent(event) ? event.changedTouches[0] : event;\n            if (!e) {\n                return;\n            }\n            var id = mirror.getId(target);\n            var clientX = e.clientX, clientY = e.clientY;\n            mouseInteractionCb({\n                type: MouseInteractions[eventKey],\n                id: id,\n                x: clientX,\n                y: clientY,\n            });\n        };\n    };\n    Object.keys(MouseInteractions)\n        .filter(function (key) {\n        return Number.isNaN(Number(key)) &&\n            !key.endsWith('_Departed') &&\n            disableMap[key] !== false;\n    })\n        .forEach(function (eventKey) {\n        var eventName = eventKey.toLowerCase();\n        var handler = getHandler(eventKey);\n        handlers.push(on(eventName, handler, doc));\n    });\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initScrollObserver(_a) {\n    var scrollCb = _a.scrollCb, doc = _a.doc, mirror = _a.mirror, blockClass = _a.blockClass, sampling = _a.sampling;\n    var updatePosition = throttle(function (evt) {\n        var target = getEventTarget(evt);\n        if (!target || isBlocked(target, blockClass)) {\n            return;\n        }\n        var id = mirror.getId(target);\n        if (target === doc) {\n            var scrollEl = (doc.scrollingElement || doc.documentElement);\n            scrollCb({\n                id: id,\n                x: scrollEl.scrollLeft,\n                y: scrollEl.scrollTop,\n            });\n        }\n        else {\n            scrollCb({\n                id: id,\n                x: target.scrollLeft,\n                y: target.scrollTop,\n            });\n        }\n    }, sampling.scroll || 100);\n    return on('scroll', updatePosition, doc);\n}\nfunction initViewportResizeObserver(_a) {\n    var viewportResizeCb = _a.viewportResizeCb;\n    var lastH = -1;\n    var lastW = -1;\n    var updateDimension = throttle(function () {\n        var height = getWindowHeight();\n        var width = getWindowWidth();\n        if (lastH !== height || lastW !== width) {\n            viewportResizeCb({\n                width: Number(width),\n                height: Number(height),\n            });\n            lastH = height;\n            lastW = width;\n        }\n    }, 200);\n    return on('resize', updateDimension, window);\n}\nfunction wrapEventWithUserTriggeredFlag(v, enable) {\n    var value = __assign({}, v);\n    if (!enable)\n        delete value.userTriggered;\n    return value;\n}\nvar INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nvar lastInputValueMap = new WeakMap();\nfunction initInputObserver(_a) {\n    var inputCb = _a.inputCb, doc = _a.doc, mirror = _a.mirror, blockClass = _a.blockClass, ignoreClass = _a.ignoreClass, maskInputOptions = _a.maskInputOptions, maskInputFn = _a.maskInputFn, sampling = _a.sampling, userTriggeredOnInput = _a.userTriggeredOnInput;\n    function eventHandler(event) {\n        var target = getEventTarget(event);\n        var userTriggered = event.isTrusted;\n        if (target && target.tagName === 'OPTION')\n            target = target.parentElement;\n        if (!target ||\n            !target.tagName ||\n            INPUT_TAGS.indexOf(target.tagName) < 0 ||\n            isBlocked(target, blockClass)) {\n            return;\n        }\n        var type = target.type;\n        if (target.classList.contains(ignoreClass)) {\n            return;\n        }\n        var text = target.value;\n        var isChecked = false;\n        if (type === 'radio' || type === 'checkbox') {\n            isChecked = target.checked;\n        }\n        else if (maskInputOptions[target.tagName.toLowerCase()] ||\n            maskInputOptions[type]) {\n            text = maskInputValue({\n                maskInputOptions: maskInputOptions,\n                tagName: target.tagName,\n                type: type,\n                value: text,\n                maskInputFn: maskInputFn,\n            });\n        }\n        cbWithDedup(target, wrapEventWithUserTriggeredFlag({ text: text, isChecked: isChecked, userTriggered: userTriggered }, userTriggeredOnInput));\n        var name = target.name;\n        if (type === 'radio' && name && isChecked) {\n            doc\n                .querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\".concat(name, \"\\\"]\"))\n                .forEach(function (el) {\n                if (el !== target) {\n                    cbWithDedup(el, wrapEventWithUserTriggeredFlag({\n                        text: el.value,\n                        isChecked: !isChecked,\n                        userTriggered: false,\n                    }, userTriggeredOnInput));\n                }\n            });\n        }\n    }\n    function cbWithDedup(target, v) {\n        var lastInputValue = lastInputValueMap.get(target);\n        if (!lastInputValue ||\n            lastInputValue.text !== v.text ||\n            lastInputValue.isChecked !== v.isChecked) {\n            lastInputValueMap.set(target, v);\n            var id = mirror.getId(target);\n            inputCb(__assign(__assign({}, v), { id: id }));\n        }\n    }\n    var events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\n    var handlers = events.map(function (eventName) { return on(eventName, eventHandler, doc); });\n    var propertyDescriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n    var hookProperties = [\n        [HTMLInputElement.prototype, 'value'],\n        [HTMLInputElement.prototype, 'checked'],\n        [HTMLSelectElement.prototype, 'value'],\n        [HTMLTextAreaElement.prototype, 'value'],\n        [HTMLSelectElement.prototype, 'selectedIndex'],\n        [HTMLOptionElement.prototype, 'selected'],\n    ];\n    if (propertyDescriptor && propertyDescriptor.set) {\n        handlers.push.apply(handlers, __spreadArray([], __read(hookProperties.map(function (p) {\n            return hookSetter(p[0], p[1], {\n                set: function () {\n                    eventHandler({ target: this });\n                },\n            });\n        })), false));\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction getNestedCSSRulePositions(rule) {\n    var positions = [];\n    function recurse(childRule, pos) {\n        if ((isCSSGroupingRuleSupported &&\n            childRule.parentRule instanceof CSSGroupingRule) ||\n            (isCSSMediaRuleSupported &&\n                childRule.parentRule instanceof CSSMediaRule) ||\n            (isCSSSupportsRuleSupported &&\n                childRule.parentRule instanceof CSSSupportsRule) ||\n            (isCSSConditionRuleSupported &&\n                childRule.parentRule instanceof CSSConditionRule)) {\n            var rules = Array.from(childRule.parentRule.cssRules);\n            var index = rules.indexOf(childRule);\n            pos.unshift(index);\n        }\n        else {\n            var rules = Array.from(childRule.parentStyleSheet.cssRules);\n            var index = rules.indexOf(childRule);\n            pos.unshift(index);\n        }\n        return pos;\n    }\n    return recurse(rule, positions);\n}\nfunction initStyleSheetObserver(_a, _b) {\n    var styleSheetRuleCb = _a.styleSheetRuleCb, mirror = _a.mirror;\n    var win = _b.win;\n    var insertRule = win.CSSStyleSheet.prototype.insertRule;\n    win.CSSStyleSheet.prototype.insertRule = function (rule, index) {\n        var id = mirror.getId(this.ownerNode);\n        if (id !== -1) {\n            styleSheetRuleCb({\n                id: id,\n                adds: [{ rule: rule, index: index }],\n            });\n        }\n        return insertRule.apply(this, arguments);\n    };\n    var deleteRule = win.CSSStyleSheet.prototype.deleteRule;\n    win.CSSStyleSheet.prototype.deleteRule = function (index) {\n        var id = mirror.getId(this.ownerNode);\n        if (id !== -1) {\n            styleSheetRuleCb({\n                id: id,\n                removes: [{ index: index }],\n            });\n        }\n        return deleteRule.apply(this, arguments);\n    };\n    var supportedNestedCSSRuleTypes = {};\n    if (isCSSGroupingRuleSupported) {\n        supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\n    }\n    else {\n        if (isCSSMediaRuleSupported) {\n            supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\n        }\n        if (isCSSConditionRuleSupported) {\n            supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\n        }\n        if (isCSSSupportsRuleSupported) {\n            supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\n        }\n    }\n    var unmodifiedFunctions = {};\n    Object.entries(supportedNestedCSSRuleTypes).forEach(function (_a) {\n        var _b = __read(_a, 2), typeKey = _b[0], type = _b[1];\n        unmodifiedFunctions[typeKey] = {\n            insertRule: type.prototype.insertRule,\n            deleteRule: type.prototype.deleteRule,\n        };\n        type.prototype.insertRule = function (rule, index) {\n            var id = mirror.getId(this.parentStyleSheet.ownerNode);\n            if (id !== -1) {\n                styleSheetRuleCb({\n                    id: id,\n                    adds: [\n                        {\n                            rule: rule,\n                            index: __spreadArray(__spreadArray([], __read(getNestedCSSRulePositions(this)), false), [\n                                index || 0,\n                            ], false),\n                        },\n                    ],\n                });\n            }\n            return unmodifiedFunctions[typeKey].insertRule.apply(this, arguments);\n        };\n        type.prototype.deleteRule = function (index) {\n            var id = mirror.getId(this.parentStyleSheet.ownerNode);\n            if (id !== -1) {\n                styleSheetRuleCb({\n                    id: id,\n                    removes: [{ index: __spreadArray(__spreadArray([], __read(getNestedCSSRulePositions(this)), false), [index], false) }],\n                });\n            }\n            return unmodifiedFunctions[typeKey].deleteRule.apply(this, arguments);\n        };\n    });\n    return function () {\n        win.CSSStyleSheet.prototype.insertRule = insertRule;\n        win.CSSStyleSheet.prototype.deleteRule = deleteRule;\n        Object.entries(supportedNestedCSSRuleTypes).forEach(function (_a) {\n            var _b = __read(_a, 2), typeKey = _b[0], type = _b[1];\n            type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\n            type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\n        });\n    };\n}\nfunction initStyleDeclarationObserver(_a, _b) {\n    var styleDeclarationCb = _a.styleDeclarationCb, mirror = _a.mirror;\n    var win = _b.win;\n    var setProperty = win.CSSStyleDeclaration.prototype.setProperty;\n    win.CSSStyleDeclaration.prototype.setProperty = function (property, value, priority) {\n        var _a, _b;\n        var id = mirror.getId((_b = (_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet) === null || _b === void 0 ? void 0 : _b.ownerNode);\n        if (id !== -1) {\n            styleDeclarationCb({\n                id: id,\n                set: {\n                    property: property,\n                    value: value,\n                    priority: priority,\n                },\n                index: getNestedCSSRulePositions(this.parentRule),\n            });\n        }\n        return setProperty.apply(this, arguments);\n    };\n    var removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\n    win.CSSStyleDeclaration.prototype.removeProperty = function (property) {\n        var _a, _b;\n        var id = mirror.getId((_b = (_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet) === null || _b === void 0 ? void 0 : _b.ownerNode);\n        if (id !== -1) {\n            styleDeclarationCb({\n                id: id,\n                remove: {\n                    property: property,\n                },\n                index: getNestedCSSRulePositions(this.parentRule),\n            });\n        }\n        return removeProperty.apply(this, arguments);\n    };\n    return function () {\n        win.CSSStyleDeclaration.prototype.setProperty = setProperty;\n        win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\n    };\n}\nfunction initMediaInteractionObserver(_a) {\n    var mediaInteractionCb = _a.mediaInteractionCb, blockClass = _a.blockClass, mirror = _a.mirror, sampling = _a.sampling;\n    var handler = function (type) {\n        return throttle(function (event) {\n            var target = getEventTarget(event);\n            if (!target || isBlocked(target, blockClass)) {\n                return;\n            }\n            var _a = target, currentTime = _a.currentTime, volume = _a.volume, muted = _a.muted;\n            mediaInteractionCb({\n                type: type,\n                id: mirror.getId(target),\n                currentTime: currentTime,\n                volume: volume,\n                muted: muted,\n            });\n        }, sampling.media || 500);\n    };\n    var handlers = [\n        on('play', handler(0)),\n        on('pause', handler(1)),\n        on('seeked', handler(2)),\n        on('volumechange', handler(3)),\n    ];\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initFontObserver(_a) {\n    var fontCb = _a.fontCb, doc = _a.doc;\n    var win = doc.defaultView;\n    if (!win) {\n        return function () { };\n    }\n    var handlers = [];\n    var fontMap = new WeakMap();\n    var originalFontFace = win.FontFace;\n    win.FontFace = function FontFace(family, source, descriptors) {\n        var fontFace = new originalFontFace(family, source, descriptors);\n        fontMap.set(fontFace, {\n            family: family,\n            buffer: typeof source !== 'string',\n            descriptors: descriptors,\n            fontSource: typeof source === 'string'\n                ? source\n                :\n                    JSON.stringify(Array.from(new Uint8Array(source))),\n        });\n        return fontFace;\n    };\n    var restoreHandler = patch(doc.fonts, 'add', function (original) {\n        return function (fontFace) {\n            setTimeout(function () {\n                var p = fontMap.get(fontFace);\n                if (p) {\n                    fontCb(p);\n                    fontMap.delete(fontFace);\n                }\n            }, 0);\n            return original.apply(this, [fontFace]);\n        };\n    });\n    handlers.push(function () {\n        win.FontFace = originalFontFace;\n    });\n    handlers.push(restoreHandler);\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction mergeHooks(o, hooks) {\n    var mutationCb = o.mutationCb, mousemoveCb = o.mousemoveCb, mouseInteractionCb = o.mouseInteractionCb, scrollCb = o.scrollCb, viewportResizeCb = o.viewportResizeCb, inputCb = o.inputCb, mediaInteractionCb = o.mediaInteractionCb, styleSheetRuleCb = o.styleSheetRuleCb, styleDeclarationCb = o.styleDeclarationCb, canvasMutationCb = o.canvasMutationCb, fontCb = o.fontCb;\n    o.mutationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mutation) {\n            hooks.mutation.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        mutationCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.mousemoveCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mousemove) {\n            hooks.mousemove.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        mousemoveCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.mouseInteractionCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mouseInteraction) {\n            hooks.mouseInteraction.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        mouseInteractionCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.scrollCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.scroll) {\n            hooks.scroll.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        scrollCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.viewportResizeCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.viewportResize) {\n            hooks.viewportResize.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        viewportResizeCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.inputCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.input) {\n            hooks.input.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        inputCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.mediaInteractionCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mediaInteaction) {\n            hooks.mediaInteaction.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        mediaInteractionCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.styleSheetRuleCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.styleSheetRule) {\n            hooks.styleSheetRule.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        styleSheetRuleCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.styleDeclarationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.styleDeclaration) {\n            hooks.styleDeclaration.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        styleDeclarationCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.canvasMutationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.canvasMutation) {\n            hooks.canvasMutation.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        canvasMutationCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n    o.fontCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.font) {\n            hooks.font.apply(hooks, __spreadArray([], __read(p), false));\n        }\n        fontCb.apply(void 0, __spreadArray([], __read(p), false));\n    };\n}\nfunction initObservers(o, hooks) {\n    var e_1, _a;\n    if (hooks === void 0) { hooks = {}; }\n    var currentWindow = o.doc.defaultView;\n    if (!currentWindow) {\n        return function () { };\n    }\n    mergeHooks(o, hooks);\n    var mutationObserver = initMutationObserver(o, o.doc);\n    var mousemoveHandler = initMoveObserver(o);\n    var mouseInteractionHandler = initMouseInteractionObserver(o);\n    var scrollHandler = initScrollObserver(o);\n    var viewportResizeHandler = initViewportResizeObserver(o);\n    var inputHandler = initInputObserver(o);\n    var mediaInteractionHandler = initMediaInteractionObserver(o);\n    var styleSheetObserver = initStyleSheetObserver(o, { win: currentWindow });\n    var styleDeclarationObserver = initStyleDeclarationObserver(o, {\n        win: currentWindow,\n    });\n    var fontObserver = o.collectFonts ? initFontObserver(o) : function () { };\n    var pluginHandlers = [];\n    try {\n        for (var _b = __values(o.plugins), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var plugin = _c.value;\n            pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return function () {\n        mutationBuffers.forEach(function (b) { return b.reset(); });\n        mutationObserver.disconnect();\n        mousemoveHandler();\n        mouseInteractionHandler();\n        scrollHandler();\n        viewportResizeHandler();\n        inputHandler();\n        mediaInteractionHandler();\n        styleSheetObserver();\n        styleDeclarationObserver();\n        fontObserver();\n        pluginHandlers.forEach(function (h) { return h(); });\n    };\n}\n\nexport { INPUT_TAGS, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,QAAQ,QAAQ,8BAA8B;AACxF,SAASC,cAAc,QAAQ,8CAA8C;AAC7E,SAASC,EAAE,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,SAAS,EAAEC,eAAe,EAAEC,cAAc,EAAEC,UAAU,EAAEC,KAAK,QAAQ,aAAa;AACvH,SAASC,iBAAiB,EAAEC,iBAAiB,QAAQ,aAAa;AAClE,OAAOC,cAAc,MAAM,eAAe;AAE1C,IAAIC,eAAe,GAAG,EAAE;AACxB,IAAIC,0BAA0B,GAAG,OAAOC,eAAe,KAAK,WAAW;AACvE,IAAIC,uBAAuB,GAAG,OAAOC,YAAY,KAAK,WAAW;AACjE,IAAIC,0BAA0B,GAAG,OAAOC,eAAe,KAAK,WAAW;AACvE,IAAIC,2BAA2B,GAAG,OAAOC,gBAAgB,KAAK,WAAW;AACzE,SAASC,cAAcA,CAACC,KAAK,EAAE;EAC3B,IAAI;IACA,IAAI,cAAc,IAAIA,KAAK,EAAE;MACzB,IAAIC,IAAI,GAAGD,KAAK,CAACE,YAAY,CAAC,CAAC;MAC/B,IAAID,IAAI,CAACE,MAAM,EAAE;QACb,OAAOF,IAAI,CAAC,CAAC,CAAC;MAClB;IACJ,CAAC,MACI,IAAI,MAAM,IAAID,KAAK,IAAIA,KAAK,CAACC,IAAI,CAACE,MAAM,EAAE;MAC3C,OAAOH,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;IACxB;IACA,OAAOD,KAAK,CAACI,MAAM;EACvB,CAAC,CACD,OAAOC,EAAE,EAAE;IACP,OAAOL,KAAK,CAACI,MAAM;EACvB;AACJ;AACA,SAASE,oBAAoBA,CAACC,OAAO,EAAEC,MAAM,EAAE;EAC3C,IAAIH,EAAE,EAAEI,EAAE;EACV,IAAIC,cAAc,GAAG,IAAIrB,cAAc,CAAC,CAAC;EACzCC,eAAe,CAACqB,IAAI,CAACD,cAAc,CAAC;EACpCA,cAAc,CAACE,IAAI,CAACL,OAAO,CAAC;EAC5B,IAAIM,oBAAoB,GAAGC,MAAM,CAACC,gBAAgB,IAC9CD,MAAM,CAACE,oBAAoB;EAC/B,IAAIC,iBAAiB,GAAG,CAACR,EAAE,GAAG,CAACJ,EAAE,GAAGS,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACI,IAAI,MAAM,IAAI,IAAIb,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACc,UAAU,MAAM,IAAI,IAAIV,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,IAAI,CAACf,EAAE,EAAE,kBAAkB,CAAC;EACzN,IAAIY,iBAAiB,IACjBH,MAAM,CAACG,iBAAiB,CAAC,EAAE;IAC3BJ,oBAAoB,GAAGC,MAAM,CAACG,iBAAiB,CAAC;EACpD;EACA,IAAII,QAAQ,GAAG,IAAIR,oBAAoB,CAACH,cAAc,CAACY,gBAAgB,CAACC,IAAI,CAACb,cAAc,CAAC,CAAC;EAC7FW,QAAQ,CAACG,OAAO,CAAChB,MAAM,EAAE;IACrBiB,UAAU,EAAE,IAAI;IAChBC,iBAAiB,EAAE,IAAI;IACvBC,aAAa,EAAE,IAAI;IACnBC,qBAAqB,EAAE,IAAI;IAC3BC,SAAS,EAAE,IAAI;IACfC,OAAO,EAAE;EACb,CAAC,CAAC;EACF,OAAOT,QAAQ;AACnB;AACA,SAASU,gBAAgBA,CAAC1B,EAAE,EAAE;EAC1B,IAAI2B,WAAW,GAAG3B,EAAE,CAAC2B,WAAW;IAAEC,QAAQ,GAAG5B,EAAE,CAAC4B,QAAQ;IAAEC,GAAG,GAAG7B,EAAE,CAAC6B,GAAG;IAAEC,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;EAC1F,IAAIF,QAAQ,CAACG,SAAS,KAAK,KAAK,EAAE;IAC9B,OAAO,YAAY,CAAE,CAAC;EAC1B;EACA,IAAIC,SAAS,GAAG,OAAOJ,QAAQ,CAACG,SAAS,KAAK,QAAQ,GAAGH,QAAQ,CAACG,SAAS,GAAG,EAAE;EAChF,IAAIE,iBAAiB,GAAG,OAAOL,QAAQ,CAACM,iBAAiB,KAAK,QAAQ,GAChEN,QAAQ,CAACM,iBAAiB,GAC1B,GAAG;EACT,IAAIC,SAAS,GAAG,EAAE;EAClB,IAAIC,YAAY;EAChB,IAAIC,SAAS,GAAG9D,QAAQ,CAAC,UAAU+D,MAAM,EAAE;IACvC,IAAIC,WAAW,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGL,YAAY;IAC3CT,WAAW,CAACQ,SAAS,CAACO,GAAG,CAAC,UAAUC,CAAC,EAAE;MACnCA,CAAC,CAACC,UAAU,IAAIL,WAAW;MAC3B,OAAOI,CAAC;IACZ,CAAC,CAAC,EAAEL,MAAM,CAAC;IACXH,SAAS,GAAG,EAAE;IACdC,YAAY,GAAG,IAAI;EACvB,CAAC,EAAEH,iBAAiB,CAAC;EACrB,IAAIY,cAAc,GAAGtE,QAAQ,CAAC,UAAUuE,GAAG,EAAE;IACzC,IAAI/C,MAAM,GAAGL,cAAc,CAACoD,GAAG,CAAC;IAChC,IAAI9C,EAAE,GAAGxB,YAAY,CAACsE,GAAG,CAAC,GACpBA,GAAG,CAACC,cAAc,CAAC,CAAC,CAAC,GACrBD,GAAG;MAAEE,OAAO,GAAGhD,EAAE,CAACgD,OAAO;MAAEC,OAAO,GAAGjD,EAAE,CAACiD,OAAO;IACrD,IAAI,CAACb,YAAY,EAAE;MACfA,YAAY,GAAGI,IAAI,CAACC,GAAG,CAAC,CAAC;IAC7B;IACAN,SAAS,CAAC7B,IAAI,CAAC;MACX4C,CAAC,EAAEF,OAAO;MACVG,CAAC,EAAEF,OAAO;MACVG,EAAE,EAAEtB,MAAM,CAACuB,KAAK,CAACtD,MAAM,CAAC;MACxB6C,UAAU,EAAEJ,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGL;IAC7B,CAAC,CAAC;IACFC,SAAS,CAAC,OAAOiB,SAAS,KAAK,WAAW,IAAIR,GAAG,YAAYQ,SAAS,GAChExE,iBAAiB,CAACyE,IAAI,GACtBT,GAAG,YAAYU,UAAU,GACrB1E,iBAAiB,CAAC2E,SAAS,GAC3B3E,iBAAiB,CAAC4E,SAAS,CAAC;EAC1C,CAAC,EAAE1B,SAAS,EAAE;IACV2B,QAAQ,EAAE;EACd,CAAC,CAAC;EACF,IAAIC,QAAQ,GAAG,CACXtF,EAAE,CAAC,WAAW,EAAEuE,cAAc,EAAEhB,GAAG,CAAC,EACpCvD,EAAE,CAAC,WAAW,EAAEuE,cAAc,EAAEhB,GAAG,CAAC,EACpCvD,EAAE,CAAC,MAAM,EAAEuE,cAAc,EAAEhB,GAAG,CAAC,CAClC;EACD,OAAO,YAAY;IACf+B,QAAQ,CAACC,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAClD,CAAC;AACL;AACA,SAASC,4BAA4BA,CAAC/D,EAAE,EAAE;EACtC,IAAIgE,kBAAkB,GAAGhE,EAAE,CAACgE,kBAAkB;IAAEnC,GAAG,GAAG7B,EAAE,CAAC6B,GAAG;IAAEC,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;IAAEmC,UAAU,GAAGjE,EAAE,CAACiE,UAAU;IAAErC,QAAQ,GAAG5B,EAAE,CAAC4B,QAAQ;EACpI,IAAIA,QAAQ,CAACsC,gBAAgB,KAAK,KAAK,EAAE;IACrC,OAAO,YAAY,CAAE,CAAC;EAC1B;EACA,IAAIC,UAAU,GAAGvC,QAAQ,CAACsC,gBAAgB,KAAK,IAAI,IAC/CtC,QAAQ,CAACsC,gBAAgB,KAAKE,SAAS,GACrC,CAAC,CAAC,GACFxC,QAAQ,CAACsC,gBAAgB;EAC/B,IAAIN,QAAQ,GAAG,EAAE;EACjB,IAAIS,UAAU,GAAG,SAAAA,CAAUC,QAAQ,EAAE;IACjC,OAAO,UAAU3E,KAAK,EAAE;MACpB,IAAII,MAAM,GAAGL,cAAc,CAACC,KAAK,CAAC;MAClC,IAAIlB,SAAS,CAACsB,MAAM,EAAEkE,UAAU,CAAC,EAAE;QAC/B;MACJ;MACA,IAAIM,CAAC,GAAG/F,YAAY,CAACmB,KAAK,CAAC,GAAGA,KAAK,CAACoD,cAAc,CAAC,CAAC,CAAC,GAAGpD,KAAK;MAC7D,IAAI,CAAC4E,CAAC,EAAE;QACJ;MACJ;MACA,IAAInB,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAACtD,MAAM,CAAC;MAC7B,IAAIiD,OAAO,GAAGuB,CAAC,CAACvB,OAAO;QAAEC,OAAO,GAAGsB,CAAC,CAACtB,OAAO;MAC5Ce,kBAAkB,CAAC;QACfQ,IAAI,EAAEzF,iBAAiB,CAACuF,QAAQ,CAAC;QACjClB,EAAE,EAAEA,EAAE;QACNF,CAAC,EAAEF,OAAO;QACVG,CAAC,EAAEF;MACP,CAAC,CAAC;IACN,CAAC;EACL,CAAC;EACDwB,MAAM,CAACC,IAAI,CAAC3F,iBAAiB,CAAC,CACzB4F,MAAM,CAAC,UAAUC,GAAG,EAAE;IACvB,OAAOC,MAAM,CAACC,KAAK,CAACD,MAAM,CAACD,GAAG,CAAC,CAAC,IAC5B,CAACA,GAAG,CAACG,QAAQ,CAAC,WAAW,CAAC,IAC1BZ,UAAU,CAACS,GAAG,CAAC,KAAK,KAAK;EACjC,CAAC,CAAC,CACGf,OAAO,CAAC,UAAUS,QAAQ,EAAE;IAC7B,IAAIU,SAAS,GAAGV,QAAQ,CAACW,WAAW,CAAC,CAAC;IACtC,IAAIC,OAAO,GAAGb,UAAU,CAACC,QAAQ,CAAC;IAClCV,QAAQ,CAACtD,IAAI,CAAChC,EAAE,CAAC0G,SAAS,EAAEE,OAAO,EAAErD,GAAG,CAAC,CAAC;EAC9C,CAAC,CAAC;EACF,OAAO,YAAY;IACf+B,QAAQ,CAACC,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAClD,CAAC;AACL;AACA,SAASqB,kBAAkBA,CAACnF,EAAE,EAAE;EAC5B,IAAIoF,QAAQ,GAAGpF,EAAE,CAACoF,QAAQ;IAAEvD,GAAG,GAAG7B,EAAE,CAAC6B,GAAG;IAAEC,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;IAAEmC,UAAU,GAAGjE,EAAE,CAACiE,UAAU;IAAErC,QAAQ,GAAG5B,EAAE,CAAC4B,QAAQ;EAChH,IAAIiB,cAAc,GAAGtE,QAAQ,CAAC,UAAUuE,GAAG,EAAE;IACzC,IAAI/C,MAAM,GAAGL,cAAc,CAACoD,GAAG,CAAC;IAChC,IAAI,CAAC/C,MAAM,IAAItB,SAAS,CAACsB,MAAM,EAAEkE,UAAU,CAAC,EAAE;MAC1C;IACJ;IACA,IAAIb,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAACtD,MAAM,CAAC;IAC7B,IAAIA,MAAM,KAAK8B,GAAG,EAAE;MAChB,IAAIwD,QAAQ,GAAIxD,GAAG,CAACyD,gBAAgB,IAAIzD,GAAG,CAAC0D,eAAgB;MAC5DH,QAAQ,CAAC;QACLhC,EAAE,EAAEA,EAAE;QACNF,CAAC,EAAEmC,QAAQ,CAACG,UAAU;QACtBrC,CAAC,EAAEkC,QAAQ,CAACI;MAChB,CAAC,CAAC;IACN,CAAC,MACI;MACDL,QAAQ,CAAC;QACLhC,EAAE,EAAEA,EAAE;QACNF,CAAC,EAAEnD,MAAM,CAACyF,UAAU;QACpBrC,CAAC,EAAEpD,MAAM,CAAC0F;MACd,CAAC,CAAC;IACN;EACJ,CAAC,EAAE7D,QAAQ,CAAC8D,MAAM,IAAI,GAAG,CAAC;EAC1B,OAAOpH,EAAE,CAAC,QAAQ,EAAEuE,cAAc,EAAEhB,GAAG,CAAC;AAC5C;AACA,SAAS8D,0BAA0BA,CAAC3F,EAAE,EAAE;EACpC,IAAI4F,gBAAgB,GAAG5F,EAAE,CAAC4F,gBAAgB;EAC1C,IAAIC,KAAK,GAAG,CAAC,CAAC;EACd,IAAIC,KAAK,GAAG,CAAC,CAAC;EACd,IAAIC,eAAe,GAAGxH,QAAQ,CAAC,YAAY;IACvC,IAAIyH,MAAM,GAAGtH,eAAe,CAAC,CAAC;IAC9B,IAAIuH,KAAK,GAAGtH,cAAc,CAAC,CAAC;IAC5B,IAAIkH,KAAK,KAAKG,MAAM,IAAIF,KAAK,KAAKG,KAAK,EAAE;MACrCL,gBAAgB,CAAC;QACbK,KAAK,EAAEpB,MAAM,CAACoB,KAAK,CAAC;QACpBD,MAAM,EAAEnB,MAAM,CAACmB,MAAM;MACzB,CAAC,CAAC;MACFH,KAAK,GAAGG,MAAM;MACdF,KAAK,GAAGG,KAAK;IACjB;EACJ,CAAC,EAAE,GAAG,CAAC;EACP,OAAO3H,EAAE,CAAC,QAAQ,EAAEyH,eAAe,EAAEtF,MAAM,CAAC;AAChD;AACA,SAASyF,8BAA8BA,CAACC,CAAC,EAAEC,MAAM,EAAE;EAC/C,IAAIC,KAAK,GAAGjI,QAAQ,CAAC,CAAC,CAAC,EAAE+H,CAAC,CAAC;EAC3B,IAAI,CAACC,MAAM,EACP,OAAOC,KAAK,CAACC,aAAa;EAC9B,OAAOD,KAAK;AAChB;AACA,IAAIE,UAAU,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,QAAQ,CAAC;AAChD,IAAIC,iBAAiB,GAAG,IAAIC,OAAO,CAAC,CAAC;AACrC,SAASC,iBAAiBA,CAAC1G,EAAE,EAAE;EAC3B,IAAI2G,OAAO,GAAG3G,EAAE,CAAC2G,OAAO;IAAE9E,GAAG,GAAG7B,EAAE,CAAC6B,GAAG;IAAEC,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;IAAEmC,UAAU,GAAGjE,EAAE,CAACiE,UAAU;IAAE2C,WAAW,GAAG5G,EAAE,CAAC4G,WAAW;IAAEC,gBAAgB,GAAG7G,EAAE,CAAC6G,gBAAgB;IAAEC,WAAW,GAAG9G,EAAE,CAAC8G,WAAW;IAAElF,QAAQ,GAAG5B,EAAE,CAAC4B,QAAQ;IAAEmF,oBAAoB,GAAG/G,EAAE,CAAC+G,oBAAoB;EAClQ,SAASC,YAAYA,CAACrH,KAAK,EAAE;IACzB,IAAII,MAAM,GAAGL,cAAc,CAACC,KAAK,CAAC;IAClC,IAAI2G,aAAa,GAAG3G,KAAK,CAACsH,SAAS;IACnC,IAAIlH,MAAM,IAAIA,MAAM,CAACmH,OAAO,KAAK,QAAQ,EACrCnH,MAAM,GAAGA,MAAM,CAACoH,aAAa;IACjC,IAAI,CAACpH,MAAM,IACP,CAACA,MAAM,CAACmH,OAAO,IACfX,UAAU,CAACa,OAAO,CAACrH,MAAM,CAACmH,OAAO,CAAC,GAAG,CAAC,IACtCzI,SAAS,CAACsB,MAAM,EAAEkE,UAAU,CAAC,EAAE;MAC/B;IACJ;IACA,IAAIO,IAAI,GAAGzE,MAAM,CAACyE,IAAI;IACtB,IAAIzE,MAAM,CAACsH,SAAS,CAACC,QAAQ,CAACV,WAAW,CAAC,EAAE;MACxC;IACJ;IACA,IAAIW,IAAI,GAAGxH,MAAM,CAACsG,KAAK;IACvB,IAAImB,SAAS,GAAG,KAAK;IACrB,IAAIhD,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,UAAU,EAAE;MACzCgD,SAAS,GAAGzH,MAAM,CAAC0H,OAAO;IAC9B,CAAC,MACI,IAAIZ,gBAAgB,CAAC9G,MAAM,CAACmH,OAAO,CAACjC,WAAW,CAAC,CAAC,CAAC,IACnD4B,gBAAgB,CAACrC,IAAI,CAAC,EAAE;MACxB+C,IAAI,GAAGlJ,cAAc,CAAC;QAClBwI,gBAAgB,EAAEA,gBAAgB;QAClCK,OAAO,EAAEnH,MAAM,CAACmH,OAAO;QACvB1C,IAAI,EAAEA,IAAI;QACV6B,KAAK,EAAEkB,IAAI;QACXT,WAAW,EAAEA;MACjB,CAAC,CAAC;IACN;IACAY,WAAW,CAAC3H,MAAM,EAAEmG,8BAA8B,CAAC;MAAEqB,IAAI,EAAEA,IAAI;MAAEC,SAAS,EAAEA,SAAS;MAAElB,aAAa,EAAEA;IAAc,CAAC,EAAES,oBAAoB,CAAC,CAAC;IAC7I,IAAIY,IAAI,GAAG5H,MAAM,CAAC4H,IAAI;IACtB,IAAInD,IAAI,KAAK,OAAO,IAAImD,IAAI,IAAIH,SAAS,EAAE;MACvC3F,GAAG,CACE+F,gBAAgB,CAAC,+BAA+B,CAACC,MAAM,CAACF,IAAI,EAAE,KAAK,CAAC,CAAC,CACrE9D,OAAO,CAAC,UAAUiE,EAAE,EAAE;QACvB,IAAIA,EAAE,KAAK/H,MAAM,EAAE;UACf2H,WAAW,CAACI,EAAE,EAAE5B,8BAA8B,CAAC;YAC3CqB,IAAI,EAAEO,EAAE,CAACzB,KAAK;YACdmB,SAAS,EAAE,CAACA,SAAS;YACrBlB,aAAa,EAAE;UACnB,CAAC,EAAES,oBAAoB,CAAC,CAAC;QAC7B;MACJ,CAAC,CAAC;IACN;EACJ;EACA,SAASW,WAAWA,CAAC3H,MAAM,EAAEoG,CAAC,EAAE;IAC5B,IAAI4B,cAAc,GAAGvB,iBAAiB,CAACwB,GAAG,CAACjI,MAAM,CAAC;IAClD,IAAI,CAACgI,cAAc,IACfA,cAAc,CAACR,IAAI,KAAKpB,CAAC,CAACoB,IAAI,IAC9BQ,cAAc,CAACP,SAAS,KAAKrB,CAAC,CAACqB,SAAS,EAAE;MAC1ChB,iBAAiB,CAACyB,GAAG,CAAClI,MAAM,EAAEoG,CAAC,CAAC;MAChC,IAAI/C,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAACtD,MAAM,CAAC;MAC7B4G,OAAO,CAACvI,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE+H,CAAC,CAAC,EAAE;QAAE/C,EAAE,EAAEA;MAAG,CAAC,CAAC,CAAC;IAClD;EACJ;EACA,IAAI8E,MAAM,GAAGtG,QAAQ,CAACuG,KAAK,KAAK,MAAM,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC;EACzE,IAAIvE,QAAQ,GAAGsE,MAAM,CAACxF,GAAG,CAAC,UAAUsC,SAAS,EAAE;IAAE,OAAO1G,EAAE,CAAC0G,SAAS,EAAEgC,YAAY,EAAEnF,GAAG,CAAC;EAAE,CAAC,CAAC;EAC5F,IAAIuG,kBAAkB,GAAG3D,MAAM,CAAC4D,wBAAwB,CAACC,gBAAgB,CAACC,SAAS,EAAE,OAAO,CAAC;EAC7F,IAAIC,cAAc,GAAG,CACjB,CAACF,gBAAgB,CAACC,SAAS,EAAE,OAAO,CAAC,EACrC,CAACD,gBAAgB,CAACC,SAAS,EAAE,SAAS,CAAC,EACvC,CAACE,iBAAiB,CAACF,SAAS,EAAE,OAAO,CAAC,EACtC,CAACG,mBAAmB,CAACH,SAAS,EAAE,OAAO,CAAC,EACxC,CAACE,iBAAiB,CAACF,SAAS,EAAE,eAAe,CAAC,EAC9C,CAACI,iBAAiB,CAACJ,SAAS,EAAE,UAAU,CAAC,CAC5C;EACD,IAAIH,kBAAkB,IAAIA,kBAAkB,CAACH,GAAG,EAAE;IAC9CrE,QAAQ,CAACtD,IAAI,CAACsI,KAAK,CAAChF,QAAQ,EAAEzF,aAAa,CAAC,EAAE,EAAEF,MAAM,CAACuK,cAAc,CAAC9F,GAAG,CAAC,UAAUC,CAAC,EAAE;MACnF,OAAO/D,UAAU,CAAC+D,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAE;QAC1BsF,GAAG,EAAE,SAAAA,CAAA,EAAY;UACbjB,YAAY,CAAC;YAAEjH,MAAM,EAAE;UAAK,CAAC,CAAC;QAClC;MACJ,CAAC,CAAC;IACN,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EAChB;EACA,OAAO,YAAY;IACf6D,QAAQ,CAACC,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAClD,CAAC;AACL;AACA,SAAS+E,yBAAyBA,CAACC,IAAI,EAAE;EACrC,IAAI3G,SAAS,GAAG,EAAE;EAClB,SAAS4G,OAAOA,CAACC,SAAS,EAAEC,GAAG,EAAE;IAC7B,IAAK/J,0BAA0B,IAC3B8J,SAAS,CAACE,UAAU,YAAY/J,eAAe,IAC9CC,uBAAuB,IACpB4J,SAAS,CAACE,UAAU,YAAY7J,YAAa,IAChDC,0BAA0B,IACvB0J,SAAS,CAACE,UAAU,YAAY3J,eAAgB,IACnDC,2BAA2B,IACxBwJ,SAAS,CAACE,UAAU,YAAYzJ,gBAAiB,EAAE;MACvD,IAAI0J,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACL,SAAS,CAACE,UAAU,CAACI,QAAQ,CAAC;MACrD,IAAIC,KAAK,GAAGJ,KAAK,CAAC/B,OAAO,CAAC4B,SAAS,CAAC;MACpCC,GAAG,CAACO,OAAO,CAACD,KAAK,CAAC;IACtB,CAAC,MACI;MACD,IAAIJ,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACL,SAAS,CAACS,gBAAgB,CAACH,QAAQ,CAAC;MAC3D,IAAIC,KAAK,GAAGJ,KAAK,CAAC/B,OAAO,CAAC4B,SAAS,CAAC;MACpCC,GAAG,CAACO,OAAO,CAACD,KAAK,CAAC;IACtB;IACA,OAAON,GAAG;EACd;EACA,OAAOF,OAAO,CAACD,IAAI,EAAE3G,SAAS,CAAC;AACnC;AACA,SAASuH,sBAAsBA,CAAC1J,EAAE,EAAEI,EAAE,EAAE;EACpC,IAAIuJ,gBAAgB,GAAG3J,EAAE,CAAC2J,gBAAgB;IAAE7H,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;EAC9D,IAAI8H,GAAG,GAAGxJ,EAAE,CAACwJ,GAAG;EAChB,IAAIC,UAAU,GAAGD,GAAG,CAACE,aAAa,CAACvB,SAAS,CAACsB,UAAU;EACvDD,GAAG,CAACE,aAAa,CAACvB,SAAS,CAACsB,UAAU,GAAG,UAAUf,IAAI,EAAES,KAAK,EAAE;IAC5D,IAAInG,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAAC,IAAI,CAAC0G,SAAS,CAAC;IACrC,IAAI3G,EAAE,KAAK,CAAC,CAAC,EAAE;MACXuG,gBAAgB,CAAC;QACbvG,EAAE,EAAEA,EAAE;QACN4G,IAAI,EAAE,CAAC;UAAElB,IAAI,EAAEA,IAAI;UAAES,KAAK,EAAEA;QAAM,CAAC;MACvC,CAAC,CAAC;IACN;IACA,OAAOM,UAAU,CAACjB,KAAK,CAAC,IAAI,EAAEqB,SAAS,CAAC;EAC5C,CAAC;EACD,IAAIC,UAAU,GAAGN,GAAG,CAACE,aAAa,CAACvB,SAAS,CAAC2B,UAAU;EACvDN,GAAG,CAACE,aAAa,CAACvB,SAAS,CAAC2B,UAAU,GAAG,UAAUX,KAAK,EAAE;IACtD,IAAInG,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAAC,IAAI,CAAC0G,SAAS,CAAC;IACrC,IAAI3G,EAAE,KAAK,CAAC,CAAC,EAAE;MACXuG,gBAAgB,CAAC;QACbvG,EAAE,EAAEA,EAAE;QACN+G,OAAO,EAAE,CAAC;UAAEZ,KAAK,EAAEA;QAAM,CAAC;MAC9B,CAAC,CAAC;IACN;IACA,OAAOW,UAAU,CAACtB,KAAK,CAAC,IAAI,EAAEqB,SAAS,CAAC;EAC5C,CAAC;EACD,IAAIG,2BAA2B,GAAG,CAAC,CAAC;EACpC,IAAIlL,0BAA0B,EAAE;IAC5BkL,2BAA2B,CAACjL,eAAe,GAAGyK,GAAG,CAACzK,eAAe;EACrE,CAAC,MACI;IACD,IAAIC,uBAAuB,EAAE;MACzBgL,2BAA2B,CAAC/K,YAAY,GAAGuK,GAAG,CAACvK,YAAY;IAC/D;IACA,IAAIG,2BAA2B,EAAE;MAC7B4K,2BAA2B,CAAC3K,gBAAgB,GAAGmK,GAAG,CAACnK,gBAAgB;IACvE;IACA,IAAIH,0BAA0B,EAAE;MAC5B8K,2BAA2B,CAAC7K,eAAe,GAAGqK,GAAG,CAACrK,eAAe;IACrE;EACJ;EACA,IAAI8K,mBAAmB,GAAG,CAAC,CAAC;EAC5B5F,MAAM,CAAC6F,OAAO,CAACF,2BAA2B,CAAC,CAACvG,OAAO,CAAC,UAAU7D,EAAE,EAAE;IAC9D,IAAII,EAAE,GAAGnC,MAAM,CAAC+B,EAAE,EAAE,CAAC,CAAC;MAAEuK,OAAO,GAAGnK,EAAE,CAAC,CAAC,CAAC;MAAEoE,IAAI,GAAGpE,EAAE,CAAC,CAAC,CAAC;IACrDiK,mBAAmB,CAACE,OAAO,CAAC,GAAG;MAC3BV,UAAU,EAAErF,IAAI,CAAC+D,SAAS,CAACsB,UAAU;MACrCK,UAAU,EAAE1F,IAAI,CAAC+D,SAAS,CAAC2B;IAC/B,CAAC;IACD1F,IAAI,CAAC+D,SAAS,CAACsB,UAAU,GAAG,UAAUf,IAAI,EAAES,KAAK,EAAE;MAC/C,IAAInG,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAAC,IAAI,CAACoG,gBAAgB,CAACM,SAAS,CAAC;MACtD,IAAI3G,EAAE,KAAK,CAAC,CAAC,EAAE;QACXuG,gBAAgB,CAAC;UACbvG,EAAE,EAAEA,EAAE;UACN4G,IAAI,EAAE,CACF;YACIlB,IAAI,EAAEA,IAAI;YACVS,KAAK,EAAEpL,aAAa,CAACA,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC4K,yBAAyB,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,CACpFU,KAAK,IAAI,CAAC,CACb,EAAE,KAAK;UACZ,CAAC;QAET,CAAC,CAAC;MACN;MACA,OAAOc,mBAAmB,CAACE,OAAO,CAAC,CAACV,UAAU,CAACjB,KAAK,CAAC,IAAI,EAAEqB,SAAS,CAAC;IACzE,CAAC;IACDzF,IAAI,CAAC+D,SAAS,CAAC2B,UAAU,GAAG,UAAUX,KAAK,EAAE;MACzC,IAAInG,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAAC,IAAI,CAACoG,gBAAgB,CAACM,SAAS,CAAC;MACtD,IAAI3G,EAAE,KAAK,CAAC,CAAC,EAAE;QACXuG,gBAAgB,CAAC;UACbvG,EAAE,EAAEA,EAAE;UACN+G,OAAO,EAAE,CAAC;YAAEZ,KAAK,EAAEpL,aAAa,CAACA,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC4K,yBAAyB,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,CAACU,KAAK,CAAC,EAAE,KAAK;UAAE,CAAC;QACzH,CAAC,CAAC;MACN;MACA,OAAOc,mBAAmB,CAACE,OAAO,CAAC,CAACL,UAAU,CAACtB,KAAK,CAAC,IAAI,EAAEqB,SAAS,CAAC;IACzE,CAAC;EACL,CAAC,CAAC;EACF,OAAO,YAAY;IACfL,GAAG,CAACE,aAAa,CAACvB,SAAS,CAACsB,UAAU,GAAGA,UAAU;IACnDD,GAAG,CAACE,aAAa,CAACvB,SAAS,CAAC2B,UAAU,GAAGA,UAAU;IACnDzF,MAAM,CAAC6F,OAAO,CAACF,2BAA2B,CAAC,CAACvG,OAAO,CAAC,UAAU7D,EAAE,EAAE;MAC9D,IAAII,EAAE,GAAGnC,MAAM,CAAC+B,EAAE,EAAE,CAAC,CAAC;QAAEuK,OAAO,GAAGnK,EAAE,CAAC,CAAC,CAAC;QAAEoE,IAAI,GAAGpE,EAAE,CAAC,CAAC,CAAC;MACrDoE,IAAI,CAAC+D,SAAS,CAACsB,UAAU,GAAGQ,mBAAmB,CAACE,OAAO,CAAC,CAACV,UAAU;MACnErF,IAAI,CAAC+D,SAAS,CAAC2B,UAAU,GAAGG,mBAAmB,CAACE,OAAO,CAAC,CAACL,UAAU;IACvE,CAAC,CAAC;EACN,CAAC;AACL;AACA,SAASM,4BAA4BA,CAACxK,EAAE,EAAEI,EAAE,EAAE;EAC1C,IAAIqK,kBAAkB,GAAGzK,EAAE,CAACyK,kBAAkB;IAAE3I,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;EAClE,IAAI8H,GAAG,GAAGxJ,EAAE,CAACwJ,GAAG;EAChB,IAAIc,WAAW,GAAGd,GAAG,CAACe,mBAAmB,CAACpC,SAAS,CAACmC,WAAW;EAC/Dd,GAAG,CAACe,mBAAmB,CAACpC,SAAS,CAACmC,WAAW,GAAG,UAAUE,QAAQ,EAAEvE,KAAK,EAAEwE,QAAQ,EAAE;IACjF,IAAI7K,EAAE,EAAEI,EAAE;IACV,IAAIgD,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAAC,CAACjD,EAAE,GAAG,CAACJ,EAAE,GAAG,IAAI,CAACkJ,UAAU,MAAM,IAAI,IAAIlJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACyJ,gBAAgB,MAAM,IAAI,IAAIrJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC2J,SAAS,CAAC;IAC/J,IAAI3G,EAAE,KAAK,CAAC,CAAC,EAAE;MACXqH,kBAAkB,CAAC;QACfrH,EAAE,EAAEA,EAAE;QACN6E,GAAG,EAAE;UACD2C,QAAQ,EAAEA,QAAQ;UAClBvE,KAAK,EAAEA,KAAK;UACZwE,QAAQ,EAAEA;QACd,CAAC;QACDtB,KAAK,EAAEV,yBAAyB,CAAC,IAAI,CAACK,UAAU;MACpD,CAAC,CAAC;IACN;IACA,OAAOwB,WAAW,CAAC9B,KAAK,CAAC,IAAI,EAAEqB,SAAS,CAAC;EAC7C,CAAC;EACD,IAAIa,cAAc,GAAGlB,GAAG,CAACe,mBAAmB,CAACpC,SAAS,CAACuC,cAAc;EACrElB,GAAG,CAACe,mBAAmB,CAACpC,SAAS,CAACuC,cAAc,GAAG,UAAUF,QAAQ,EAAE;IACnE,IAAI5K,EAAE,EAAEI,EAAE;IACV,IAAIgD,EAAE,GAAGtB,MAAM,CAACuB,KAAK,CAAC,CAACjD,EAAE,GAAG,CAACJ,EAAE,GAAG,IAAI,CAACkJ,UAAU,MAAM,IAAI,IAAIlJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACyJ,gBAAgB,MAAM,IAAI,IAAIrJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC2J,SAAS,CAAC;IAC/J,IAAI3G,EAAE,KAAK,CAAC,CAAC,EAAE;MACXqH,kBAAkB,CAAC;QACfrH,EAAE,EAAEA,EAAE;QACN2H,MAAM,EAAE;UACJH,QAAQ,EAAEA;QACd,CAAC;QACDrB,KAAK,EAAEV,yBAAyB,CAAC,IAAI,CAACK,UAAU;MACpD,CAAC,CAAC;IACN;IACA,OAAO4B,cAAc,CAAClC,KAAK,CAAC,IAAI,EAAEqB,SAAS,CAAC;EAChD,CAAC;EACD,OAAO,YAAY;IACfL,GAAG,CAACe,mBAAmB,CAACpC,SAAS,CAACmC,WAAW,GAAGA,WAAW;IAC3Dd,GAAG,CAACe,mBAAmB,CAACpC,SAAS,CAACuC,cAAc,GAAGA,cAAc;EACrE,CAAC;AACL;AACA,SAASE,4BAA4BA,CAAChL,EAAE,EAAE;EACtC,IAAIiL,kBAAkB,GAAGjL,EAAE,CAACiL,kBAAkB;IAAEhH,UAAU,GAAGjE,EAAE,CAACiE,UAAU;IAAEnC,MAAM,GAAG9B,EAAE,CAAC8B,MAAM;IAAEF,QAAQ,GAAG5B,EAAE,CAAC4B,QAAQ;EACtH,IAAIsD,OAAO,GAAG,SAAAA,CAAUV,IAAI,EAAE;IAC1B,OAAOjG,QAAQ,CAAC,UAAUoB,KAAK,EAAE;MAC7B,IAAII,MAAM,GAAGL,cAAc,CAACC,KAAK,CAAC;MAClC,IAAI,CAACI,MAAM,IAAItB,SAAS,CAACsB,MAAM,EAAEkE,UAAU,CAAC,EAAE;QAC1C;MACJ;MACA,IAAIjE,EAAE,GAAGD,MAAM;QAAEmL,WAAW,GAAGlL,EAAE,CAACkL,WAAW;QAAEC,MAAM,GAAGnL,EAAE,CAACmL,MAAM;QAAEC,KAAK,GAAGpL,EAAE,CAACoL,KAAK;MACnFH,kBAAkB,CAAC;QACfzG,IAAI,EAAEA,IAAI;QACVpB,EAAE,EAAEtB,MAAM,CAACuB,KAAK,CAACtD,MAAM,CAAC;QACxBmL,WAAW,EAAEA,WAAW;QACxBC,MAAM,EAAEA,MAAM;QACdC,KAAK,EAAEA;MACX,CAAC,CAAC;IACN,CAAC,EAAExJ,QAAQ,CAACyJ,KAAK,IAAI,GAAG,CAAC;EAC7B,CAAC;EACD,IAAIzH,QAAQ,GAAG,CACXtF,EAAE,CAAC,MAAM,EAAE4G,OAAO,CAAC,CAAC,CAAC,CAAC,EACtB5G,EAAE,CAAC,OAAO,EAAE4G,OAAO,CAAC,CAAC,CAAC,CAAC,EACvB5G,EAAE,CAAC,QAAQ,EAAE4G,OAAO,CAAC,CAAC,CAAC,CAAC,EACxB5G,EAAE,CAAC,cAAc,EAAE4G,OAAO,CAAC,CAAC,CAAC,CAAC,CACjC;EACD,OAAO,YAAY;IACftB,QAAQ,CAACC,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAClD,CAAC;AACL;AACA,SAASwH,gBAAgBA,CAACtL,EAAE,EAAE;EAC1B,IAAIuL,MAAM,GAAGvL,EAAE,CAACuL,MAAM;IAAE1J,GAAG,GAAG7B,EAAE,CAAC6B,GAAG;EACpC,IAAI+H,GAAG,GAAG/H,GAAG,CAAC2J,WAAW;EACzB,IAAI,CAAC5B,GAAG,EAAE;IACN,OAAO,YAAY,CAAE,CAAC;EAC1B;EACA,IAAIhG,QAAQ,GAAG,EAAE;EACjB,IAAI6H,OAAO,GAAG,IAAIhF,OAAO,CAAC,CAAC;EAC3B,IAAIiF,gBAAgB,GAAG9B,GAAG,CAAC+B,QAAQ;EACnC/B,GAAG,CAAC+B,QAAQ,GAAG,SAASA,QAAQA,CAACC,MAAM,EAAEtJ,MAAM,EAAEuJ,WAAW,EAAE;IAC1D,IAAIC,QAAQ,GAAG,IAAIJ,gBAAgB,CAACE,MAAM,EAAEtJ,MAAM,EAAEuJ,WAAW,CAAC;IAChEJ,OAAO,CAACxD,GAAG,CAAC6D,QAAQ,EAAE;MAClBF,MAAM,EAAEA,MAAM;MACdG,MAAM,EAAE,OAAOzJ,MAAM,KAAK,QAAQ;MAClCuJ,WAAW,EAAEA,WAAW;MACxBG,UAAU,EAAE,OAAO1J,MAAM,KAAK,QAAQ,GAChCA,MAAM,GAEJ2J,IAAI,CAACC,SAAS,CAAC9C,KAAK,CAACC,IAAI,CAAC,IAAI8C,UAAU,CAAC7J,MAAM,CAAC,CAAC;IAC7D,CAAC,CAAC;IACF,OAAOwJ,QAAQ;EACnB,CAAC;EACD,IAAIM,cAAc,GAAGvN,KAAK,CAACgD,GAAG,CAACwK,KAAK,EAAE,KAAK,EAAE,UAAUC,QAAQ,EAAE;IAC7D,OAAO,UAAUR,QAAQ,EAAE;MACvBS,UAAU,CAAC,YAAY;QACnB,IAAI5J,CAAC,GAAG8I,OAAO,CAACzD,GAAG,CAAC8D,QAAQ,CAAC;QAC7B,IAAInJ,CAAC,EAAE;UACH4I,MAAM,CAAC5I,CAAC,CAAC;UACT8I,OAAO,CAACe,MAAM,CAACV,QAAQ,CAAC;QAC5B;MACJ,CAAC,EAAE,CAAC,CAAC;MACL,OAAOQ,QAAQ,CAAC1D,KAAK,CAAC,IAAI,EAAE,CAACkD,QAAQ,CAAC,CAAC;IAC3C,CAAC;EACL,CAAC,CAAC;EACFlI,QAAQ,CAACtD,IAAI,CAAC,YAAY;IACtBsJ,GAAG,CAAC+B,QAAQ,GAAGD,gBAAgB;EACnC,CAAC,CAAC;EACF9H,QAAQ,CAACtD,IAAI,CAAC8L,cAAc,CAAC;EAC7B,OAAO,YAAY;IACfxI,QAAQ,CAACC,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAClD,CAAC;AACL;AACA,SAAS2I,UAAUA,CAACC,CAAC,EAAEC,KAAK,EAAE;EAC1B,IAAIC,UAAU,GAAGF,CAAC,CAACE,UAAU;IAAEjL,WAAW,GAAG+K,CAAC,CAAC/K,WAAW;IAAEqC,kBAAkB,GAAG0I,CAAC,CAAC1I,kBAAkB;IAAEoB,QAAQ,GAAGsH,CAAC,CAACtH,QAAQ;IAAEQ,gBAAgB,GAAG8G,CAAC,CAAC9G,gBAAgB;IAAEe,OAAO,GAAG+F,CAAC,CAAC/F,OAAO;IAAEsE,kBAAkB,GAAGyB,CAAC,CAACzB,kBAAkB;IAAEtB,gBAAgB,GAAG+C,CAAC,CAAC/C,gBAAgB;IAAEc,kBAAkB,GAAGiC,CAAC,CAACjC,kBAAkB;IAAEoC,gBAAgB,GAAGH,CAAC,CAACG,gBAAgB;IAAEtB,MAAM,GAAGmB,CAAC,CAACnB,MAAM;EAC/WmB,CAAC,CAACE,UAAU,GAAG,YAAY;IACvB,IAAIjK,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACI,QAAQ,EAAE;MAChBJ,KAAK,CAACI,QAAQ,CAACnE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IACpE;IACAiK,UAAU,CAAChE,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACjE,CAAC;EACD+J,CAAC,CAAC/K,WAAW,GAAG,YAAY;IACxB,IAAIgB,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAAC5K,SAAS,EAAE;MACjB4K,KAAK,CAAC5K,SAAS,CAAC6G,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IACrE;IACAhB,WAAW,CAACiH,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EAClE,CAAC;EACD+J,CAAC,CAAC1I,kBAAkB,GAAG,YAAY;IAC/B,IAAIrB,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACzI,gBAAgB,EAAE;MACxByI,KAAK,CAACzI,gBAAgB,CAAC0E,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC5E;IACAqB,kBAAkB,CAAC4E,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACzE,CAAC;EACD+J,CAAC,CAACtH,QAAQ,GAAG,YAAY;IACrB,IAAIzC,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACjH,MAAM,EAAE;MACdiH,KAAK,CAACjH,MAAM,CAACkD,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAClE;IACAyC,QAAQ,CAACwD,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EAC/D,CAAC;EACD+J,CAAC,CAAC9G,gBAAgB,GAAG,YAAY;IAC7B,IAAIjD,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACK,cAAc,EAAE;MACtBL,KAAK,CAACK,cAAc,CAACpE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC1E;IACAiD,gBAAgB,CAACgD,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACvE,CAAC;EACD+J,CAAC,CAAC/F,OAAO,GAAG,YAAY;IACpB,IAAIhE,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACxE,KAAK,EAAE;MACbwE,KAAK,CAACxE,KAAK,CAACS,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IACjE;IACAgE,OAAO,CAACiC,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EAC9D,CAAC;EACD+J,CAAC,CAACzB,kBAAkB,GAAG,YAAY;IAC/B,IAAItI,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACM,eAAe,EAAE;MACvBN,KAAK,CAACM,eAAe,CAACrE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC3E;IACAsI,kBAAkB,CAACrC,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACzE,CAAC;EACD+J,CAAC,CAAC/C,gBAAgB,GAAG,YAAY;IAC7B,IAAIhH,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACO,cAAc,EAAE;MACtBP,KAAK,CAACO,cAAc,CAACtE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC1E;IACAgH,gBAAgB,CAACf,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACvE,CAAC;EACD+J,CAAC,CAACjC,kBAAkB,GAAG,YAAY;IAC/B,IAAI9H,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACQ,gBAAgB,EAAE;MACxBR,KAAK,CAACQ,gBAAgB,CAACvE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC5E;IACA8H,kBAAkB,CAAC7B,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACzE,CAAC;EACD+J,CAAC,CAACG,gBAAgB,GAAG,YAAY;IAC7B,IAAIlK,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACS,cAAc,EAAE;MACtBT,KAAK,CAACS,cAAc,CAACxE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC1E;IACAkK,gBAAgB,CAACjE,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EACvE,CAAC;EACD+J,CAAC,CAACnB,MAAM,GAAG,YAAY;IACnB,IAAI5I,CAAC,GAAG,EAAE;IACV,KAAK,IAAImK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG7C,SAAS,CAACnK,MAAM,EAAEgN,EAAE,EAAE,EAAE;MAC1CnK,CAAC,CAACmK,EAAE,CAAC,GAAG7C,SAAS,CAAC6C,EAAE,CAAC;IACzB;IACA,IAAIH,KAAK,CAACU,IAAI,EAAE;MACZV,KAAK,CAACU,IAAI,CAACzE,KAAK,CAAC+D,KAAK,EAAExO,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAChE;IACA4I,MAAM,CAAC3C,KAAK,CAAC,KAAK,CAAC,EAAEzK,aAAa,CAAC,EAAE,EAAEF,MAAM,CAAC0E,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;EAC7D,CAAC;AACL;AACA,SAAS2K,aAAaA,CAACZ,CAAC,EAAEC,KAAK,EAAE;EAC7B,IAAIY,GAAG,EAAEvN,EAAE;EACX,IAAI2M,KAAK,KAAK,KAAK,CAAC,EAAE;IAAEA,KAAK,GAAG,CAAC,CAAC;EAAE;EACpC,IAAIa,aAAa,GAAGd,CAAC,CAAC7K,GAAG,CAAC2J,WAAW;EACrC,IAAI,CAACgC,aAAa,EAAE;IAChB,OAAO,YAAY,CAAE,CAAC;EAC1B;EACAf,UAAU,CAACC,CAAC,EAAEC,KAAK,CAAC;EACpB,IAAIc,gBAAgB,GAAGxN,oBAAoB,CAACyM,CAAC,EAAEA,CAAC,CAAC7K,GAAG,CAAC;EACrD,IAAI6L,gBAAgB,GAAGhM,gBAAgB,CAACgL,CAAC,CAAC;EAC1C,IAAIiB,uBAAuB,GAAG5J,4BAA4B,CAAC2I,CAAC,CAAC;EAC7D,IAAIkB,aAAa,GAAGzI,kBAAkB,CAACuH,CAAC,CAAC;EACzC,IAAImB,qBAAqB,GAAGlI,0BAA0B,CAAC+G,CAAC,CAAC;EACzD,IAAIoB,YAAY,GAAGpH,iBAAiB,CAACgG,CAAC,CAAC;EACvC,IAAIqB,uBAAuB,GAAG/C,4BAA4B,CAAC0B,CAAC,CAAC;EAC7D,IAAIsB,kBAAkB,GAAGtE,sBAAsB,CAACgD,CAAC,EAAE;IAAE9C,GAAG,EAAE4D;EAAc,CAAC,CAAC;EAC1E,IAAIS,wBAAwB,GAAGzD,4BAA4B,CAACkC,CAAC,EAAE;IAC3D9C,GAAG,EAAE4D;EACT,CAAC,CAAC;EACF,IAAIU,YAAY,GAAGxB,CAAC,CAACyB,YAAY,GAAG7C,gBAAgB,CAACoB,CAAC,CAAC,GAAG,YAAY,CAAE,CAAC;EACzE,IAAI0B,cAAc,GAAG,EAAE;EACvB,IAAI;IACA,KAAK,IAAIhO,EAAE,GAAGlC,QAAQ,CAACwO,CAAC,CAAC2B,OAAO,CAAC,EAAEC,EAAE,GAAGlO,EAAE,CAACmO,IAAI,CAAC,CAAC,EAAE,CAACD,EAAE,CAACE,IAAI,EAAEF,EAAE,GAAGlO,EAAE,CAACmO,IAAI,CAAC,CAAC,EAAE;MACzE,IAAIE,MAAM,GAAGH,EAAE,CAACjI,KAAK;MACrB+H,cAAc,CAAC9N,IAAI,CAACmO,MAAM,CAACzN,QAAQ,CAACyN,MAAM,CAACC,QAAQ,EAAElB,aAAa,EAAEiB,MAAM,CAACvO,OAAO,CAAC,CAAC;IACxF;EACJ,CAAC,CACD,OAAOyO,KAAK,EAAE;IAAEpB,GAAG,GAAG;MAAEqB,KAAK,EAAED;IAAM,CAAC;EAAE,CAAC,SACjC;IACJ,IAAI;MACA,IAAIL,EAAE,IAAI,CAACA,EAAE,CAACE,IAAI,KAAKxO,EAAE,GAAGI,EAAE,CAACyO,MAAM,CAAC,EAAE7O,EAAE,CAACe,IAAI,CAACX,EAAE,CAAC;IACvD,CAAC,SACO;MAAE,IAAImN,GAAG,EAAE,MAAMA,GAAG,CAACqB,KAAK;IAAE;EACxC;EACA,OAAO,YAAY;IACf3P,eAAe,CAAC4E,OAAO,CAAC,UAAUiL,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACC,KAAK,CAAC,CAAC;IAAE,CAAC,CAAC;IAC3DtB,gBAAgB,CAACuB,UAAU,CAAC,CAAC;IAC7BtB,gBAAgB,CAAC,CAAC;IAClBC,uBAAuB,CAAC,CAAC;IACzBC,aAAa,CAAC,CAAC;IACfC,qBAAqB,CAAC,CAAC;IACvBC,YAAY,CAAC,CAAC;IACdC,uBAAuB,CAAC,CAAC;IACzBC,kBAAkB,CAAC,CAAC;IACpBC,wBAAwB,CAAC,CAAC;IAC1BC,YAAY,CAAC,CAAC;IACdE,cAAc,CAACvK,OAAO,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EACxD,CAAC;AACL;AAEA,SAASyC,UAAU,EAAEtG,oBAAoB,EAAEqN,aAAa,EAAEnI,kBAAkB,EAAElG,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}