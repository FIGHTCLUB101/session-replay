{"ast":null,"code":"import { __spreadArray, __read, __values } from '../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\nfunction patchGLPrototype(prototype, type, cb, blockClass, mirror, win) {\n  var e_1, _a;\n  var handlers = [];\n  var props = Object.getOwnPropertyNames(prototype);\n  var _loop_1 = function (prop) {\n    try {\n      if (typeof prototype[prop] !== 'function') {\n        return \"continue\";\n      }\n      var restoreHandler = patch(prototype, prop, function (original) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var result = original.apply(this, args);\n          saveWebGLVar(result, win, prototype);\n          if (!isBlocked(this.canvas, blockClass)) {\n            var id = mirror.getId(this.canvas);\n            var recordArgs = serializeArgs(__spreadArray([], __read(args), false), win, prototype);\n            var mutation = {\n              type: type,\n              property: prop,\n              args: recordArgs\n            };\n            cb(this.canvas, mutation);\n          }\n          return result;\n        };\n      });\n      handlers.push(restoreHandler);\n    } catch (_b) {\n      var hookHandler = hookSetter(prototype, prop, {\n        set: function (v) {\n          cb(this.canvas, {\n            type: type,\n            property: prop,\n            args: [v],\n            setter: true\n          });\n        }\n      });\n      handlers.push(hookHandler);\n    }\n  };\n  try {\n    for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n      var prop = props_1_1.value;\n      _loop_1(prop);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return handlers;\n}\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, mirror) {\n  var handlers = [];\n  handlers.push.apply(handlers, __spreadArray([], __read(patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, mirror, win)), false));\n  if (typeof win.WebGL2RenderingContext !== 'undefined') {\n    handlers.push.apply(handlers, __spreadArray([], __read(patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, mirror, win)), false));\n  }\n  return function () {\n    handlers.forEach(function (h) {\n      return h();\n    });\n  };\n}\nexport default initCanvasWebGLMutationObserver;","map":{"version":3,"names":["__spreadArray","__read","__values","CanvasContext","patch","isBlocked","hookSetter","saveWebGLVar","serializeArgs","patchGLPrototype","prototype","type","cb","blockClass","mirror","win","e_1","_a","handlers","props","Object","getOwnPropertyNames","_loop_1","prop","restoreHandler","original","args","_i","arguments","length","result","apply","canvas","id","getId","recordArgs","mutation","property","push","_b","hookHandler","set","v","setter","props_1","props_1_1","next","done","value","e_1_1","error","return","call","initCanvasWebGLMutationObserver","WebGLRenderingContext","WebGL","WebGL2RenderingContext","WebGL2","forEach","h"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/webgl.js"],"sourcesContent":["import { __spreadArray, __read, __values } from '../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\n\nfunction patchGLPrototype(prototype, type, cb, blockClass, mirror, win) {\n    var e_1, _a;\n    var handlers = [];\n    var props = Object.getOwnPropertyNames(prototype);\n    var _loop_1 = function (prop) {\n        try {\n            if (typeof prototype[prop] !== 'function') {\n                return \"continue\";\n            }\n            var restoreHandler = patch(prototype, prop, function (original) {\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var result = original.apply(this, args);\n                    saveWebGLVar(result, win, prototype);\n                    if (!isBlocked(this.canvas, blockClass)) {\n                        var id = mirror.getId(this.canvas);\n                        var recordArgs = serializeArgs(__spreadArray([], __read(args), false), win, prototype);\n                        var mutation = {\n                            type: type,\n                            property: prop,\n                            args: recordArgs,\n                        };\n                        cb(this.canvas, mutation);\n                    }\n                    return result;\n                };\n            });\n            handlers.push(restoreHandler);\n        }\n        catch (_b) {\n            var hookHandler = hookSetter(prototype, prop, {\n                set: function (v) {\n                    cb(this.canvas, {\n                        type: type,\n                        property: prop,\n                        args: [v],\n                        setter: true,\n                    });\n                },\n            });\n            handlers.push(hookHandler);\n        }\n    };\n    try {\n        for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n            var prop = props_1_1.value;\n            _loop_1(prop);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return handlers;\n}\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, mirror) {\n    var handlers = [];\n    handlers.push.apply(handlers, __spreadArray([], __read(patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, mirror, win)), false));\n    if (typeof win.WebGL2RenderingContext !== 'undefined') {\n        handlers.push.apply(handlers, __spreadArray([], __read(patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, mirror, win)), false));\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\n\nexport default initCanvasWebGLMutationObserver;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}