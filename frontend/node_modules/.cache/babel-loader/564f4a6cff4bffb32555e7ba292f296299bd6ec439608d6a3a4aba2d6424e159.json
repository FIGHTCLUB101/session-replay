{"ast":null,"code":"import { __values } from '../../ext/tslib/tslib.es6.js';\nimport { isShadowRoot, maskInputValue, transformAttribute, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isAncestorRemoved, isIframeINode, hasShadowRoot } from '../utils.js';\nfunction isNodeInLinkedList(n) {\n  return '__ln' in n;\n}\nvar DoubleLinkedList = function () {\n  function DoubleLinkedList() {\n    this.length = 0;\n    this.head = null;\n  }\n  DoubleLinkedList.prototype.get = function (position) {\n    if (position >= this.length) {\n      throw new Error('Position outside of list range');\n    }\n    var current = this.head;\n    for (var index = 0; index < position; index++) {\n      current = (current === null || current === void 0 ? void 0 : current.next) || null;\n    }\n    return current;\n  };\n  DoubleLinkedList.prototype.addNode = function (n) {\n    var node = {\n      value: n,\n      previous: null,\n      next: null\n    };\n    n.__ln = node;\n    if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\n      var current = n.previousSibling.__ln.next;\n      node.next = current;\n      node.previous = n.previousSibling.__ln;\n      n.previousSibling.__ln.next = node;\n      if (current) {\n        current.previous = node;\n      }\n    } else if (n.nextSibling && isNodeInLinkedList(n.nextSibling) && n.nextSibling.__ln.previous) {\n      var current = n.nextSibling.__ln.previous;\n      node.previous = current;\n      node.next = n.nextSibling.__ln;\n      n.nextSibling.__ln.previous = node;\n      if (current) {\n        current.next = node;\n      }\n    } else {\n      if (this.head) {\n        this.head.previous = node;\n      }\n      node.next = this.head;\n      this.head = node;\n    }\n    this.length++;\n  };\n  DoubleLinkedList.prototype.removeNode = function (n) {\n    var current = n.__ln;\n    if (!this.head) {\n      return;\n    }\n    if (!current.previous) {\n      this.head = current.next;\n      if (this.head) {\n        this.head.previous = null;\n      }\n    } else {\n      current.previous.next = current.next;\n      if (current.next) {\n        current.next.previous = current.previous;\n      }\n    }\n    if (n.__ln) {\n      delete n.__ln;\n    }\n    this.length--;\n  };\n  return DoubleLinkedList;\n}();\nvar moveKey = function (id, parentId) {\n  return \"\".concat(id, \"@\").concat(parentId);\n};\nfunction isINode(n) {\n  return '__sn' in n;\n}\nvar MutationBuffer = function () {\n  function MutationBuffer() {\n    var _this = this;\n    this.frozen = false;\n    this.locked = false;\n    this.texts = [];\n    this.attributes = [];\n    this.removes = [];\n    this.mapRemoves = [];\n    this.movedMap = {};\n    this.addedSet = new Set();\n    this.movedSet = new Set();\n    this.droppedSet = new Set();\n    this.processMutations = function (mutations) {\n      mutations.forEach(_this.processMutation);\n      _this.emit();\n    };\n    this.emit = function () {\n      var e_1, _a, e_2, _b;\n      if (_this.frozen || _this.locked) {\n        return;\n      }\n      var adds = [];\n      var addList = new DoubleLinkedList();\n      var getNextId = function (n) {\n        var ns = n;\n        var nextId = IGNORED_NODE;\n        while (nextId === IGNORED_NODE) {\n          ns = ns && ns.nextSibling;\n          nextId = ns && _this.mirror.getId(ns);\n        }\n        return nextId;\n      };\n      var pushAdd = function (n) {\n        var _a, _b, _c, _d, _e;\n        var shadowHost = n.getRootNode ? (_a = n.getRootNode()) === null || _a === void 0 ? void 0 : _a.host : null;\n        var rootShadowHost = shadowHost;\n        while ((_c = (_b = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _b === void 0 ? void 0 : _b.call(rootShadowHost)) === null || _c === void 0 ? void 0 : _c.host) rootShadowHost = ((_e = (_d = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _d === void 0 ? void 0 : _d.call(rootShadowHost)) === null || _e === void 0 ? void 0 : _e.host) || null;\n        var notInDoc = !_this.doc.contains(n) && (rootShadowHost === null || !_this.doc.contains(rootShadowHost));\n        if (!n.parentNode || notInDoc) {\n          return;\n        }\n        var parentId = isShadowRoot(n.parentNode) ? _this.mirror.getId(shadowHost) : _this.mirror.getId(n.parentNode);\n        var nextId = getNextId(n);\n        if (parentId === -1 || nextId === -1) {\n          return addList.addNode(n);\n        }\n        var sn = serializeNodeWithId(n, {\n          doc: _this.doc,\n          map: _this.mirror.map,\n          blockClass: _this.blockClass,\n          blockSelector: _this.blockSelector,\n          maskTextClass: _this.maskTextClass,\n          maskTextSelector: _this.maskTextSelector,\n          skipChild: true,\n          inlineStylesheet: _this.inlineStylesheet,\n          maskInputOptions: _this.maskInputOptions,\n          maskTextFn: _this.maskTextFn,\n          maskInputFn: _this.maskInputFn,\n          slimDOMOptions: _this.slimDOMOptions,\n          recordCanvas: _this.recordCanvas,\n          inlineImages: _this.inlineImages,\n          onSerialize: function (currentN) {\n            if (isIframeINode(currentN)) {\n              _this.iframeManager.addIframe(currentN);\n            }\n            if (hasShadowRoot(n)) {\n              _this.shadowDomManager.addShadowRoot(n.shadowRoot, document);\n            }\n          },\n          onIframeLoad: function (iframe, childSn) {\n            _this.iframeManager.attachIframe(iframe, childSn);\n            _this.shadowDomManager.observeAttachShadow(iframe);\n          }\n        });\n        if (sn) {\n          adds.push({\n            parentId: parentId,\n            nextId: nextId,\n            node: sn\n          });\n        }\n      };\n      while (_this.mapRemoves.length) {\n        _this.mirror.removeNodeFromMap(_this.mapRemoves.shift());\n      }\n      try {\n        for (var _c = __values(_this.movedSet), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var n = _d.value;\n          if (isParentRemoved(_this.removes, n, _this.mirror) && !_this.movedSet.has(n.parentNode)) {\n            continue;\n          }\n          pushAdd(n);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      try {\n        for (var _e = __values(_this.addedSet), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var n = _f.value;\n          if (!isAncestorInSet(_this.droppedSet, n) && !isParentRemoved(_this.removes, n, _this.mirror)) {\n            pushAdd(n);\n          } else if (isAncestorInSet(_this.movedSet, n)) {\n            pushAdd(n);\n          } else {\n            _this.droppedSet.add(n);\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n      var candidate = null;\n      while (addList.length) {\n        var node = null;\n        if (candidate) {\n          var parentId = _this.mirror.getId(candidate.value.parentNode);\n          var nextId = getNextId(candidate.value);\n          if (parentId !== -1 && nextId !== -1) {\n            node = candidate;\n          }\n        }\n        if (!node) {\n          for (var index = addList.length - 1; index >= 0; index--) {\n            var _node = addList.get(index);\n            if (_node) {\n              var parentId = _this.mirror.getId(_node.value.parentNode);\n              var nextId = getNextId(_node.value);\n              if (parentId !== -1 && nextId !== -1) {\n                node = _node;\n                break;\n              }\n            }\n          }\n        }\n        if (!node) {\n          while (addList.head) {\n            addList.removeNode(addList.head.value);\n          }\n          break;\n        }\n        candidate = node.previous;\n        addList.removeNode(node.value);\n        pushAdd(node.value);\n      }\n      var payload = {\n        texts: _this.texts.map(function (text) {\n          return {\n            id: _this.mirror.getId(text.node),\n            value: text.value\n          };\n        }).filter(function (text) {\n          return _this.mirror.has(text.id);\n        }),\n        attributes: _this.attributes.map(function (attribute) {\n          return {\n            id: _this.mirror.getId(attribute.node),\n            attributes: attribute.attributes\n          };\n        }).filter(function (attribute) {\n          return _this.mirror.has(attribute.id);\n        }),\n        removes: _this.removes,\n        adds: adds\n      };\n      if (!payload.texts.length && !payload.attributes.length && !payload.removes.length && !payload.adds.length) {\n        return;\n      }\n      _this.texts = [];\n      _this.attributes = [];\n      _this.removes = [];\n      _this.addedSet = new Set();\n      _this.movedSet = new Set();\n      _this.droppedSet = new Set();\n      _this.movedMap = {};\n      _this.mutationCb(payload);\n    };\n    this.processMutation = function (m) {\n      var e_3, _a, e_4, _b;\n      if (isIgnored(m.target)) {\n        return;\n      }\n      switch (m.type) {\n        case 'characterData':\n          {\n            var value = m.target.textContent;\n            if (!isBlocked(m.target, _this.blockClass) && value !== m.oldValue) {\n              _this.texts.push({\n                value: needMaskingText(m.target, _this.maskTextClass, _this.maskTextSelector) && value ? _this.maskTextFn ? _this.maskTextFn(value) : value.replace(/[\\S]/g, '*') : value,\n                node: m.target\n              });\n            }\n            break;\n          }\n        case 'attributes':\n          {\n            var target = m.target;\n            var value = m.target.getAttribute(m.attributeName);\n            if (m.attributeName === 'value') {\n              value = maskInputValue({\n                maskInputOptions: _this.maskInputOptions,\n                tagName: m.target.tagName,\n                type: m.target.getAttribute('type'),\n                value: value,\n                maskInputFn: _this.maskInputFn\n              });\n            }\n            if (isBlocked(m.target, _this.blockClass) || value === m.oldValue) {\n              return;\n            }\n            var item = _this.attributes.find(function (a) {\n              return a.node === m.target;\n            });\n            if (!item) {\n              item = {\n                node: m.target,\n                attributes: {}\n              };\n              _this.attributes.push(item);\n            }\n            if (m.attributeName === 'style') {\n              var old = _this.doc.createElement('span');\n              if (m.oldValue) {\n                old.setAttribute('style', m.oldValue);\n              }\n              if (item.attributes.style === undefined || item.attributes.style === null) {\n                item.attributes.style = {};\n              }\n              var styleObj = item.attributes.style;\n              try {\n                for (var _c = __values(Array.from(target.style)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                  var pname = _d.value;\n                  var newValue = target.style.getPropertyValue(pname);\n                  var newPriority = target.style.getPropertyPriority(pname);\n                  if (newValue !== old.style.getPropertyValue(pname) || newPriority !== old.style.getPropertyPriority(pname)) {\n                    if (newPriority === '') {\n                      styleObj[pname] = newValue;\n                    } else {\n                      styleObj[pname] = [newValue, newPriority];\n                    }\n                  }\n                }\n              } catch (e_3_1) {\n                e_3 = {\n                  error: e_3_1\n                };\n              } finally {\n                try {\n                  if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                } finally {\n                  if (e_3) throw e_3.error;\n                }\n              }\n              try {\n                for (var _e = __values(Array.from(old.style)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var pname = _f.value;\n                  if (target.style.getPropertyValue(pname) === '') {\n                    styleObj[pname] = false;\n                  }\n                }\n              } catch (e_4_1) {\n                e_4 = {\n                  error: e_4_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_4) throw e_4.error;\n                }\n              }\n            } else {\n              item.attributes[m.attributeName] = transformAttribute(_this.doc, m.target.tagName, m.attributeName, value);\n            }\n            break;\n          }\n        case 'childList':\n          {\n            m.addedNodes.forEach(function (n) {\n              return _this.genAdds(n, m.target);\n            });\n            m.removedNodes.forEach(function (n) {\n              var nodeId = _this.mirror.getId(n);\n              var parentId = isShadowRoot(m.target) ? _this.mirror.getId(m.target.host) : _this.mirror.getId(m.target);\n              if (isBlocked(m.target, _this.blockClass) || isIgnored(n)) {\n                return;\n              }\n              if (_this.addedSet.has(n)) {\n                deepDelete(_this.addedSet, n);\n                _this.droppedSet.add(n);\n              } else if (_this.addedSet.has(m.target) && nodeId === -1) ;else if (isAncestorRemoved(m.target, _this.mirror)) ;else if (_this.movedSet.has(n) && _this.movedMap[moveKey(nodeId, parentId)]) {\n                deepDelete(_this.movedSet, n);\n              } else {\n                _this.removes.push({\n                  parentId: parentId,\n                  id: nodeId,\n                  isShadow: isShadowRoot(m.target) ? true : undefined\n                });\n              }\n              _this.mapRemoves.push(n);\n            });\n            break;\n          }\n      }\n    };\n    this.genAdds = function (n, target) {\n      if (target && isBlocked(target, _this.blockClass)) {\n        return;\n      }\n      if (isINode(n)) {\n        if (isIgnored(n)) {\n          return;\n        }\n        _this.movedSet.add(n);\n        var targetId = null;\n        if (target && isINode(target)) {\n          targetId = target.__sn.id;\n        }\n        if (targetId) {\n          _this.movedMap[moveKey(n.__sn.id, targetId)] = true;\n        }\n      } else {\n        _this.addedSet.add(n);\n        _this.droppedSet.delete(n);\n      }\n      if (!isBlocked(n, _this.blockClass)) n.childNodes.forEach(function (childN) {\n        return _this.genAdds(childN);\n      });\n    };\n  }\n  MutationBuffer.prototype.init = function (options) {\n    var _this = this;\n    ['mutationCb', 'blockClass', 'blockSelector', 'maskTextClass', 'maskTextSelector', 'inlineStylesheet', 'maskInputOptions', 'maskTextFn', 'maskInputFn', 'recordCanvas', 'inlineImages', 'slimDOMOptions', 'doc', 'mirror', 'iframeManager', 'shadowDomManager', 'canvasManager'].forEach(function (key) {\n      _this[key] = options[key];\n    });\n  };\n  MutationBuffer.prototype.freeze = function () {\n    this.frozen = true;\n    this.canvasManager.freeze();\n  };\n  MutationBuffer.prototype.unfreeze = function () {\n    this.frozen = false;\n    this.canvasManager.unfreeze();\n    this.emit();\n  };\n  MutationBuffer.prototype.isFrozen = function () {\n    return this.frozen;\n  };\n  MutationBuffer.prototype.lock = function () {\n    this.locked = true;\n    this.canvasManager.lock();\n  };\n  MutationBuffer.prototype.unlock = function () {\n    this.locked = false;\n    this.canvasManager.unlock();\n    this.emit();\n  };\n  MutationBuffer.prototype.reset = function () {\n    this.shadowDomManager.reset();\n    this.canvasManager.reset();\n  };\n  return MutationBuffer;\n}();\nfunction deepDelete(addsSet, n) {\n  addsSet.delete(n);\n  n.childNodes.forEach(function (childN) {\n    return deepDelete(addsSet, childN);\n  });\n}\nfunction isParentRemoved(removes, n, mirror) {\n  var parentNode = n.parentNode;\n  if (!parentNode) {\n    return false;\n  }\n  var parentId = mirror.getId(parentNode);\n  if (removes.some(function (r) {\n    return r.id === parentId;\n  })) {\n    return true;\n  }\n  return isParentRemoved(removes, parentNode, mirror);\n}\nfunction isAncestorInSet(set, n) {\n  var parentNode = n.parentNode;\n  if (!parentNode) {\n    return false;\n  }\n  if (set.has(parentNode)) {\n    return true;\n  }\n  return isAncestorInSet(set, parentNode);\n}\nexport default MutationBuffer;","map":{"version":3,"names":["__values","isShadowRoot","maskInputValue","transformAttribute","needMaskingText","IGNORED_NODE","serializeNodeWithId","isIgnored","isBlocked","isAncestorRemoved","isIframeINode","hasShadowRoot","isNodeInLinkedList","n","DoubleLinkedList","length","head","prototype","get","position","Error","current","index","next","addNode","node","value","previous","__ln","previousSibling","nextSibling","removeNode","moveKey","id","parentId","concat","isINode","MutationBuffer","_this","frozen","locked","texts","attributes","removes","mapRemoves","movedMap","addedSet","Set","movedSet","droppedSet","processMutations","mutations","forEach","processMutation","emit","e_1","_a","e_2","_b","adds","addList","getNextId","ns","nextId","mirror","getId","pushAdd","_c","_d","_e","shadowHost","getRootNode","host","rootShadowHost","call","notInDoc","doc","contains","parentNode","sn","map","blockClass","blockSelector","maskTextClass","maskTextSelector","skipChild","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","slimDOMOptions","recordCanvas","inlineImages","onSerialize","currentN","iframeManager","addIframe","shadowDomManager","addShadowRoot","shadowRoot","document","onIframeLoad","iframe","childSn","attachIframe","observeAttachShadow","push","removeNodeFromMap","shift","done","isParentRemoved","has","e_1_1","error","return","_f","isAncestorInSet","add","e_2_1","candidate","_node","payload","text","filter","attribute","mutationCb","m","e_3","e_4","target","type","textContent","oldValue","replace","getAttribute","attributeName","tagName","item","find","a","old","createElement","setAttribute","style","undefined","styleObj","Array","from","pname","newValue","getPropertyValue","newPriority","getPropertyPriority","e_3_1","e_4_1","addedNodes","genAdds","removedNodes","nodeId","deepDelete","isShadow","targetId","__sn","delete","childNodes","childN","init","options","key","freeze","canvasManager","unfreeze","isFrozen","lock","unlock","reset","addsSet","some","r","set"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/mutation.js"],"sourcesContent":["import { __values } from '../../ext/tslib/tslib.es6.js';\nimport { isShadowRoot, maskInputValue, transformAttribute, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isAncestorRemoved, isIframeINode, hasShadowRoot } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\n    return '__ln' in n;\n}\nvar DoubleLinkedList = (function () {\n    function DoubleLinkedList() {\n        this.length = 0;\n        this.head = null;\n    }\n    DoubleLinkedList.prototype.get = function (position) {\n        if (position >= this.length) {\n            throw new Error('Position outside of list range');\n        }\n        var current = this.head;\n        for (var index = 0; index < position; index++) {\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\n        }\n        return current;\n    };\n    DoubleLinkedList.prototype.addNode = function (n) {\n        var node = {\n            value: n,\n            previous: null,\n            next: null,\n        };\n        n.__ln = node;\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\n            var current = n.previousSibling.__ln.next;\n            node.next = current;\n            node.previous = n.previousSibling.__ln;\n            n.previousSibling.__ln.next = node;\n            if (current) {\n                current.previous = node;\n            }\n        }\n        else if (n.nextSibling &&\n            isNodeInLinkedList(n.nextSibling) &&\n            n.nextSibling.__ln.previous) {\n            var current = n.nextSibling.__ln.previous;\n            node.previous = current;\n            node.next = n.nextSibling.__ln;\n            n.nextSibling.__ln.previous = node;\n            if (current) {\n                current.next = node;\n            }\n        }\n        else {\n            if (this.head) {\n                this.head.previous = node;\n            }\n            node.next = this.head;\n            this.head = node;\n        }\n        this.length++;\n    };\n    DoubleLinkedList.prototype.removeNode = function (n) {\n        var current = n.__ln;\n        if (!this.head) {\n            return;\n        }\n        if (!current.previous) {\n            this.head = current.next;\n            if (this.head) {\n                this.head.previous = null;\n            }\n        }\n        else {\n            current.previous.next = current.next;\n            if (current.next) {\n                current.next.previous = current.previous;\n            }\n        }\n        if (n.__ln) {\n            delete n.__ln;\n        }\n        this.length--;\n    };\n    return DoubleLinkedList;\n}());\nvar moveKey = function (id, parentId) { return \"\".concat(id, \"@\").concat(parentId); };\nfunction isINode(n) {\n    return '__sn' in n;\n}\nvar MutationBuffer = (function () {\n    function MutationBuffer() {\n        var _this = this;\n        this.frozen = false;\n        this.locked = false;\n        this.texts = [];\n        this.attributes = [];\n        this.removes = [];\n        this.mapRemoves = [];\n        this.movedMap = {};\n        this.addedSet = new Set();\n        this.movedSet = new Set();\n        this.droppedSet = new Set();\n        this.processMutations = function (mutations) {\n            mutations.forEach(_this.processMutation);\n            _this.emit();\n        };\n        this.emit = function () {\n            var e_1, _a, e_2, _b;\n            if (_this.frozen || _this.locked) {\n                return;\n            }\n            var adds = [];\n            var addList = new DoubleLinkedList();\n            var getNextId = function (n) {\n                var ns = n;\n                var nextId = IGNORED_NODE;\n                while (nextId === IGNORED_NODE) {\n                    ns = ns && ns.nextSibling;\n                    nextId = ns && _this.mirror.getId(ns);\n                }\n                return nextId;\n            };\n            var pushAdd = function (n) {\n                var _a, _b, _c, _d, _e;\n                var shadowHost = n.getRootNode\n                    ? (_a = n.getRootNode()) === null || _a === void 0 ? void 0 : _a.host\n                    : null;\n                var rootShadowHost = shadowHost;\n                while ((_c = (_b = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _b === void 0 ? void 0 : _b.call(rootShadowHost)) === null || _c === void 0 ? void 0 : _c.host)\n                    rootShadowHost =\n                        ((_e = (_d = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _d === void 0 ? void 0 : _d.call(rootShadowHost)) === null || _e === void 0 ? void 0 : _e.host) ||\n                            null;\n                var notInDoc = !_this.doc.contains(n) &&\n                    (rootShadowHost === null || !_this.doc.contains(rootShadowHost));\n                if (!n.parentNode || notInDoc) {\n                    return;\n                }\n                var parentId = isShadowRoot(n.parentNode)\n                    ? _this.mirror.getId(shadowHost)\n                    : _this.mirror.getId(n.parentNode);\n                var nextId = getNextId(n);\n                if (parentId === -1 || nextId === -1) {\n                    return addList.addNode(n);\n                }\n                var sn = serializeNodeWithId(n, {\n                    doc: _this.doc,\n                    map: _this.mirror.map,\n                    blockClass: _this.blockClass,\n                    blockSelector: _this.blockSelector,\n                    maskTextClass: _this.maskTextClass,\n                    maskTextSelector: _this.maskTextSelector,\n                    skipChild: true,\n                    inlineStylesheet: _this.inlineStylesheet,\n                    maskInputOptions: _this.maskInputOptions,\n                    maskTextFn: _this.maskTextFn,\n                    maskInputFn: _this.maskInputFn,\n                    slimDOMOptions: _this.slimDOMOptions,\n                    recordCanvas: _this.recordCanvas,\n                    inlineImages: _this.inlineImages,\n                    onSerialize: function (currentN) {\n                        if (isIframeINode(currentN)) {\n                            _this.iframeManager.addIframe(currentN);\n                        }\n                        if (hasShadowRoot(n)) {\n                            _this.shadowDomManager.addShadowRoot(n.shadowRoot, document);\n                        }\n                    },\n                    onIframeLoad: function (iframe, childSn) {\n                        _this.iframeManager.attachIframe(iframe, childSn);\n                        _this.shadowDomManager.observeAttachShadow(iframe);\n                    },\n                });\n                if (sn) {\n                    adds.push({\n                        parentId: parentId,\n                        nextId: nextId,\n                        node: sn,\n                    });\n                }\n            };\n            while (_this.mapRemoves.length) {\n                _this.mirror.removeNodeFromMap(_this.mapRemoves.shift());\n            }\n            try {\n                for (var _c = __values(_this.movedSet), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var n = _d.value;\n                    if (isParentRemoved(_this.removes, n, _this.mirror) &&\n                        !_this.movedSet.has(n.parentNode)) {\n                        continue;\n                    }\n                    pushAdd(n);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            try {\n                for (var _e = __values(_this.addedSet), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var n = _f.value;\n                    if (!isAncestorInSet(_this.droppedSet, n) &&\n                        !isParentRemoved(_this.removes, n, _this.mirror)) {\n                        pushAdd(n);\n                    }\n                    else if (isAncestorInSet(_this.movedSet, n)) {\n                        pushAdd(n);\n                    }\n                    else {\n                        _this.droppedSet.add(n);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            var candidate = null;\n            while (addList.length) {\n                var node = null;\n                if (candidate) {\n                    var parentId = _this.mirror.getId(candidate.value.parentNode);\n                    var nextId = getNextId(candidate.value);\n                    if (parentId !== -1 && nextId !== -1) {\n                        node = candidate;\n                    }\n                }\n                if (!node) {\n                    for (var index = addList.length - 1; index >= 0; index--) {\n                        var _node = addList.get(index);\n                        if (_node) {\n                            var parentId = _this.mirror.getId(_node.value.parentNode);\n                            var nextId = getNextId(_node.value);\n                            if (parentId !== -1 && nextId !== -1) {\n                                node = _node;\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (!node) {\n                    while (addList.head) {\n                        addList.removeNode(addList.head.value);\n                    }\n                    break;\n                }\n                candidate = node.previous;\n                addList.removeNode(node.value);\n                pushAdd(node.value);\n            }\n            var payload = {\n                texts: _this.texts\n                    .map(function (text) { return ({\n                    id: _this.mirror.getId(text.node),\n                    value: text.value,\n                }); })\n                    .filter(function (text) { return _this.mirror.has(text.id); }),\n                attributes: _this.attributes\n                    .map(function (attribute) { return ({\n                    id: _this.mirror.getId(attribute.node),\n                    attributes: attribute.attributes,\n                }); })\n                    .filter(function (attribute) { return _this.mirror.has(attribute.id); }),\n                removes: _this.removes,\n                adds: adds,\n            };\n            if (!payload.texts.length &&\n                !payload.attributes.length &&\n                !payload.removes.length &&\n                !payload.adds.length) {\n                return;\n            }\n            _this.texts = [];\n            _this.attributes = [];\n            _this.removes = [];\n            _this.addedSet = new Set();\n            _this.movedSet = new Set();\n            _this.droppedSet = new Set();\n            _this.movedMap = {};\n            _this.mutationCb(payload);\n        };\n        this.processMutation = function (m) {\n            var e_3, _a, e_4, _b;\n            if (isIgnored(m.target)) {\n                return;\n            }\n            switch (m.type) {\n                case 'characterData': {\n                    var value = m.target.textContent;\n                    if (!isBlocked(m.target, _this.blockClass) && value !== m.oldValue) {\n                        _this.texts.push({\n                            value: needMaskingText(m.target, _this.maskTextClass, _this.maskTextSelector) && value\n                                ? _this.maskTextFn\n                                    ? _this.maskTextFn(value)\n                                    : value.replace(/[\\S]/g, '*')\n                                : value,\n                            node: m.target,\n                        });\n                    }\n                    break;\n                }\n                case 'attributes': {\n                    var target = m.target;\n                    var value = m.target.getAttribute(m.attributeName);\n                    if (m.attributeName === 'value') {\n                        value = maskInputValue({\n                            maskInputOptions: _this.maskInputOptions,\n                            tagName: m.target.tagName,\n                            type: m.target.getAttribute('type'),\n                            value: value,\n                            maskInputFn: _this.maskInputFn,\n                        });\n                    }\n                    if (isBlocked(m.target, _this.blockClass) || value === m.oldValue) {\n                        return;\n                    }\n                    var item = _this.attributes.find(function (a) { return a.node === m.target; });\n                    if (!item) {\n                        item = {\n                            node: m.target,\n                            attributes: {},\n                        };\n                        _this.attributes.push(item);\n                    }\n                    if (m.attributeName === 'style') {\n                        var old = _this.doc.createElement('span');\n                        if (m.oldValue) {\n                            old.setAttribute('style', m.oldValue);\n                        }\n                        if (item.attributes.style === undefined ||\n                            item.attributes.style === null) {\n                            item.attributes.style = {};\n                        }\n                        var styleObj = item.attributes.style;\n                        try {\n                            for (var _c = __values(Array.from(target.style)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                                var pname = _d.value;\n                                var newValue = target.style.getPropertyValue(pname);\n                                var newPriority = target.style.getPropertyPriority(pname);\n                                if (newValue !== old.style.getPropertyValue(pname) ||\n                                    newPriority !== old.style.getPropertyPriority(pname)) {\n                                    if (newPriority === '') {\n                                        styleObj[pname] = newValue;\n                                    }\n                                    else {\n                                        styleObj[pname] = [newValue, newPriority];\n                                    }\n                                }\n                            }\n                        }\n                        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                        finally {\n                            try {\n                                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                            }\n                            finally { if (e_3) throw e_3.error; }\n                        }\n                        try {\n                            for (var _e = __values(Array.from(old.style)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                                var pname = _f.value;\n                                if (target.style.getPropertyValue(pname) === '') {\n                                    styleObj[pname] = false;\n                                }\n                            }\n                        }\n                        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                        finally {\n                            try {\n                                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                            }\n                            finally { if (e_4) throw e_4.error; }\n                        }\n                    }\n                    else {\n                        item.attributes[m.attributeName] = transformAttribute(_this.doc, m.target.tagName, m.attributeName, value);\n                    }\n                    break;\n                }\n                case 'childList': {\n                    m.addedNodes.forEach(function (n) { return _this.genAdds(n, m.target); });\n                    m.removedNodes.forEach(function (n) {\n                        var nodeId = _this.mirror.getId(n);\n                        var parentId = isShadowRoot(m.target)\n                            ? _this.mirror.getId(m.target.host)\n                            : _this.mirror.getId(m.target);\n                        if (isBlocked(m.target, _this.blockClass) || isIgnored(n)) {\n                            return;\n                        }\n                        if (_this.addedSet.has(n)) {\n                            deepDelete(_this.addedSet, n);\n                            _this.droppedSet.add(n);\n                        }\n                        else if (_this.addedSet.has(m.target) && nodeId === -1) ;\n                        else if (isAncestorRemoved(m.target, _this.mirror)) ;\n                        else if (_this.movedSet.has(n) &&\n                            _this.movedMap[moveKey(nodeId, parentId)]) {\n                            deepDelete(_this.movedSet, n);\n                        }\n                        else {\n                            _this.removes.push({\n                                parentId: parentId,\n                                id: nodeId,\n                                isShadow: isShadowRoot(m.target) ? true : undefined,\n                            });\n                        }\n                        _this.mapRemoves.push(n);\n                    });\n                    break;\n                }\n            }\n        };\n        this.genAdds = function (n, target) {\n            if (target && isBlocked(target, _this.blockClass)) {\n                return;\n            }\n            if (isINode(n)) {\n                if (isIgnored(n)) {\n                    return;\n                }\n                _this.movedSet.add(n);\n                var targetId = null;\n                if (target && isINode(target)) {\n                    targetId = target.__sn.id;\n                }\n                if (targetId) {\n                    _this.movedMap[moveKey(n.__sn.id, targetId)] = true;\n                }\n            }\n            else {\n                _this.addedSet.add(n);\n                _this.droppedSet.delete(n);\n            }\n            if (!isBlocked(n, _this.blockClass))\n                n.childNodes.forEach(function (childN) { return _this.genAdds(childN); });\n        };\n    }\n    MutationBuffer.prototype.init = function (options) {\n        var _this = this;\n        [\n            'mutationCb',\n            'blockClass',\n            'blockSelector',\n            'maskTextClass',\n            'maskTextSelector',\n            'inlineStylesheet',\n            'maskInputOptions',\n            'maskTextFn',\n            'maskInputFn',\n            'recordCanvas',\n            'inlineImages',\n            'slimDOMOptions',\n            'doc',\n            'mirror',\n            'iframeManager',\n            'shadowDomManager',\n            'canvasManager',\n        ].forEach(function (key) {\n            _this[key] = options[key];\n        });\n    };\n    MutationBuffer.prototype.freeze = function () {\n        this.frozen = true;\n        this.canvasManager.freeze();\n    };\n    MutationBuffer.prototype.unfreeze = function () {\n        this.frozen = false;\n        this.canvasManager.unfreeze();\n        this.emit();\n    };\n    MutationBuffer.prototype.isFrozen = function () {\n        return this.frozen;\n    };\n    MutationBuffer.prototype.lock = function () {\n        this.locked = true;\n        this.canvasManager.lock();\n    };\n    MutationBuffer.prototype.unlock = function () {\n        this.locked = false;\n        this.canvasManager.unlock();\n        this.emit();\n    };\n    MutationBuffer.prototype.reset = function () {\n        this.shadowDomManager.reset();\n        this.canvasManager.reset();\n    };\n    return MutationBuffer;\n}());\nfunction deepDelete(addsSet, n) {\n    addsSet.delete(n);\n    n.childNodes.forEach(function (childN) { return deepDelete(addsSet, childN); });\n}\nfunction isParentRemoved(removes, n, mirror) {\n    var parentNode = n.parentNode;\n    if (!parentNode) {\n        return false;\n    }\n    var parentId = mirror.getId(parentNode);\n    if (removes.some(function (r) { return r.id === parentId; })) {\n        return true;\n    }\n    return isParentRemoved(removes, parentNode, mirror);\n}\nfunction isAncestorInSet(set, n) {\n    var parentNode = n.parentNode;\n    if (!parentNode) {\n        return false;\n    }\n    if (set.has(parentNode)) {\n        return true;\n    }\n    return isAncestorInSet(set, parentNode);\n}\n\nexport default MutationBuffer;\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,YAAY,EAAEC,cAAc,EAAEC,kBAAkB,EAAEC,eAAe,EAAEC,YAAY,EAAEC,mBAAmB,QAAQ,8CAA8C;AACnK,SAASC,SAAS,EAAEC,SAAS,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,aAAa,QAAQ,aAAa;AAEnG,SAASC,kBAAkBA,CAACC,CAAC,EAAE;EAC3B,OAAO,MAAM,IAAIA,CAAC;AACtB;AACA,IAAIC,gBAAgB,GAAI,YAAY;EAChC,SAASA,gBAAgBA,CAAA,EAAG;IACxB,IAAI,CAACC,MAAM,GAAG,CAAC;IACf,IAAI,CAACC,IAAI,GAAG,IAAI;EACpB;EACAF,gBAAgB,CAACG,SAAS,CAACC,GAAG,GAAG,UAAUC,QAAQ,EAAE;IACjD,IAAIA,QAAQ,IAAI,IAAI,CAACJ,MAAM,EAAE;MACzB,MAAM,IAAIK,KAAK,CAAC,gCAAgC,CAAC;IACrD;IACA,IAAIC,OAAO,GAAG,IAAI,CAACL,IAAI;IACvB,KAAK,IAAIM,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGH,QAAQ,EAAEG,KAAK,EAAE,EAAE;MAC3CD,OAAO,GAAG,CAACA,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACE,IAAI,KAAK,IAAI;IACtF;IACA,OAAOF,OAAO;EAClB,CAAC;EACDP,gBAAgB,CAACG,SAAS,CAACO,OAAO,GAAG,UAAUX,CAAC,EAAE;IAC9C,IAAIY,IAAI,GAAG;MACPC,KAAK,EAAEb,CAAC;MACRc,QAAQ,EAAE,IAAI;MACdJ,IAAI,EAAE;IACV,CAAC;IACDV,CAAC,CAACe,IAAI,GAAGH,IAAI;IACb,IAAIZ,CAAC,CAACgB,eAAe,IAAIjB,kBAAkB,CAACC,CAAC,CAACgB,eAAe,CAAC,EAAE;MAC5D,IAAIR,OAAO,GAAGR,CAAC,CAACgB,eAAe,CAACD,IAAI,CAACL,IAAI;MACzCE,IAAI,CAACF,IAAI,GAAGF,OAAO;MACnBI,IAAI,CAACE,QAAQ,GAAGd,CAAC,CAACgB,eAAe,CAACD,IAAI;MACtCf,CAAC,CAACgB,eAAe,CAACD,IAAI,CAACL,IAAI,GAAGE,IAAI;MAClC,IAAIJ,OAAO,EAAE;QACTA,OAAO,CAACM,QAAQ,GAAGF,IAAI;MAC3B;IACJ,CAAC,MACI,IAAIZ,CAAC,CAACiB,WAAW,IAClBlB,kBAAkB,CAACC,CAAC,CAACiB,WAAW,CAAC,IACjCjB,CAAC,CAACiB,WAAW,CAACF,IAAI,CAACD,QAAQ,EAAE;MAC7B,IAAIN,OAAO,GAAGR,CAAC,CAACiB,WAAW,CAACF,IAAI,CAACD,QAAQ;MACzCF,IAAI,CAACE,QAAQ,GAAGN,OAAO;MACvBI,IAAI,CAACF,IAAI,GAAGV,CAAC,CAACiB,WAAW,CAACF,IAAI;MAC9Bf,CAAC,CAACiB,WAAW,CAACF,IAAI,CAACD,QAAQ,GAAGF,IAAI;MAClC,IAAIJ,OAAO,EAAE;QACTA,OAAO,CAACE,IAAI,GAAGE,IAAI;MACvB;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAACT,IAAI,EAAE;QACX,IAAI,CAACA,IAAI,CAACW,QAAQ,GAAGF,IAAI;MAC7B;MACAA,IAAI,CAACF,IAAI,GAAG,IAAI,CAACP,IAAI;MACrB,IAAI,CAACA,IAAI,GAAGS,IAAI;IACpB;IACA,IAAI,CAACV,MAAM,EAAE;EACjB,CAAC;EACDD,gBAAgB,CAACG,SAAS,CAACc,UAAU,GAAG,UAAUlB,CAAC,EAAE;IACjD,IAAIQ,OAAO,GAAGR,CAAC,CAACe,IAAI;IACpB,IAAI,CAAC,IAAI,CAACZ,IAAI,EAAE;MACZ;IACJ;IACA,IAAI,CAACK,OAAO,CAACM,QAAQ,EAAE;MACnB,IAAI,CAACX,IAAI,GAAGK,OAAO,CAACE,IAAI;MACxB,IAAI,IAAI,CAACP,IAAI,EAAE;QACX,IAAI,CAACA,IAAI,CAACW,QAAQ,GAAG,IAAI;MAC7B;IACJ,CAAC,MACI;MACDN,OAAO,CAACM,QAAQ,CAACJ,IAAI,GAAGF,OAAO,CAACE,IAAI;MACpC,IAAIF,OAAO,CAACE,IAAI,EAAE;QACdF,OAAO,CAACE,IAAI,CAACI,QAAQ,GAAGN,OAAO,CAACM,QAAQ;MAC5C;IACJ;IACA,IAAId,CAAC,CAACe,IAAI,EAAE;MACR,OAAOf,CAAC,CAACe,IAAI;IACjB;IACA,IAAI,CAACb,MAAM,EAAE;EACjB,CAAC;EACD,OAAOD,gBAAgB;AAC3B,CAAC,CAAC,CAAE;AACJ,IAAIkB,OAAO,GAAG,SAAAA,CAAUC,EAAE,EAAEC,QAAQ,EAAE;EAAE,OAAO,EAAE,CAACC,MAAM,CAACF,EAAE,EAAE,GAAG,CAAC,CAACE,MAAM,CAACD,QAAQ,CAAC;AAAE,CAAC;AACrF,SAASE,OAAOA,CAACvB,CAAC,EAAE;EAChB,OAAO,MAAM,IAAIA,CAAC;AACtB;AACA,IAAIwB,cAAc,GAAI,YAAY;EAC9B,SAASA,cAAcA,CAAA,EAAG;IACtB,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACC,MAAM,GAAG,KAAK;IACnB,IAAI,CAACC,MAAM,GAAG,KAAK;IACnB,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAACC,QAAQ,GAAG,IAAIC,GAAG,CAAC,CAAC;IACzB,IAAI,CAACC,QAAQ,GAAG,IAAID,GAAG,CAAC,CAAC;IACzB,IAAI,CAACE,UAAU,GAAG,IAAIF,GAAG,CAAC,CAAC;IAC3B,IAAI,CAACG,gBAAgB,GAAG,UAAUC,SAAS,EAAE;MACzCA,SAAS,CAACC,OAAO,CAACd,KAAK,CAACe,eAAe,CAAC;MACxCf,KAAK,CAACgB,IAAI,CAAC,CAAC;IAChB,CAAC;IACD,IAAI,CAACA,IAAI,GAAG,YAAY;MACpB,IAAIC,GAAG,EAAEC,EAAE,EAAEC,GAAG,EAAEC,EAAE;MACpB,IAAIpB,KAAK,CAACC,MAAM,IAAID,KAAK,CAACE,MAAM,EAAE;QAC9B;MACJ;MACA,IAAImB,IAAI,GAAG,EAAE;MACb,IAAIC,OAAO,GAAG,IAAI9C,gBAAgB,CAAC,CAAC;MACpC,IAAI+C,SAAS,GAAG,SAAAA,CAAUhD,CAAC,EAAE;QACzB,IAAIiD,EAAE,GAAGjD,CAAC;QACV,IAAIkD,MAAM,GAAG1D,YAAY;QACzB,OAAO0D,MAAM,KAAK1D,YAAY,EAAE;UAC5ByD,EAAE,GAAGA,EAAE,IAAIA,EAAE,CAAChC,WAAW;UACzBiC,MAAM,GAAGD,EAAE,IAAIxB,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACH,EAAE,CAAC;QACzC;QACA,OAAOC,MAAM;MACjB,CAAC;MACD,IAAIG,OAAO,GAAG,SAAAA,CAAUrD,CAAC,EAAE;QACvB,IAAI2C,EAAE,EAAEE,EAAE,EAAES,EAAE,EAAEC,EAAE,EAAEC,EAAE;QACtB,IAAIC,UAAU,GAAGzD,CAAC,CAAC0D,WAAW,GACxB,CAACf,EAAE,GAAG3C,CAAC,CAAC0D,WAAW,CAAC,CAAC,MAAM,IAAI,IAAIf,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACgB,IAAI,GACnE,IAAI;QACV,IAAIC,cAAc,GAAGH,UAAU;QAC/B,OAAO,CAACH,EAAE,GAAG,CAACT,EAAE,GAAGe,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACF,WAAW,MAAM,IAAI,IAAIb,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACgB,IAAI,CAACD,cAAc,CAAC,MAAM,IAAI,IAAIN,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACK,IAAI,EACrNC,cAAc,GACV,CAAC,CAACJ,EAAE,GAAG,CAACD,EAAE,GAAGK,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACF,WAAW,MAAM,IAAI,IAAIH,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACM,IAAI,CAACD,cAAc,CAAC,MAAM,IAAI,IAAIJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,IAAI,KAC/M,IAAI;QAChB,IAAIG,QAAQ,GAAG,CAACrC,KAAK,CAACsC,GAAG,CAACC,QAAQ,CAAChE,CAAC,CAAC,KAChC4D,cAAc,KAAK,IAAI,IAAI,CAACnC,KAAK,CAACsC,GAAG,CAACC,QAAQ,CAACJ,cAAc,CAAC,CAAC;QACpE,IAAI,CAAC5D,CAAC,CAACiE,UAAU,IAAIH,QAAQ,EAAE;UAC3B;QACJ;QACA,IAAIzC,QAAQ,GAAGjC,YAAY,CAACY,CAAC,CAACiE,UAAU,CAAC,GACnCxC,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACK,UAAU,CAAC,GAC9BhC,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACpD,CAAC,CAACiE,UAAU,CAAC;QACtC,IAAIf,MAAM,GAAGF,SAAS,CAAChD,CAAC,CAAC;QACzB,IAAIqB,QAAQ,KAAK,CAAC,CAAC,IAAI6B,MAAM,KAAK,CAAC,CAAC,EAAE;UAClC,OAAOH,OAAO,CAACpC,OAAO,CAACX,CAAC,CAAC;QAC7B;QACA,IAAIkE,EAAE,GAAGzE,mBAAmB,CAACO,CAAC,EAAE;UAC5B+D,GAAG,EAAEtC,KAAK,CAACsC,GAAG;UACdI,GAAG,EAAE1C,KAAK,CAAC0B,MAAM,CAACgB,GAAG;UACrBC,UAAU,EAAE3C,KAAK,CAAC2C,UAAU;UAC5BC,aAAa,EAAE5C,KAAK,CAAC4C,aAAa;UAClCC,aAAa,EAAE7C,KAAK,CAAC6C,aAAa;UAClCC,gBAAgB,EAAE9C,KAAK,CAAC8C,gBAAgB;UACxCC,SAAS,EAAE,IAAI;UACfC,gBAAgB,EAAEhD,KAAK,CAACgD,gBAAgB;UACxCC,gBAAgB,EAAEjD,KAAK,CAACiD,gBAAgB;UACxCC,UAAU,EAAElD,KAAK,CAACkD,UAAU;UAC5BC,WAAW,EAAEnD,KAAK,CAACmD,WAAW;UAC9BC,cAAc,EAAEpD,KAAK,CAACoD,cAAc;UACpCC,YAAY,EAAErD,KAAK,CAACqD,YAAY;UAChCC,YAAY,EAAEtD,KAAK,CAACsD,YAAY;UAChCC,WAAW,EAAE,SAAAA,CAAUC,QAAQ,EAAE;YAC7B,IAAIpF,aAAa,CAACoF,QAAQ,CAAC,EAAE;cACzBxD,KAAK,CAACyD,aAAa,CAACC,SAAS,CAACF,QAAQ,CAAC;YAC3C;YACA,IAAInF,aAAa,CAACE,CAAC,CAAC,EAAE;cAClByB,KAAK,CAAC2D,gBAAgB,CAACC,aAAa,CAACrF,CAAC,CAACsF,UAAU,EAAEC,QAAQ,CAAC;YAChE;UACJ,CAAC;UACDC,YAAY,EAAE,SAAAA,CAAUC,MAAM,EAAEC,OAAO,EAAE;YACrCjE,KAAK,CAACyD,aAAa,CAACS,YAAY,CAACF,MAAM,EAAEC,OAAO,CAAC;YACjDjE,KAAK,CAAC2D,gBAAgB,CAACQ,mBAAmB,CAACH,MAAM,CAAC;UACtD;QACJ,CAAC,CAAC;QACF,IAAIvB,EAAE,EAAE;UACJpB,IAAI,CAAC+C,IAAI,CAAC;YACNxE,QAAQ,EAAEA,QAAQ;YAClB6B,MAAM,EAAEA,MAAM;YACdtC,IAAI,EAAEsD;UACV,CAAC,CAAC;QACN;MACJ,CAAC;MACD,OAAOzC,KAAK,CAACM,UAAU,CAAC7B,MAAM,EAAE;QAC5BuB,KAAK,CAAC0B,MAAM,CAAC2C,iBAAiB,CAACrE,KAAK,CAACM,UAAU,CAACgE,KAAK,CAAC,CAAC,CAAC;MAC5D;MACA,IAAI;QACA,KAAK,IAAIzC,EAAE,GAAGnE,QAAQ,CAACsC,KAAK,CAACU,QAAQ,CAAC,EAAEoB,EAAE,GAAGD,EAAE,CAAC5C,IAAI,CAAC,CAAC,EAAE,CAAC6C,EAAE,CAACyC,IAAI,EAAEzC,EAAE,GAAGD,EAAE,CAAC5C,IAAI,CAAC,CAAC,EAAE;UAC9E,IAAIV,CAAC,GAAGuD,EAAE,CAAC1C,KAAK;UAChB,IAAIoF,eAAe,CAACxE,KAAK,CAACK,OAAO,EAAE9B,CAAC,EAAEyB,KAAK,CAAC0B,MAAM,CAAC,IAC/C,CAAC1B,KAAK,CAACU,QAAQ,CAAC+D,GAAG,CAAClG,CAAC,CAACiE,UAAU,CAAC,EAAE;YACnC;UACJ;UACAZ,OAAO,CAACrD,CAAC,CAAC;QACd;MACJ,CAAC,CACD,OAAOmG,KAAK,EAAE;QAAEzD,GAAG,GAAG;UAAE0D,KAAK,EAAED;QAAM,CAAC;MAAE,CAAC,SACjC;QACJ,IAAI;UACA,IAAI5C,EAAE,IAAI,CAACA,EAAE,CAACyC,IAAI,KAAKrD,EAAE,GAAGW,EAAE,CAAC+C,MAAM,CAAC,EAAE1D,EAAE,CAACkB,IAAI,CAACP,EAAE,CAAC;QACvD,CAAC,SACO;UAAE,IAAIZ,GAAG,EAAE,MAAMA,GAAG,CAAC0D,KAAK;QAAE;MACxC;MACA,IAAI;QACA,KAAK,IAAI5C,EAAE,GAAGrE,QAAQ,CAACsC,KAAK,CAACQ,QAAQ,CAAC,EAAEqE,EAAE,GAAG9C,EAAE,CAAC9C,IAAI,CAAC,CAAC,EAAE,CAAC4F,EAAE,CAACN,IAAI,EAAEM,EAAE,GAAG9C,EAAE,CAAC9C,IAAI,CAAC,CAAC,EAAE;UAC9E,IAAIV,CAAC,GAAGsG,EAAE,CAACzF,KAAK;UAChB,IAAI,CAAC0F,eAAe,CAAC9E,KAAK,CAACW,UAAU,EAAEpC,CAAC,CAAC,IACrC,CAACiG,eAAe,CAACxE,KAAK,CAACK,OAAO,EAAE9B,CAAC,EAAEyB,KAAK,CAAC0B,MAAM,CAAC,EAAE;YAClDE,OAAO,CAACrD,CAAC,CAAC;UACd,CAAC,MACI,IAAIuG,eAAe,CAAC9E,KAAK,CAACU,QAAQ,EAAEnC,CAAC,CAAC,EAAE;YACzCqD,OAAO,CAACrD,CAAC,CAAC;UACd,CAAC,MACI;YACDyB,KAAK,CAACW,UAAU,CAACoE,GAAG,CAACxG,CAAC,CAAC;UAC3B;QACJ;MACJ,CAAC,CACD,OAAOyG,KAAK,EAAE;QAAE7D,GAAG,GAAG;UAAEwD,KAAK,EAAEK;QAAM,CAAC;MAAE,CAAC,SACjC;QACJ,IAAI;UACA,IAAIH,EAAE,IAAI,CAACA,EAAE,CAACN,IAAI,KAAKnD,EAAE,GAAGW,EAAE,CAAC6C,MAAM,CAAC,EAAExD,EAAE,CAACgB,IAAI,CAACL,EAAE,CAAC;QACvD,CAAC,SACO;UAAE,IAAIZ,GAAG,EAAE,MAAMA,GAAG,CAACwD,KAAK;QAAE;MACxC;MACA,IAAIM,SAAS,GAAG,IAAI;MACpB,OAAO3D,OAAO,CAAC7C,MAAM,EAAE;QACnB,IAAIU,IAAI,GAAG,IAAI;QACf,IAAI8F,SAAS,EAAE;UACX,IAAIrF,QAAQ,GAAGI,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACsD,SAAS,CAAC7F,KAAK,CAACoD,UAAU,CAAC;UAC7D,IAAIf,MAAM,GAAGF,SAAS,CAAC0D,SAAS,CAAC7F,KAAK,CAAC;UACvC,IAAIQ,QAAQ,KAAK,CAAC,CAAC,IAAI6B,MAAM,KAAK,CAAC,CAAC,EAAE;YAClCtC,IAAI,GAAG8F,SAAS;UACpB;QACJ;QACA,IAAI,CAAC9F,IAAI,EAAE;UACP,KAAK,IAAIH,KAAK,GAAGsC,OAAO,CAAC7C,MAAM,GAAG,CAAC,EAAEO,KAAK,IAAI,CAAC,EAAEA,KAAK,EAAE,EAAE;YACtD,IAAIkG,KAAK,GAAG5D,OAAO,CAAC1C,GAAG,CAACI,KAAK,CAAC;YAC9B,IAAIkG,KAAK,EAAE;cACP,IAAItF,QAAQ,GAAGI,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACuD,KAAK,CAAC9F,KAAK,CAACoD,UAAU,CAAC;cACzD,IAAIf,MAAM,GAAGF,SAAS,CAAC2D,KAAK,CAAC9F,KAAK,CAAC;cACnC,IAAIQ,QAAQ,KAAK,CAAC,CAAC,IAAI6B,MAAM,KAAK,CAAC,CAAC,EAAE;gBAClCtC,IAAI,GAAG+F,KAAK;gBACZ;cACJ;YACJ;UACJ;QACJ;QACA,IAAI,CAAC/F,IAAI,EAAE;UACP,OAAOmC,OAAO,CAAC5C,IAAI,EAAE;YACjB4C,OAAO,CAAC7B,UAAU,CAAC6B,OAAO,CAAC5C,IAAI,CAACU,KAAK,CAAC;UAC1C;UACA;QACJ;QACA6F,SAAS,GAAG9F,IAAI,CAACE,QAAQ;QACzBiC,OAAO,CAAC7B,UAAU,CAACN,IAAI,CAACC,KAAK,CAAC;QAC9BwC,OAAO,CAACzC,IAAI,CAACC,KAAK,CAAC;MACvB;MACA,IAAI+F,OAAO,GAAG;QACVhF,KAAK,EAAEH,KAAK,CAACG,KAAK,CACbuC,GAAG,CAAC,UAAU0C,IAAI,EAAE;UAAE,OAAQ;YAC/BzF,EAAE,EAAEK,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACyD,IAAI,CAACjG,IAAI,CAAC;YACjCC,KAAK,EAAEgG,IAAI,CAAChG;UAChB,CAAC;QAAG,CAAC,CAAC,CACDiG,MAAM,CAAC,UAAUD,IAAI,EAAE;UAAE,OAAOpF,KAAK,CAAC0B,MAAM,CAAC+C,GAAG,CAACW,IAAI,CAACzF,EAAE,CAAC;QAAE,CAAC,CAAC;QAClES,UAAU,EAAEJ,KAAK,CAACI,UAAU,CACvBsC,GAAG,CAAC,UAAU4C,SAAS,EAAE;UAAE,OAAQ;YACpC3F,EAAE,EAAEK,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAAC2D,SAAS,CAACnG,IAAI,CAAC;YACtCiB,UAAU,EAAEkF,SAAS,CAAClF;UAC1B,CAAC;QAAG,CAAC,CAAC,CACDiF,MAAM,CAAC,UAAUC,SAAS,EAAE;UAAE,OAAOtF,KAAK,CAAC0B,MAAM,CAAC+C,GAAG,CAACa,SAAS,CAAC3F,EAAE,CAAC;QAAE,CAAC,CAAC;QAC5EU,OAAO,EAAEL,KAAK,CAACK,OAAO;QACtBgB,IAAI,EAAEA;MACV,CAAC;MACD,IAAI,CAAC8D,OAAO,CAAChF,KAAK,CAAC1B,MAAM,IACrB,CAAC0G,OAAO,CAAC/E,UAAU,CAAC3B,MAAM,IAC1B,CAAC0G,OAAO,CAAC9E,OAAO,CAAC5B,MAAM,IACvB,CAAC0G,OAAO,CAAC9D,IAAI,CAAC5C,MAAM,EAAE;QACtB;MACJ;MACAuB,KAAK,CAACG,KAAK,GAAG,EAAE;MAChBH,KAAK,CAACI,UAAU,GAAG,EAAE;MACrBJ,KAAK,CAACK,OAAO,GAAG,EAAE;MAClBL,KAAK,CAACQ,QAAQ,GAAG,IAAIC,GAAG,CAAC,CAAC;MAC1BT,KAAK,CAACU,QAAQ,GAAG,IAAID,GAAG,CAAC,CAAC;MAC1BT,KAAK,CAACW,UAAU,GAAG,IAAIF,GAAG,CAAC,CAAC;MAC5BT,KAAK,CAACO,QAAQ,GAAG,CAAC,CAAC;MACnBP,KAAK,CAACuF,UAAU,CAACJ,OAAO,CAAC;IAC7B,CAAC;IACD,IAAI,CAACpE,eAAe,GAAG,UAAUyE,CAAC,EAAE;MAChC,IAAIC,GAAG,EAAEvE,EAAE,EAAEwE,GAAG,EAAEtE,EAAE;MACpB,IAAInD,SAAS,CAACuH,CAAC,CAACG,MAAM,CAAC,EAAE;QACrB;MACJ;MACA,QAAQH,CAAC,CAACI,IAAI;QACV,KAAK,eAAe;UAAE;YAClB,IAAIxG,KAAK,GAAGoG,CAAC,CAACG,MAAM,CAACE,WAAW;YAChC,IAAI,CAAC3H,SAAS,CAACsH,CAAC,CAACG,MAAM,EAAE3F,KAAK,CAAC2C,UAAU,CAAC,IAAIvD,KAAK,KAAKoG,CAAC,CAACM,QAAQ,EAAE;cAChE9F,KAAK,CAACG,KAAK,CAACiE,IAAI,CAAC;gBACbhF,KAAK,EAAEtB,eAAe,CAAC0H,CAAC,CAACG,MAAM,EAAE3F,KAAK,CAAC6C,aAAa,EAAE7C,KAAK,CAAC8C,gBAAgB,CAAC,IAAI1D,KAAK,GAChFY,KAAK,CAACkD,UAAU,GACZlD,KAAK,CAACkD,UAAU,CAAC9D,KAAK,CAAC,GACvBA,KAAK,CAAC2G,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,GAC/B3G,KAAK;gBACXD,IAAI,EAAEqG,CAAC,CAACG;cACZ,CAAC,CAAC;YACN;YACA;UACJ;QACA,KAAK,YAAY;UAAE;YACf,IAAIA,MAAM,GAAGH,CAAC,CAACG,MAAM;YACrB,IAAIvG,KAAK,GAAGoG,CAAC,CAACG,MAAM,CAACK,YAAY,CAACR,CAAC,CAACS,aAAa,CAAC;YAClD,IAAIT,CAAC,CAACS,aAAa,KAAK,OAAO,EAAE;cAC7B7G,KAAK,GAAGxB,cAAc,CAAC;gBACnBqF,gBAAgB,EAAEjD,KAAK,CAACiD,gBAAgB;gBACxCiD,OAAO,EAAEV,CAAC,CAACG,MAAM,CAACO,OAAO;gBACzBN,IAAI,EAAEJ,CAAC,CAACG,MAAM,CAACK,YAAY,CAAC,MAAM,CAAC;gBACnC5G,KAAK,EAAEA,KAAK;gBACZ+D,WAAW,EAAEnD,KAAK,CAACmD;cACvB,CAAC,CAAC;YACN;YACA,IAAIjF,SAAS,CAACsH,CAAC,CAACG,MAAM,EAAE3F,KAAK,CAAC2C,UAAU,CAAC,IAAIvD,KAAK,KAAKoG,CAAC,CAACM,QAAQ,EAAE;cAC/D;YACJ;YACA,IAAIK,IAAI,GAAGnG,KAAK,CAACI,UAAU,CAACgG,IAAI,CAAC,UAAUC,CAAC,EAAE;cAAE,OAAOA,CAAC,CAAClH,IAAI,KAAKqG,CAAC,CAACG,MAAM;YAAE,CAAC,CAAC;YAC9E,IAAI,CAACQ,IAAI,EAAE;cACPA,IAAI,GAAG;gBACHhH,IAAI,EAAEqG,CAAC,CAACG,MAAM;gBACdvF,UAAU,EAAE,CAAC;cACjB,CAAC;cACDJ,KAAK,CAACI,UAAU,CAACgE,IAAI,CAAC+B,IAAI,CAAC;YAC/B;YACA,IAAIX,CAAC,CAACS,aAAa,KAAK,OAAO,EAAE;cAC7B,IAAIK,GAAG,GAAGtG,KAAK,CAACsC,GAAG,CAACiE,aAAa,CAAC,MAAM,CAAC;cACzC,IAAIf,CAAC,CAACM,QAAQ,EAAE;gBACZQ,GAAG,CAACE,YAAY,CAAC,OAAO,EAAEhB,CAAC,CAACM,QAAQ,CAAC;cACzC;cACA,IAAIK,IAAI,CAAC/F,UAAU,CAACqG,KAAK,KAAKC,SAAS,IACnCP,IAAI,CAAC/F,UAAU,CAACqG,KAAK,KAAK,IAAI,EAAE;gBAChCN,IAAI,CAAC/F,UAAU,CAACqG,KAAK,GAAG,CAAC,CAAC;cAC9B;cACA,IAAIE,QAAQ,GAAGR,IAAI,CAAC/F,UAAU,CAACqG,KAAK;cACpC,IAAI;gBACA,KAAK,IAAI5E,EAAE,GAAGnE,QAAQ,CAACkJ,KAAK,CAACC,IAAI,CAAClB,MAAM,CAACc,KAAK,CAAC,CAAC,EAAE3E,EAAE,GAAGD,EAAE,CAAC5C,IAAI,CAAC,CAAC,EAAE,CAAC6C,EAAE,CAACyC,IAAI,EAAEzC,EAAE,GAAGD,EAAE,CAAC5C,IAAI,CAAC,CAAC,EAAE;kBACxF,IAAI6H,KAAK,GAAGhF,EAAE,CAAC1C,KAAK;kBACpB,IAAI2H,QAAQ,GAAGpB,MAAM,CAACc,KAAK,CAACO,gBAAgB,CAACF,KAAK,CAAC;kBACnD,IAAIG,WAAW,GAAGtB,MAAM,CAACc,KAAK,CAACS,mBAAmB,CAACJ,KAAK,CAAC;kBACzD,IAAIC,QAAQ,KAAKT,GAAG,CAACG,KAAK,CAACO,gBAAgB,CAACF,KAAK,CAAC,IAC9CG,WAAW,KAAKX,GAAG,CAACG,KAAK,CAACS,mBAAmB,CAACJ,KAAK,CAAC,EAAE;oBACtD,IAAIG,WAAW,KAAK,EAAE,EAAE;sBACpBN,QAAQ,CAACG,KAAK,CAAC,GAAGC,QAAQ;oBAC9B,CAAC,MACI;sBACDJ,QAAQ,CAACG,KAAK,CAAC,GAAG,CAACC,QAAQ,EAAEE,WAAW,CAAC;oBAC7C;kBACJ;gBACJ;cACJ,CAAC,CACD,OAAOE,KAAK,EAAE;gBAAE1B,GAAG,GAAG;kBAAEd,KAAK,EAAEwC;gBAAM,CAAC;cAAE,CAAC,SACjC;gBACJ,IAAI;kBACA,IAAIrF,EAAE,IAAI,CAACA,EAAE,CAACyC,IAAI,KAAKrD,EAAE,GAAGW,EAAE,CAAC+C,MAAM,CAAC,EAAE1D,EAAE,CAACkB,IAAI,CAACP,EAAE,CAAC;gBACvD,CAAC,SACO;kBAAE,IAAI4D,GAAG,EAAE,MAAMA,GAAG,CAACd,KAAK;gBAAE;cACxC;cACA,IAAI;gBACA,KAAK,IAAI5C,EAAE,GAAGrE,QAAQ,CAACkJ,KAAK,CAACC,IAAI,CAACP,GAAG,CAACG,KAAK,CAAC,CAAC,EAAE5B,EAAE,GAAG9C,EAAE,CAAC9C,IAAI,CAAC,CAAC,EAAE,CAAC4F,EAAE,CAACN,IAAI,EAAEM,EAAE,GAAG9C,EAAE,CAAC9C,IAAI,CAAC,CAAC,EAAE;kBACrF,IAAI6H,KAAK,GAAGjC,EAAE,CAACzF,KAAK;kBACpB,IAAIuG,MAAM,CAACc,KAAK,CAACO,gBAAgB,CAACF,KAAK,CAAC,KAAK,EAAE,EAAE;oBAC7CH,QAAQ,CAACG,KAAK,CAAC,GAAG,KAAK;kBAC3B;gBACJ;cACJ,CAAC,CACD,OAAOM,KAAK,EAAE;gBAAE1B,GAAG,GAAG;kBAAEf,KAAK,EAAEyC;gBAAM,CAAC;cAAE,CAAC,SACjC;gBACJ,IAAI;kBACA,IAAIvC,EAAE,IAAI,CAACA,EAAE,CAACN,IAAI,KAAKnD,EAAE,GAAGW,EAAE,CAAC6C,MAAM,CAAC,EAAExD,EAAE,CAACgB,IAAI,CAACL,EAAE,CAAC;gBACvD,CAAC,SACO;kBAAE,IAAI2D,GAAG,EAAE,MAAMA,GAAG,CAACf,KAAK;gBAAE;cACxC;YACJ,CAAC,MACI;cACDwB,IAAI,CAAC/F,UAAU,CAACoF,CAAC,CAACS,aAAa,CAAC,GAAGpI,kBAAkB,CAACmC,KAAK,CAACsC,GAAG,EAAEkD,CAAC,CAACG,MAAM,CAACO,OAAO,EAAEV,CAAC,CAACS,aAAa,EAAE7G,KAAK,CAAC;YAC9G;YACA;UACJ;QACA,KAAK,WAAW;UAAE;YACdoG,CAAC,CAAC6B,UAAU,CAACvG,OAAO,CAAC,UAAUvC,CAAC,EAAE;cAAE,OAAOyB,KAAK,CAACsH,OAAO,CAAC/I,CAAC,EAAEiH,CAAC,CAACG,MAAM,CAAC;YAAE,CAAC,CAAC;YACzEH,CAAC,CAAC+B,YAAY,CAACzG,OAAO,CAAC,UAAUvC,CAAC,EAAE;cAChC,IAAIiJ,MAAM,GAAGxH,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAACpD,CAAC,CAAC;cAClC,IAAIqB,QAAQ,GAAGjC,YAAY,CAAC6H,CAAC,CAACG,MAAM,CAAC,GAC/B3F,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAAC6D,CAAC,CAACG,MAAM,CAACzD,IAAI,CAAC,GACjClC,KAAK,CAAC0B,MAAM,CAACC,KAAK,CAAC6D,CAAC,CAACG,MAAM,CAAC;cAClC,IAAIzH,SAAS,CAACsH,CAAC,CAACG,MAAM,EAAE3F,KAAK,CAAC2C,UAAU,CAAC,IAAI1E,SAAS,CAACM,CAAC,CAAC,EAAE;gBACvD;cACJ;cACA,IAAIyB,KAAK,CAACQ,QAAQ,CAACiE,GAAG,CAAClG,CAAC,CAAC,EAAE;gBACvBkJ,UAAU,CAACzH,KAAK,CAACQ,QAAQ,EAAEjC,CAAC,CAAC;gBAC7ByB,KAAK,CAACW,UAAU,CAACoE,GAAG,CAACxG,CAAC,CAAC;cAC3B,CAAC,MACI,IAAIyB,KAAK,CAACQ,QAAQ,CAACiE,GAAG,CAACe,CAAC,CAACG,MAAM,CAAC,IAAI6B,MAAM,KAAK,CAAC,CAAC,EAAE,CAAC,KACpD,IAAIrJ,iBAAiB,CAACqH,CAAC,CAACG,MAAM,EAAE3F,KAAK,CAAC0B,MAAM,CAAC,EAAE,CAAC,KAChD,IAAI1B,KAAK,CAACU,QAAQ,CAAC+D,GAAG,CAAClG,CAAC,CAAC,IAC1ByB,KAAK,CAACO,QAAQ,CAACb,OAAO,CAAC8H,MAAM,EAAE5H,QAAQ,CAAC,CAAC,EAAE;gBAC3C6H,UAAU,CAACzH,KAAK,CAACU,QAAQ,EAAEnC,CAAC,CAAC;cACjC,CAAC,MACI;gBACDyB,KAAK,CAACK,OAAO,CAAC+D,IAAI,CAAC;kBACfxE,QAAQ,EAAEA,QAAQ;kBAClBD,EAAE,EAAE6H,MAAM;kBACVE,QAAQ,EAAE/J,YAAY,CAAC6H,CAAC,CAACG,MAAM,CAAC,GAAG,IAAI,GAAGe;gBAC9C,CAAC,CAAC;cACN;cACA1G,KAAK,CAACM,UAAU,CAAC8D,IAAI,CAAC7F,CAAC,CAAC;YAC5B,CAAC,CAAC;YACF;UACJ;MACJ;IACJ,CAAC;IACD,IAAI,CAAC+I,OAAO,GAAG,UAAU/I,CAAC,EAAEoH,MAAM,EAAE;MAChC,IAAIA,MAAM,IAAIzH,SAAS,CAACyH,MAAM,EAAE3F,KAAK,CAAC2C,UAAU,CAAC,EAAE;QAC/C;MACJ;MACA,IAAI7C,OAAO,CAACvB,CAAC,CAAC,EAAE;QACZ,IAAIN,SAAS,CAACM,CAAC,CAAC,EAAE;UACd;QACJ;QACAyB,KAAK,CAACU,QAAQ,CAACqE,GAAG,CAACxG,CAAC,CAAC;QACrB,IAAIoJ,QAAQ,GAAG,IAAI;QACnB,IAAIhC,MAAM,IAAI7F,OAAO,CAAC6F,MAAM,CAAC,EAAE;UAC3BgC,QAAQ,GAAGhC,MAAM,CAACiC,IAAI,CAACjI,EAAE;QAC7B;QACA,IAAIgI,QAAQ,EAAE;UACV3H,KAAK,CAACO,QAAQ,CAACb,OAAO,CAACnB,CAAC,CAACqJ,IAAI,CAACjI,EAAE,EAAEgI,QAAQ,CAAC,CAAC,GAAG,IAAI;QACvD;MACJ,CAAC,MACI;QACD3H,KAAK,CAACQ,QAAQ,CAACuE,GAAG,CAACxG,CAAC,CAAC;QACrByB,KAAK,CAACW,UAAU,CAACkH,MAAM,CAACtJ,CAAC,CAAC;MAC9B;MACA,IAAI,CAACL,SAAS,CAACK,CAAC,EAAEyB,KAAK,CAAC2C,UAAU,CAAC,EAC/BpE,CAAC,CAACuJ,UAAU,CAAChH,OAAO,CAAC,UAAUiH,MAAM,EAAE;QAAE,OAAO/H,KAAK,CAACsH,OAAO,CAACS,MAAM,CAAC;MAAE,CAAC,CAAC;IACjF,CAAC;EACL;EACAhI,cAAc,CAACpB,SAAS,CAACqJ,IAAI,GAAG,UAAUC,OAAO,EAAE;IAC/C,IAAIjI,KAAK,GAAG,IAAI;IAChB,CACI,YAAY,EACZ,YAAY,EACZ,eAAe,EACf,eAAe,EACf,kBAAkB,EAClB,kBAAkB,EAClB,kBAAkB,EAClB,YAAY,EACZ,aAAa,EACb,cAAc,EACd,cAAc,EACd,gBAAgB,EAChB,KAAK,EACL,QAAQ,EACR,eAAe,EACf,kBAAkB,EAClB,eAAe,CAClB,CAACc,OAAO,CAAC,UAAUoH,GAAG,EAAE;MACrBlI,KAAK,CAACkI,GAAG,CAAC,GAAGD,OAAO,CAACC,GAAG,CAAC;IAC7B,CAAC,CAAC;EACN,CAAC;EACDnI,cAAc,CAACpB,SAAS,CAACwJ,MAAM,GAAG,YAAY;IAC1C,IAAI,CAAClI,MAAM,GAAG,IAAI;IAClB,IAAI,CAACmI,aAAa,CAACD,MAAM,CAAC,CAAC;EAC/B,CAAC;EACDpI,cAAc,CAACpB,SAAS,CAAC0J,QAAQ,GAAG,YAAY;IAC5C,IAAI,CAACpI,MAAM,GAAG,KAAK;IACnB,IAAI,CAACmI,aAAa,CAACC,QAAQ,CAAC,CAAC;IAC7B,IAAI,CAACrH,IAAI,CAAC,CAAC;EACf,CAAC;EACDjB,cAAc,CAACpB,SAAS,CAAC2J,QAAQ,GAAG,YAAY;IAC5C,OAAO,IAAI,CAACrI,MAAM;EACtB,CAAC;EACDF,cAAc,CAACpB,SAAS,CAAC4J,IAAI,GAAG,YAAY;IACxC,IAAI,CAACrI,MAAM,GAAG,IAAI;IAClB,IAAI,CAACkI,aAAa,CAACG,IAAI,CAAC,CAAC;EAC7B,CAAC;EACDxI,cAAc,CAACpB,SAAS,CAAC6J,MAAM,GAAG,YAAY;IAC1C,IAAI,CAACtI,MAAM,GAAG,KAAK;IACnB,IAAI,CAACkI,aAAa,CAACI,MAAM,CAAC,CAAC;IAC3B,IAAI,CAACxH,IAAI,CAAC,CAAC;EACf,CAAC;EACDjB,cAAc,CAACpB,SAAS,CAAC8J,KAAK,GAAG,YAAY;IACzC,IAAI,CAAC9E,gBAAgB,CAAC8E,KAAK,CAAC,CAAC;IAC7B,IAAI,CAACL,aAAa,CAACK,KAAK,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO1I,cAAc;AACzB,CAAC,CAAC,CAAE;AACJ,SAAS0H,UAAUA,CAACiB,OAAO,EAAEnK,CAAC,EAAE;EAC5BmK,OAAO,CAACb,MAAM,CAACtJ,CAAC,CAAC;EACjBA,CAAC,CAACuJ,UAAU,CAAChH,OAAO,CAAC,UAAUiH,MAAM,EAAE;IAAE,OAAON,UAAU,CAACiB,OAAO,EAAEX,MAAM,CAAC;EAAE,CAAC,CAAC;AACnF;AACA,SAASvD,eAAeA,CAACnE,OAAO,EAAE9B,CAAC,EAAEmD,MAAM,EAAE;EACzC,IAAIc,UAAU,GAAGjE,CAAC,CAACiE,UAAU;EAC7B,IAAI,CAACA,UAAU,EAAE;IACb,OAAO,KAAK;EAChB;EACA,IAAI5C,QAAQ,GAAG8B,MAAM,CAACC,KAAK,CAACa,UAAU,CAAC;EACvC,IAAInC,OAAO,CAACsI,IAAI,CAAC,UAAUC,CAAC,EAAE;IAAE,OAAOA,CAAC,CAACjJ,EAAE,KAAKC,QAAQ;EAAE,CAAC,CAAC,EAAE;IAC1D,OAAO,IAAI;EACf;EACA,OAAO4E,eAAe,CAACnE,OAAO,EAAEmC,UAAU,EAAEd,MAAM,CAAC;AACvD;AACA,SAASoD,eAAeA,CAAC+D,GAAG,EAAEtK,CAAC,EAAE;EAC7B,IAAIiE,UAAU,GAAGjE,CAAC,CAACiE,UAAU;EAC7B,IAAI,CAACA,UAAU,EAAE;IACb,OAAO,KAAK;EAChB;EACA,IAAIqG,GAAG,CAACpE,GAAG,CAACjC,UAAU,CAAC,EAAE;IACrB,OAAO,IAAI;EACf;EACA,OAAOsC,eAAe,CAAC+D,GAAG,EAAErG,UAAU,CAAC;AAC3C;AAEA,eAAezC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}