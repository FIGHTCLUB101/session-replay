{"ast":null,"code":"import { EventType, IncrementalSource } from '../types.js';\nvar Timer = function () {\n  function Timer(actions, speed) {\n    if (actions === void 0) {\n      actions = [];\n    }\n    this.timeOffset = 0;\n    this.raf = null;\n    this.actions = actions;\n    this.speed = speed;\n  }\n  Timer.prototype.addAction = function (action) {\n    var index = this.findActionIndex(action);\n    this.actions.splice(index, 0, action);\n  };\n  Timer.prototype.addActions = function (actions) {\n    this.actions = this.actions.concat(actions);\n  };\n  Timer.prototype.start = function () {\n    this.timeOffset = 0;\n    var lastTimestamp = performance.now();\n    var actions = this.actions;\n    var self = this;\n    function check() {\n      var time = performance.now();\n      self.timeOffset += (time - lastTimestamp) * self.speed;\n      lastTimestamp = time;\n      while (actions.length) {\n        var action = actions[0];\n        if (self.timeOffset >= action.delay) {\n          actions.shift();\n          action.doAction();\n        } else {\n          break;\n        }\n      }\n      if (actions.length > 0 || self.liveMode) {\n        self.raf = requestAnimationFrame(check);\n      }\n    }\n    this.raf = requestAnimationFrame(check);\n  };\n  Timer.prototype.clear = function () {\n    if (this.raf) {\n      cancelAnimationFrame(this.raf);\n      this.raf = null;\n    }\n    this.actions.length = 0;\n  };\n  Timer.prototype.setSpeed = function (speed) {\n    this.speed = speed;\n  };\n  Timer.prototype.toggleLiveMode = function (mode) {\n    this.liveMode = mode;\n  };\n  Timer.prototype.isActive = function () {\n    return this.raf !== null;\n  };\n  Timer.prototype.findActionIndex = function (action) {\n    var start = 0;\n    var end = this.actions.length - 1;\n    while (start <= end) {\n      var mid = Math.floor((start + end) / 2);\n      if (this.actions[mid].delay < action.delay) {\n        start = mid + 1;\n      } else if (this.actions[mid].delay > action.delay) {\n        end = mid - 1;\n      } else {\n        return mid + 1;\n      }\n    }\n    return start;\n  };\n  return Timer;\n}();\nfunction addDelay(event, baselineTime) {\n  if (event.type === EventType.IncrementalSnapshot && event.data.source === IncrementalSource.MouseMove) {\n    var firstOffset = event.data.positions[0].timeOffset;\n    var firstTimestamp = event.timestamp + firstOffset;\n    event.delay = firstTimestamp - baselineTime;\n    return firstTimestamp - baselineTime;\n  }\n  event.delay = event.timestamp - baselineTime;\n  return event.delay;\n}\nexport { Timer, addDelay };","map":{"version":3,"names":["EventType","IncrementalSource","Timer","actions","speed","timeOffset","raf","prototype","addAction","action","index","findActionIndex","splice","addActions","concat","start","lastTimestamp","performance","now","self","check","time","length","delay","shift","doAction","liveMode","requestAnimationFrame","clear","cancelAnimationFrame","setSpeed","toggleLiveMode","mode","isActive","end","mid","Math","floor","addDelay","event","baselineTime","type","IncrementalSnapshot","data","source","MouseMove","firstOffset","positions","firstTimestamp","timestamp"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/timer.js"],"sourcesContent":["import { EventType, IncrementalSource } from '../types.js';\n\nvar Timer = (function () {\n    function Timer(actions, speed) {\n        if (actions === void 0) { actions = []; }\n        this.timeOffset = 0;\n        this.raf = null;\n        this.actions = actions;\n        this.speed = speed;\n    }\n    Timer.prototype.addAction = function (action) {\n        var index = this.findActionIndex(action);\n        this.actions.splice(index, 0, action);\n    };\n    Timer.prototype.addActions = function (actions) {\n        this.actions = this.actions.concat(actions);\n    };\n    Timer.prototype.start = function () {\n        this.timeOffset = 0;\n        var lastTimestamp = performance.now();\n        var actions = this.actions;\n        var self = this;\n        function check() {\n            var time = performance.now();\n            self.timeOffset += (time - lastTimestamp) * self.speed;\n            lastTimestamp = time;\n            while (actions.length) {\n                var action = actions[0];\n                if (self.timeOffset >= action.delay) {\n                    actions.shift();\n                    action.doAction();\n                }\n                else {\n                    break;\n                }\n            }\n            if (actions.length > 0 || self.liveMode) {\n                self.raf = requestAnimationFrame(check);\n            }\n        }\n        this.raf = requestAnimationFrame(check);\n    };\n    Timer.prototype.clear = function () {\n        if (this.raf) {\n            cancelAnimationFrame(this.raf);\n            this.raf = null;\n        }\n        this.actions.length = 0;\n    };\n    Timer.prototype.setSpeed = function (speed) {\n        this.speed = speed;\n    };\n    Timer.prototype.toggleLiveMode = function (mode) {\n        this.liveMode = mode;\n    };\n    Timer.prototype.isActive = function () {\n        return this.raf !== null;\n    };\n    Timer.prototype.findActionIndex = function (action) {\n        var start = 0;\n        var end = this.actions.length - 1;\n        while (start <= end) {\n            var mid = Math.floor((start + end) / 2);\n            if (this.actions[mid].delay < action.delay) {\n                start = mid + 1;\n            }\n            else if (this.actions[mid].delay > action.delay) {\n                end = mid - 1;\n            }\n            else {\n                return mid + 1;\n            }\n        }\n        return start;\n    };\n    return Timer;\n}());\nfunction addDelay(event, baselineTime) {\n    if (event.type === EventType.IncrementalSnapshot &&\n        event.data.source === IncrementalSource.MouseMove) {\n        var firstOffset = event.data.positions[0].timeOffset;\n        var firstTimestamp = event.timestamp + firstOffset;\n        event.delay = firstTimestamp - baselineTime;\n        return firstTimestamp - baselineTime;\n    }\n    event.delay = event.timestamp - baselineTime;\n    return event.delay;\n}\n\nexport { Timer, addDelay };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}