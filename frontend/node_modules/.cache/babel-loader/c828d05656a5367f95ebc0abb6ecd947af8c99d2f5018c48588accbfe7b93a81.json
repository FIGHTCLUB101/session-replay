{"ast":null,"code":"var NodeType;\n(function (NodeType) {\n  NodeType[NodeType[\"Document\"] = 0] = \"Document\";\n  NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\n  NodeType[NodeType[\"Element\"] = 2] = \"Element\";\n  NodeType[NodeType[\"Text\"] = 3] = \"Text\";\n  NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\n  NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\n})(NodeType || (NodeType = {}));\nfunction isElement(n) {\n  return n.nodeType === n.ELEMENT_NODE;\n}\nfunction isShadowRoot(n) {\n  var _a;\n  var host = (_a = n) === null || _a === void 0 ? void 0 : _a.host;\n  return Boolean(host && host.shadowRoot && host.shadowRoot === n);\n}\nfunction maskInputValue(_a) {\n  var maskInputOptions = _a.maskInputOptions,\n    tagName = _a.tagName,\n    type = _a.type,\n    value = _a.value,\n    maskInputFn = _a.maskInputFn;\n  var text = value || '';\n  if (maskInputOptions[tagName.toLowerCase()] || maskInputOptions[type]) {\n    if (maskInputFn) {\n      text = maskInputFn(text);\n    } else {\n      text = '*'.repeat(text.length);\n    }\n  }\n  return text;\n}\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\nfunction is2DCanvasBlank(canvas) {\n  var ctx = canvas.getContext('2d');\n  if (!ctx) return true;\n  var chunkSize = 50;\n  for (var x = 0; x < canvas.width; x += chunkSize) {\n    for (var y = 0; y < canvas.height; y += chunkSize) {\n      var getImageData = ctx.getImageData;\n      var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData ? getImageData[ORIGINAL_ATTRIBUTE_NAME] : getImageData;\n      var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\n      if (pixelBuffer.some(function (pixel) {\n        return pixel !== 0;\n      })) return false;\n    }\n  }\n  return true;\n}\nvar _id = 1;\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\nvar IGNORED_NODE = -2;\nfunction genId() {\n  return _id++;\n}\nfunction getValidTagName(element) {\n  if (element instanceof HTMLFormElement) {\n    return 'form';\n  }\n  var processedTagName = element.tagName.toLowerCase().trim();\n  if (tagNameRegex.test(processedTagName)) {\n    return 'div';\n  }\n  return processedTagName;\n}\nfunction getCssRulesString(s) {\n  try {\n    var rules = s.rules || s.cssRules;\n    return rules ? Array.from(rules).map(getCssRuleString).join('') : null;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getCssRuleString(rule) {\n  var cssStringified = rule.cssText;\n  if (isCSSImportRule(rule)) {\n    try {\n      cssStringified = getCssRulesString(rule.styleSheet) || cssStringified;\n    } catch (_a) {}\n  }\n  return cssStringified;\n}\nfunction isCSSImportRule(rule) {\n  return 'styleSheet' in rule;\n}\nfunction stringifyStyleSheet(sheet) {\n  return sheet.cssRules ? Array.from(sheet.cssRules).map(function (rule) {\n    return rule.cssText || '';\n  }).join('') : '';\n}\nfunction extractOrigin(url) {\n  var origin = '';\n  if (url.indexOf('//') > -1) {\n    origin = url.split('/').slice(0, 3).join('/');\n  } else {\n    origin = url.split('/')[0];\n  }\n  origin = origin.split('?')[0];\n  return origin;\n}\nvar canvasService;\nvar canvasCtx;\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\nfunction absoluteToStylesheet(cssText, href) {\n  return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\n    var filePath = path1 || path2 || path3;\n    var maybeQuote = quote1 || quote2 || '';\n    if (!filePath) {\n      return origin;\n    }\n    if (!RELATIVE_PATH.test(filePath)) {\n      return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n    }\n    if (DATA_URI.test(filePath)) {\n      return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n    }\n    if (filePath[0] === '/') {\n      return \"url(\" + maybeQuote + (extractOrigin(href) + filePath) + maybeQuote + \")\";\n    }\n    var stack = href.split('/');\n    var parts = filePath.split('/');\n    stack.pop();\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n      var part = parts_1[_i];\n      if (part === '.') {\n        continue;\n      } else if (part === '..') {\n        stack.pop();\n      } else {\n        stack.push(part);\n      }\n    }\n    return \"url(\" + maybeQuote + stack.join('/') + maybeQuote + \")\";\n  });\n}\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\n  if (attributeValue.trim() === '') {\n    return attributeValue;\n  }\n  var pos = 0;\n  function collectCharacters(regEx) {\n    var chars;\n    var match = regEx.exec(attributeValue.substring(pos));\n    if (match) {\n      chars = match[0];\n      pos += chars.length;\n      return chars;\n    }\n    return '';\n  }\n  var output = [];\n  while (true) {\n    collectCharacters(SRCSET_COMMAS_OR_SPACES);\n    if (pos >= attributeValue.length) {\n      break;\n    }\n    var url = collectCharacters(SRCSET_NOT_SPACES);\n    if (url.slice(-1) === ',') {\n      url = absoluteToDoc(doc, url.substring(0, url.length - 1));\n      output.push(url);\n    } else {\n      var descriptorsStr = '';\n      url = absoluteToDoc(doc, url);\n      var inParens = false;\n      while (true) {\n        var c = attributeValue.charAt(pos);\n        if (c === '') {\n          output.push((url + descriptorsStr).trim());\n          break;\n        } else if (!inParens) {\n          if (c === ',') {\n            pos += 1;\n            output.push((url + descriptorsStr).trim());\n            break;\n          } else if (c === '(') {\n            inParens = true;\n          }\n        } else {\n          if (c === ')') {\n            inParens = false;\n          }\n        }\n        descriptorsStr += c;\n        pos += 1;\n      }\n    }\n  }\n  return output.join(', ');\n}\nfunction absoluteToDoc(doc, attributeValue) {\n  if (!attributeValue || attributeValue.trim() === '') {\n    return attributeValue;\n  }\n  var a = doc.createElement('a');\n  a.href = attributeValue;\n  return a.href;\n}\nfunction isSVGElement(el) {\n  return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\n}\nfunction getHref() {\n  var a = document.createElement('a');\n  a.href = '';\n  return a.href;\n}\nfunction transformAttribute(doc, tagName, name, value) {\n  if (name === 'src' || name === 'href' && value) {\n    return absoluteToDoc(doc, value);\n  } else if (name === 'xlink:href' && value && value[0] !== '#') {\n    return absoluteToDoc(doc, value);\n  } else if (name === 'background' && value && (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\n    return absoluteToDoc(doc, value);\n  } else if (name === 'srcset' && value) {\n    return getAbsoluteSrcsetString(doc, value);\n  } else if (name === 'style' && value) {\n    return absoluteToStylesheet(value, getHref());\n  } else if (tagName === 'object' && name === 'data' && value) {\n    return absoluteToDoc(doc, value);\n  } else {\n    return value;\n  }\n}\nfunction _isBlockedElement(element, blockClass, blockSelector) {\n  if (typeof blockClass === 'string') {\n    if (element.classList.contains(blockClass)) {\n      return true;\n    }\n  } else {\n    for (var eIndex = 0; eIndex < element.classList.length; eIndex++) {\n      var className = element.classList[eIndex];\n      if (blockClass.test(className)) {\n        return true;\n      }\n    }\n  }\n  if (blockSelector) {\n    return element.matches(blockSelector);\n  }\n  return false;\n}\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\n  if (!node) {\n    return false;\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    if (typeof maskTextClass === 'string') {\n      if (node.classList.contains(maskTextClass)) {\n        return true;\n      }\n    } else {\n      for (var eIndex = 0; eIndex < node.classList.length; eIndex++) {\n        var className = node.classList[eIndex];\n        if (maskTextClass.test(className)) {\n          return true;\n        }\n      }\n    }\n    if (maskTextSelector) {\n      if (node.matches(maskTextSelector)) {\n        return true;\n      }\n    }\n    return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n  }\n  if (node.nodeType === node.TEXT_NODE) {\n    return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n  }\n  return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n}\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\n  var win = iframeEl.contentWindow;\n  if (!win) {\n    return;\n  }\n  var fired = false;\n  var readyState;\n  try {\n    readyState = win.document.readyState;\n  } catch (error) {\n    return;\n  }\n  if (readyState !== 'complete') {\n    var timer_1 = setTimeout(function () {\n      if (!fired) {\n        listener();\n        fired = true;\n      }\n    }, iframeLoadTimeout);\n    iframeEl.addEventListener('load', function () {\n      clearTimeout(timer_1);\n      fired = true;\n      listener();\n    });\n    return;\n  }\n  var blankUrl = 'about:blank';\n  if (win.location.href !== blankUrl || iframeEl.src === blankUrl || iframeEl.src === '') {\n    setTimeout(listener, 0);\n    return;\n  }\n  iframeEl.addEventListener('load', listener);\n}\nfunction serializeNode(n, options) {\n  var _a;\n  var doc = options.doc,\n    blockClass = options.blockClass,\n    blockSelector = options.blockSelector,\n    maskTextClass = options.maskTextClass,\n    maskTextSelector = options.maskTextSelector,\n    inlineStylesheet = options.inlineStylesheet,\n    _b = options.maskInputOptions,\n    maskInputOptions = _b === void 0 ? {} : _b,\n    maskTextFn = options.maskTextFn,\n    maskInputFn = options.maskInputFn,\n    _c = options.dataURLOptions,\n    dataURLOptions = _c === void 0 ? {} : _c,\n    inlineImages = options.inlineImages,\n    recordCanvas = options.recordCanvas,\n    keepIframeSrcFn = options.keepIframeSrcFn;\n  var rootId;\n  if (doc.__sn) {\n    var docId = doc.__sn.id;\n    rootId = docId === 1 ? undefined : docId;\n  }\n  switch (n.nodeType) {\n    case n.DOCUMENT_NODE:\n      if (n.compatMode !== 'CSS1Compat') {\n        return {\n          type: NodeType.Document,\n          childNodes: [],\n          compatMode: n.compatMode,\n          rootId: rootId\n        };\n      } else {\n        return {\n          type: NodeType.Document,\n          childNodes: [],\n          rootId: rootId\n        };\n      }\n    case n.DOCUMENT_TYPE_NODE:\n      return {\n        type: NodeType.DocumentType,\n        name: n.name,\n        publicId: n.publicId,\n        systemId: n.systemId,\n        rootId: rootId\n      };\n    case n.ELEMENT_NODE:\n      var needBlock = _isBlockedElement(n, blockClass, blockSelector);\n      var tagName = getValidTagName(n);\n      var attributes_1 = {};\n      for (var _i = 0, _d = Array.from(n.attributes); _i < _d.length; _i++) {\n        var _e = _d[_i],\n          name_1 = _e.name,\n          value = _e.value;\n        attributes_1[name_1] = transformAttribute(doc, tagName, name_1, value);\n      }\n      if (tagName === 'link' && inlineStylesheet) {\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) {\n          return s.href === n.href;\n        });\n        var cssText = null;\n        if (stylesheet) {\n          cssText = getCssRulesString(stylesheet);\n        }\n        if (cssText) {\n          delete attributes_1.rel;\n          delete attributes_1.href;\n          attributes_1._cssText = absoluteToStylesheet(cssText, stylesheet.href);\n        }\n      }\n      if (tagName === 'style' && n.sheet && !(n.innerText || n.textContent || '').trim().length) {\n        var cssText = getCssRulesString(n.sheet);\n        if (cssText) {\n          attributes_1._cssText = absoluteToStylesheet(cssText, getHref());\n        }\n      }\n      if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\n        var value = n.value;\n        if (attributes_1.type !== 'radio' && attributes_1.type !== 'checkbox' && attributes_1.type !== 'submit' && attributes_1.type !== 'button' && value) {\n          attributes_1.value = maskInputValue({\n            type: attributes_1.type,\n            tagName: tagName,\n            value: value,\n            maskInputOptions: maskInputOptions,\n            maskInputFn: maskInputFn\n          });\n        } else if (n.checked) {\n          attributes_1.checked = n.checked;\n        }\n      }\n      if (tagName === 'option') {\n        if (n.selected && !maskInputOptions['select']) {\n          attributes_1.selected = true;\n        } else {\n          delete attributes_1.selected;\n        }\n      }\n      if (tagName === 'canvas' && recordCanvas) {\n        if (n.__context === '2d') {\n          if (!is2DCanvasBlank(n)) {\n            attributes_1.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n          }\n        } else if (!('__context' in n)) {\n          var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n          var blankCanvas = document.createElement('canvas');\n          blankCanvas.width = n.width;\n          blankCanvas.height = n.height;\n          var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n          if (canvasDataURL !== blankCanvasDataURL) {\n            attributes_1.rr_dataURL = canvasDataURL;\n          }\n        }\n      }\n      if (tagName === 'img' && inlineImages) {\n        if (!canvasService) {\n          canvasService = doc.createElement('canvas');\n          canvasCtx = canvasService.getContext('2d');\n        }\n        var image_1 = n;\n        var oldValue_1 = image_1.crossOrigin;\n        image_1.crossOrigin = 'anonymous';\n        var recordInlineImage = function () {\n          try {\n            canvasService.width = image_1.naturalWidth;\n            canvasService.height = image_1.naturalHeight;\n            canvasCtx.drawImage(image_1, 0, 0);\n            attributes_1.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n          } catch (err) {\n            console.warn(\"Cannot inline img src=\" + image_1.currentSrc + \"! Error: \" + err);\n          }\n          oldValue_1 ? attributes_1.crossOrigin = oldValue_1 : delete attributes_1.crossOrigin;\n        };\n        if (image_1.complete && image_1.naturalWidth !== 0) recordInlineImage();else image_1.onload = recordInlineImage;\n      }\n      if (tagName === 'audio' || tagName === 'video') {\n        attributes_1.rr_mediaState = n.paused ? 'paused' : 'played';\n        attributes_1.rr_mediaCurrentTime = n.currentTime;\n      }\n      if (n.scrollLeft) {\n        attributes_1.rr_scrollLeft = n.scrollLeft;\n      }\n      if (n.scrollTop) {\n        attributes_1.rr_scrollTop = n.scrollTop;\n      }\n      if (needBlock) {\n        var _f = n.getBoundingClientRect(),\n          width = _f.width,\n          height = _f.height;\n        attributes_1 = {\n          \"class\": attributes_1[\"class\"],\n          rr_width: width + \"px\",\n          rr_height: height + \"px\"\n        };\n      }\n      if (tagName === 'iframe' && !keepIframeSrcFn(attributes_1.src)) {\n        if (!n.contentDocument) {\n          attributes_1.rr_src = attributes_1.src;\n        }\n        delete attributes_1.src;\n      }\n      return {\n        type: NodeType.Element,\n        tagName: tagName,\n        attributes: attributes_1,\n        childNodes: [],\n        isSVG: isSVGElement(n) || undefined,\n        needBlock: needBlock,\n        rootId: rootId\n      };\n    case n.TEXT_NODE:\n      var parentTagName = n.parentNode && n.parentNode.tagName;\n      var textContent = n.textContent;\n      var isStyle = parentTagName === 'STYLE' ? true : undefined;\n      var isScript = parentTagName === 'SCRIPT' ? true : undefined;\n      if (isStyle && textContent) {\n        try {\n          if (n.nextSibling || n.previousSibling) {} else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\n            textContent = stringifyStyleSheet(n.parentNode.sheet);\n          }\n        } catch (err) {\n          console.warn(\"Cannot get CSS styles from text's parentNode. Error: \" + err, n);\n        }\n        textContent = absoluteToStylesheet(textContent, getHref());\n      }\n      if (isScript) {\n        textContent = 'SCRIPT_PLACEHOLDER';\n      }\n      if (!isStyle && !isScript && needMaskingText(n, maskTextClass, maskTextSelector) && textContent) {\n        textContent = maskTextFn ? maskTextFn(textContent) : textContent.replace(/[\\S]/g, '*');\n      }\n      return {\n        type: NodeType.Text,\n        textContent: textContent || '',\n        isStyle: isStyle,\n        rootId: rootId\n      };\n    case n.CDATA_SECTION_NODE:\n      return {\n        type: NodeType.CDATA,\n        textContent: '',\n        rootId: rootId\n      };\n    case n.COMMENT_NODE:\n      return {\n        type: NodeType.Comment,\n        textContent: n.textContent || '',\n        rootId: rootId\n      };\n    default:\n      return false;\n  }\n}\nfunction lowerIfExists(maybeAttr) {\n  if (maybeAttr === undefined) {\n    return '';\n  } else {\n    return maybeAttr.toLowerCase();\n  }\n}\nfunction slimDOMExcluded(sn, slimDOMOptions) {\n  if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\n    return true;\n  } else if (sn.type === NodeType.Element) {\n    if (slimDOMOptions.script && (sn.tagName === 'script' || sn.tagName === 'link' && sn.attributes.rel === 'preload' && sn.attributes.as === 'script' || sn.tagName === 'link' && sn.attributes.rel === 'prefetch' && typeof sn.attributes.href === 'string' && sn.attributes.href.endsWith('.js'))) {\n      return true;\n    } else if (slimDOMOptions.headFavicon && (sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon' || sn.tagName === 'meta' && (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) || lowerIfExists(sn.attributes.name) === 'application-name' || lowerIfExists(sn.attributes.rel) === 'icon' || lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' || lowerIfExists(sn.attributes.rel) === 'shortcut icon'))) {\n      return true;\n    } else if (sn.tagName === 'meta') {\n      if (slimDOMOptions.headMetaDescKeywords && lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\n        return true;\n      } else if (slimDOMOptions.headMetaSocial && (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) || lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) || lowerIfExists(sn.attributes.name) === 'pinterest')) {\n        return true;\n      } else if (slimDOMOptions.headMetaRobots && (lowerIfExists(sn.attributes.name) === 'robots' || lowerIfExists(sn.attributes.name) === 'googlebot' || lowerIfExists(sn.attributes.name) === 'bingbot')) {\n        return true;\n      } else if (slimDOMOptions.headMetaHttpEquiv && sn.attributes['http-equiv'] !== undefined) {\n        return true;\n      } else if (slimDOMOptions.headMetaAuthorship && (lowerIfExists(sn.attributes.name) === 'author' || lowerIfExists(sn.attributes.name) === 'generator' || lowerIfExists(sn.attributes.name) === 'framework' || lowerIfExists(sn.attributes.name) === 'publisher' || lowerIfExists(sn.attributes.name) === 'progid' || lowerIfExists(sn.attributes.property).match(/^article:/) || lowerIfExists(sn.attributes.property).match(/^product:/))) {\n        return true;\n      } else if (slimDOMOptions.headMetaVerification && (lowerIfExists(sn.attributes.name) === 'google-site-verification' || lowerIfExists(sn.attributes.name) === 'yandex-verification' || lowerIfExists(sn.attributes.name) === 'csrf-token' || lowerIfExists(sn.attributes.name) === 'p:domain_verify' || lowerIfExists(sn.attributes.name) === 'verify-v1' || lowerIfExists(sn.attributes.name) === 'verification' || lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nfunction serializeNodeWithId(n, options) {\n  var doc = options.doc,\n    map = options.map,\n    blockClass = options.blockClass,\n    blockSelector = options.blockSelector,\n    maskTextClass = options.maskTextClass,\n    maskTextSelector = options.maskTextSelector,\n    _a = options.skipChild,\n    skipChild = _a === void 0 ? false : _a,\n    _b = options.inlineStylesheet,\n    inlineStylesheet = _b === void 0 ? true : _b,\n    _c = options.maskInputOptions,\n    maskInputOptions = _c === void 0 ? {} : _c,\n    maskTextFn = options.maskTextFn,\n    maskInputFn = options.maskInputFn,\n    slimDOMOptions = options.slimDOMOptions,\n    _d = options.dataURLOptions,\n    dataURLOptions = _d === void 0 ? {} : _d,\n    _e = options.inlineImages,\n    inlineImages = _e === void 0 ? false : _e,\n    _f = options.recordCanvas,\n    recordCanvas = _f === void 0 ? false : _f,\n    onSerialize = options.onSerialize,\n    onIframeLoad = options.onIframeLoad,\n    _g = options.iframeLoadTimeout,\n    iframeLoadTimeout = _g === void 0 ? 5000 : _g,\n    _h = options.keepIframeSrcFn,\n    keepIframeSrcFn = _h === void 0 ? function () {\n      return false;\n    } : _h;\n  var _j = options.preserveWhiteSpace,\n    preserveWhiteSpace = _j === void 0 ? true : _j;\n  var _serializedNode = serializeNode(n, {\n    doc: doc,\n    blockClass: blockClass,\n    blockSelector: blockSelector,\n    maskTextClass: maskTextClass,\n    maskTextSelector: maskTextSelector,\n    inlineStylesheet: inlineStylesheet,\n    maskInputOptions: maskInputOptions,\n    maskTextFn: maskTextFn,\n    maskInputFn: maskInputFn,\n    dataURLOptions: dataURLOptions,\n    inlineImages: inlineImages,\n    recordCanvas: recordCanvas,\n    keepIframeSrcFn: keepIframeSrcFn\n  });\n  if (!_serializedNode) {\n    console.warn(n, 'not serialized');\n    return null;\n  }\n  var id;\n  if ('__sn' in n) {\n    id = n.__sn.id;\n  } else if (slimDOMExcluded(_serializedNode, slimDOMOptions) || !preserveWhiteSpace && _serializedNode.type === NodeType.Text && !_serializedNode.isStyle && !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length) {\n    id = IGNORED_NODE;\n  } else {\n    id = genId();\n  }\n  var serializedNode = Object.assign(_serializedNode, {\n    id: id\n  });\n  n.__sn = serializedNode;\n  if (id === IGNORED_NODE) {\n    return null;\n  }\n  map[id] = n;\n  if (onSerialize) {\n    onSerialize(n);\n  }\n  var recordChild = !skipChild;\n  if (serializedNode.type === NodeType.Element) {\n    recordChild = recordChild && !serializedNode.needBlock;\n    delete serializedNode.needBlock;\n    if (n.shadowRoot) serializedNode.isShadowHost = true;\n  }\n  if ((serializedNode.type === NodeType.Document || serializedNode.type === NodeType.Element) && recordChild) {\n    if (slimDOMOptions.headWhitespace && _serializedNode.type === NodeType.Element && _serializedNode.tagName === 'head') {\n      preserveWhiteSpace = false;\n    }\n    var bypassOptions = {\n      doc: doc,\n      map: map,\n      blockClass: blockClass,\n      blockSelector: blockSelector,\n      maskTextClass: maskTextClass,\n      maskTextSelector: maskTextSelector,\n      skipChild: skipChild,\n      inlineStylesheet: inlineStylesheet,\n      maskInputOptions: maskInputOptions,\n      maskTextFn: maskTextFn,\n      maskInputFn: maskInputFn,\n      slimDOMOptions: slimDOMOptions,\n      dataURLOptions: dataURLOptions,\n      inlineImages: inlineImages,\n      recordCanvas: recordCanvas,\n      preserveWhiteSpace: preserveWhiteSpace,\n      onSerialize: onSerialize,\n      onIframeLoad: onIframeLoad,\n      iframeLoadTimeout: iframeLoadTimeout,\n      keepIframeSrcFn: keepIframeSrcFn\n    };\n    for (var _i = 0, _k = Array.from(n.childNodes); _i < _k.length; _i++) {\n      var childN = _k[_i];\n      var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n      if (serializedChildNode) {\n        serializedNode.childNodes.push(serializedChildNode);\n      }\n    }\n    if (isElement(n) && n.shadowRoot) {\n      for (var _l = 0, _m = Array.from(n.shadowRoot.childNodes); _l < _m.length; _l++) {\n        var childN = _m[_l];\n        var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n        if (serializedChildNode) {\n          serializedChildNode.isShadow = true;\n          serializedNode.childNodes.push(serializedChildNode);\n        }\n      }\n    }\n  }\n  if (n.parentNode && isShadowRoot(n.parentNode)) {\n    serializedNode.isShadow = true;\n  }\n  if (serializedNode.type === NodeType.Element && serializedNode.tagName === 'iframe') {\n    onceIframeLoaded(n, function () {\n      var iframeDoc = n.contentDocument;\n      if (iframeDoc && onIframeLoad) {\n        var serializedIframeNode = serializeNodeWithId(iframeDoc, {\n          doc: iframeDoc,\n          map: map,\n          blockClass: blockClass,\n          blockSelector: blockSelector,\n          maskTextClass: maskTextClass,\n          maskTextSelector: maskTextSelector,\n          skipChild: false,\n          inlineStylesheet: inlineStylesheet,\n          maskInputOptions: maskInputOptions,\n          maskTextFn: maskTextFn,\n          maskInputFn: maskInputFn,\n          slimDOMOptions: slimDOMOptions,\n          dataURLOptions: dataURLOptions,\n          inlineImages: inlineImages,\n          recordCanvas: recordCanvas,\n          preserveWhiteSpace: preserveWhiteSpace,\n          onSerialize: onSerialize,\n          onIframeLoad: onIframeLoad,\n          iframeLoadTimeout: iframeLoadTimeout,\n          keepIframeSrcFn: keepIframeSrcFn\n        });\n        if (serializedIframeNode) {\n          onIframeLoad(n, serializedIframeNode);\n        }\n      }\n    }, iframeLoadTimeout);\n  }\n  return serializedNode;\n}\nfunction snapshot(n, options) {\n  var _a = options || {},\n    _b = _a.blockClass,\n    blockClass = _b === void 0 ? 'rr-block' : _b,\n    _c = _a.blockSelector,\n    blockSelector = _c === void 0 ? null : _c,\n    _d = _a.maskTextClass,\n    maskTextClass = _d === void 0 ? 'rr-mask' : _d,\n    _e = _a.maskTextSelector,\n    maskTextSelector = _e === void 0 ? null : _e,\n    _f = _a.inlineStylesheet,\n    inlineStylesheet = _f === void 0 ? true : _f,\n    _g = _a.inlineImages,\n    inlineImages = _g === void 0 ? false : _g,\n    _h = _a.recordCanvas,\n    recordCanvas = _h === void 0 ? false : _h,\n    _j = _a.maskAllInputs,\n    maskAllInputs = _j === void 0 ? false : _j,\n    maskTextFn = _a.maskTextFn,\n    maskInputFn = _a.maskInputFn,\n    _k = _a.slimDOM,\n    slimDOM = _k === void 0 ? false : _k,\n    dataURLOptions = _a.dataURLOptions,\n    preserveWhiteSpace = _a.preserveWhiteSpace,\n    onSerialize = _a.onSerialize,\n    onIframeLoad = _a.onIframeLoad,\n    iframeLoadTimeout = _a.iframeLoadTimeout,\n    _l = _a.keepIframeSrcFn,\n    keepIframeSrcFn = _l === void 0 ? function () {\n      return false;\n    } : _l;\n  var idNodeMap = {};\n  var maskInputOptions = maskAllInputs === true ? {\n    color: true,\n    date: true,\n    'datetime-local': true,\n    email: true,\n    month: true,\n    number: true,\n    range: true,\n    search: true,\n    tel: true,\n    text: true,\n    time: true,\n    url: true,\n    week: true,\n    textarea: true,\n    select: true,\n    password: true\n  } : maskAllInputs === false ? {\n    password: true\n  } : maskAllInputs;\n  var slimDOMOptions = slimDOM === true || slimDOM === 'all' ? {\n    script: true,\n    comment: true,\n    headFavicon: true,\n    headWhitespace: true,\n    headMetaDescKeywords: slimDOM === 'all',\n    headMetaSocial: true,\n    headMetaRobots: true,\n    headMetaHttpEquiv: true,\n    headMetaAuthorship: true,\n    headMetaVerification: true\n  } : slimDOM === false ? {} : slimDOM;\n  return [serializeNodeWithId(n, {\n    doc: n,\n    map: idNodeMap,\n    blockClass: blockClass,\n    blockSelector: blockSelector,\n    maskTextClass: maskTextClass,\n    maskTextSelector: maskTextSelector,\n    skipChild: false,\n    inlineStylesheet: inlineStylesheet,\n    maskInputOptions: maskInputOptions,\n    maskTextFn: maskTextFn,\n    maskInputFn: maskInputFn,\n    slimDOMOptions: slimDOMOptions,\n    dataURLOptions: dataURLOptions,\n    inlineImages: inlineImages,\n    recordCanvas: recordCanvas,\n    preserveWhiteSpace: preserveWhiteSpace,\n    onSerialize: onSerialize,\n    onIframeLoad: onIframeLoad,\n    iframeLoadTimeout: iframeLoadTimeout,\n    keepIframeSrcFn: keepIframeSrcFn\n  }), idNodeMap];\n}\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\nfunction parse(css, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var lineno = 1;\n  var column = 1;\n  function updatePosition(str) {\n    var lines = str.match(/\\n/g);\n    if (lines) {\n      lineno += lines.length;\n    }\n    var i = str.lastIndexOf('\\n');\n    column = i === -1 ? column + str.length : str.length - i;\n  }\n  function position() {\n    var start = {\n      line: lineno,\n      column: column\n    };\n    return function (node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n  var Position = function () {\n    function Position(start) {\n      this.start = start;\n      this.end = {\n        line: lineno,\n        column: column\n      };\n      this.source = options.source;\n    }\n    return Position;\n  }();\n  Position.prototype.content = css;\n  var errorsList = [];\n  function error(msg) {\n    var err = new Error(options.source + ':' + lineno + ':' + column + ': ' + msg);\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = css;\n    if (options.silent) {\n      errorsList.push(err);\n    } else {\n      throw err;\n    }\n  }\n  function stylesheet() {\n    var rulesList = rules();\n    return {\n      type: 'stylesheet',\n      stylesheet: {\n        source: options.source,\n        rules: rulesList,\n        parsingErrors: errorsList\n      }\n    };\n  }\n  function open() {\n    return match(/^{\\s*/);\n  }\n  function close() {\n    return match(/^}/);\n  }\n  function rules() {\n    var node;\n    var rules = [];\n    whitespace();\n    comments(rules);\n    while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\n      if (node !== false) {\n        rules.push(node);\n        comments(rules);\n      }\n    }\n    return rules;\n  }\n  function match(re) {\n    var m = re.exec(css);\n    if (!m) {\n      return;\n    }\n    var str = m[0];\n    updatePosition(str);\n    css = css.slice(str.length);\n    return m;\n  }\n  function whitespace() {\n    match(/^\\s*/);\n  }\n  function comments(rules) {\n    if (rules === void 0) {\n      rules = [];\n    }\n    var c;\n    while (c = comment()) {\n      if (c !== false) {\n        rules.push(c);\n      }\n      c = comment();\n    }\n    return rules;\n  }\n  function comment() {\n    var pos = position();\n    if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\n      return;\n    }\n    var i = 2;\n    while ('' !== css.charAt(i) && ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\n      ++i;\n    }\n    i += 2;\n    if ('' === css.charAt(i - 1)) {\n      return error('End of comment missing');\n    }\n    var str = css.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    css = css.slice(i);\n    column += 2;\n    return pos({\n      type: 'comment',\n      comment: str\n    });\n  }\n  function selector() {\n    var m = match(/^([^{]+)/);\n    if (!m) {\n      return;\n    }\n    return trim(m[0]).replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '').replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\n      return m.replace(/,/g, '\\u200C');\n    }).split(/\\s*(?![^(]*\\)),\\s*/).map(function (s) {\n      return s.replace(/\\u200C/g, ',');\n    });\n  }\n  function declaration() {\n    var pos = position();\n    var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n    if (!propMatch) {\n      return;\n    }\n    var prop = trim(propMatch[0]);\n    if (!match(/^:\\s*/)) {\n      return error(\"property missing ':'\");\n    }\n    var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\n    var ret = pos({\n      type: 'declaration',\n      property: prop.replace(commentre, ''),\n      value: val ? trim(val[0]).replace(commentre, '') : ''\n    });\n    match(/^[;\\s]*/);\n    return ret;\n  }\n  function declarations() {\n    var decls = [];\n    if (!open()) {\n      return error(\"missing '{'\");\n    }\n    comments(decls);\n    var decl;\n    while (decl = declaration()) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n      decl = declaration();\n    }\n    if (!close()) {\n      return error(\"missing '}'\");\n    }\n    return decls;\n  }\n  function keyframe() {\n    var m;\n    var vals = [];\n    var pos = position();\n    while (m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/)) {\n      vals.push(m[1]);\n      match(/^,\\s*/);\n    }\n    if (!vals.length) {\n      return;\n    }\n    return pos({\n      type: 'keyframe',\n      values: vals,\n      declarations: declarations()\n    });\n  }\n  function atkeyframes() {\n    var pos = position();\n    var m = match(/^@([-\\w]+)?keyframes\\s*/);\n    if (!m) {\n      return;\n    }\n    var vendor = m[1];\n    m = match(/^([-\\w]+)\\s*/);\n    if (!m) {\n      return error('@keyframes missing name');\n    }\n    var name = m[1];\n    if (!open()) {\n      return error(\"@keyframes missing '{'\");\n    }\n    var frame;\n    var frames = comments();\n    while (frame = keyframe()) {\n      frames.push(frame);\n      frames = frames.concat(comments());\n    }\n    if (!close()) {\n      return error(\"@keyframes missing '}'\");\n    }\n    return pos({\n      type: 'keyframes',\n      name: name,\n      vendor: vendor,\n      keyframes: frames\n    });\n  }\n  function atsupports() {\n    var pos = position();\n    var m = match(/^@supports *([^{]+)/);\n    if (!m) {\n      return;\n    }\n    var supports = trim(m[1]);\n    if (!open()) {\n      return error(\"@supports missing '{'\");\n    }\n    var style = comments().concat(rules());\n    if (!close()) {\n      return error(\"@supports missing '}'\");\n    }\n    return pos({\n      type: 'supports',\n      supports: supports,\n      rules: style\n    });\n  }\n  function athost() {\n    var pos = position();\n    var m = match(/^@host\\s*/);\n    if (!m) {\n      return;\n    }\n    if (!open()) {\n      return error(\"@host missing '{'\");\n    }\n    var style = comments().concat(rules());\n    if (!close()) {\n      return error(\"@host missing '}'\");\n    }\n    return pos({\n      type: 'host',\n      rules: style\n    });\n  }\n  function atmedia() {\n    var pos = position();\n    var m = match(/^@media *([^{]+)/);\n    if (!m) {\n      return;\n    }\n    var media = trim(m[1]);\n    if (!open()) {\n      return error(\"@media missing '{'\");\n    }\n    var style = comments().concat(rules());\n    if (!close()) {\n      return error(\"@media missing '}'\");\n    }\n    return pos({\n      type: 'media',\n      media: media,\n      rules: style\n    });\n  }\n  function atcustommedia() {\n    var pos = position();\n    var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n    if (!m) {\n      return;\n    }\n    return pos({\n      type: 'custom-media',\n      name: trim(m[1]),\n      media: trim(m[2])\n    });\n  }\n  function atpage() {\n    var pos = position();\n    var m = match(/^@page */);\n    if (!m) {\n      return;\n    }\n    var sel = selector() || [];\n    if (!open()) {\n      return error(\"@page missing '{'\");\n    }\n    var decls = comments();\n    var decl;\n    while (decl = declaration()) {\n      decls.push(decl);\n      decls = decls.concat(comments());\n    }\n    if (!close()) {\n      return error(\"@page missing '}'\");\n    }\n    return pos({\n      type: 'page',\n      selectors: sel,\n      declarations: decls\n    });\n  }\n  function atdocument() {\n    var pos = position();\n    var m = match(/^@([-\\w]+)?document *([^{]+)/);\n    if (!m) {\n      return;\n    }\n    var vendor = trim(m[1]);\n    var doc = trim(m[2]);\n    if (!open()) {\n      return error(\"@document missing '{'\");\n    }\n    var style = comments().concat(rules());\n    if (!close()) {\n      return error(\"@document missing '}'\");\n    }\n    return pos({\n      type: 'document',\n      document: doc,\n      vendor: vendor,\n      rules: style\n    });\n  }\n  function atfontface() {\n    var pos = position();\n    var m = match(/^@font-face\\s*/);\n    if (!m) {\n      return;\n    }\n    if (!open()) {\n      return error(\"@font-face missing '{'\");\n    }\n    var decls = comments();\n    var decl;\n    while (decl = declaration()) {\n      decls.push(decl);\n      decls = decls.concat(comments());\n    }\n    if (!close()) {\n      return error(\"@font-face missing '}'\");\n    }\n    return pos({\n      type: 'font-face',\n      declarations: decls\n    });\n  }\n  var atimport = _compileAtrule('import');\n  var atcharset = _compileAtrule('charset');\n  var atnamespace = _compileAtrule('namespace');\n  function _compileAtrule(name) {\n    var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\n    return function () {\n      var pos = position();\n      var m = match(re);\n      if (!m) {\n        return;\n      }\n      var ret = {\n        type: name\n      };\n      ret[name] = m[1].trim();\n      return pos(ret);\n    };\n  }\n  function atrule() {\n    if (css[0] !== '@') {\n      return;\n    }\n    return atkeyframes() || atmedia() || atcustommedia() || atsupports() || atimport() || atcharset() || atnamespace() || atdocument() || atpage() || athost() || atfontface();\n  }\n  function rule() {\n    var pos = position();\n    var sel = selector();\n    if (!sel) {\n      return error('selector missing');\n    }\n    comments();\n    return pos({\n      type: 'rule',\n      selectors: sel,\n      declarations: declarations()\n    });\n  }\n  return addParent(stylesheet());\n}\nfunction trim(str) {\n  return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\n}\nfunction addParent(obj, parent) {\n  var isNode = obj && typeof obj.type === 'string';\n  var childParent = isNode ? obj : parent;\n  for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n    var k = _a[_i];\n    var value = obj[k];\n    if (Array.isArray(value)) {\n      value.forEach(function (v) {\n        addParent(v, childParent);\n      });\n    } else if (value && typeof value === 'object') {\n      addParent(value, childParent);\n    }\n  }\n  if (isNode) {\n    Object.defineProperty(obj, 'parent', {\n      configurable: true,\n      writable: true,\n      enumerable: false,\n      value: parent || null\n    });\n  }\n  return obj;\n}\nvar tagMap = {\n  script: 'noscript',\n  altglyph: 'altGlyph',\n  altglyphdef: 'altGlyphDef',\n  altglyphitem: 'altGlyphItem',\n  animatecolor: 'animateColor',\n  animatemotion: 'animateMotion',\n  animatetransform: 'animateTransform',\n  clippath: 'clipPath',\n  feblend: 'feBlend',\n  fecolormatrix: 'feColorMatrix',\n  fecomponenttransfer: 'feComponentTransfer',\n  fecomposite: 'feComposite',\n  feconvolvematrix: 'feConvolveMatrix',\n  fediffuselighting: 'feDiffuseLighting',\n  fedisplacementmap: 'feDisplacementMap',\n  fedistantlight: 'feDistantLight',\n  fedropshadow: 'feDropShadow',\n  feflood: 'feFlood',\n  fefunca: 'feFuncA',\n  fefuncb: 'feFuncB',\n  fefuncg: 'feFuncG',\n  fefuncr: 'feFuncR',\n  fegaussianblur: 'feGaussianBlur',\n  feimage: 'feImage',\n  femerge: 'feMerge',\n  femergenode: 'feMergeNode',\n  femorphology: 'feMorphology',\n  feoffset: 'feOffset',\n  fepointlight: 'fePointLight',\n  fespecularlighting: 'feSpecularLighting',\n  fespotlight: 'feSpotLight',\n  fetile: 'feTile',\n  feturbulence: 'feTurbulence',\n  foreignobject: 'foreignObject',\n  glyphref: 'glyphRef',\n  lineargradient: 'linearGradient',\n  radialgradient: 'radialGradient'\n};\nfunction getTagName(n) {\n  var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\n  if (tagName === 'link' && n.attributes._cssText) {\n    tagName = 'style';\n  }\n  return tagName;\n}\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\nfunction addHoverClass(cssText, cache) {\n  var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\n  if (cachedStyle) return cachedStyle;\n  var ast = parse(cssText, {\n    silent: true\n  });\n  if (!ast.stylesheet) {\n    return cssText;\n  }\n  var selectors = [];\n  ast.stylesheet.rules.forEach(function (rule) {\n    if ('selectors' in rule) {\n      (rule.selectors || []).forEach(function (selector) {\n        if (HOVER_SELECTOR.test(selector)) {\n          selectors.push(selector);\n        }\n      });\n    }\n  });\n  if (selectors.length === 0) {\n    return cssText;\n  }\n  var selectorMatcher = new RegExp(selectors.filter(function (selector, index) {\n    return selectors.indexOf(selector) === index;\n  }).sort(function (a, b) {\n    return b.length - a.length;\n  }).map(function (selector) {\n    return escapeRegExp(selector);\n  }).join('|'), 'g');\n  var result = cssText.replace(selectorMatcher, function (selector) {\n    var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\n    return selector + \", \" + newSelector;\n  });\n  cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\n  return result;\n}\nfunction createCache() {\n  var stylesWithHoverClass = new Map();\n  return {\n    stylesWithHoverClass: stylesWithHoverClass\n  };\n}\nfunction buildNode(n, options) {\n  var doc = options.doc,\n    hackCss = options.hackCss,\n    cache = options.cache;\n  switch (n.type) {\n    case NodeType.Document:\n      return doc.implementation.createDocument(null, '', null);\n    case NodeType.DocumentType:\n      return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\n    case NodeType.Element:\n      var tagName = getTagName(n);\n      var node_1;\n      if (n.isSVG) {\n        node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\n      } else {\n        node_1 = doc.createElement(tagName);\n      }\n      var _loop_1 = function (name_1) {\n        if (!n.attributes.hasOwnProperty(name_1)) {\n          return \"continue\";\n        }\n        var value = n.attributes[name_1];\n        if (tagName === 'option' && name_1 === 'selected' && value === false) {\n          return \"continue\";\n        }\n        value = typeof value === 'boolean' || typeof value === 'number' ? '' : value;\n        if (!name_1.startsWith('rr_')) {\n          var isTextarea = tagName === 'textarea' && name_1 === 'value';\n          var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\n          if (isRemoteOrDynamicCss && hackCss) {\n            value = addHoverClass(value, cache);\n          }\n          if (isTextarea || isRemoteOrDynamicCss) {\n            var child = doc.createTextNode(value);\n            for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\n              var c = _a[_i];\n              if (c.nodeType === node_1.TEXT_NODE) {\n                node_1.removeChild(c);\n              }\n            }\n            node_1.appendChild(child);\n            return \"continue\";\n          }\n          try {\n            if (n.isSVG && name_1 === 'xlink:href') {\n              node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value);\n            } else if (name_1 === 'onload' || name_1 === 'onclick' || name_1.substring(0, 7) === 'onmouse') {\n              node_1.setAttribute('_' + name_1, value);\n            } else if (tagName === 'meta' && n.attributes['http-equiv'] === 'Content-Security-Policy' && name_1 === 'content') {\n              node_1.setAttribute('csp-content', value);\n              return \"continue\";\n            } else if (tagName === 'link' && n.attributes.rel === 'preload' && n.attributes.as === 'script') {} else if (tagName === 'link' && n.attributes.rel === 'prefetch' && typeof n.attributes.href === 'string' && n.attributes.href.endsWith('.js')) {} else if (tagName === 'img' && n.attributes.srcset && n.attributes.rr_dataURL) {\n              node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\n            } else {\n              node_1.setAttribute(name_1, value);\n            }\n          } catch (error) {}\n        } else {\n          if (tagName === 'canvas' && name_1 === 'rr_dataURL') {\n            var image_1 = document.createElement('img');\n            image_1.src = value;\n            image_1.onload = function () {\n              var ctx = node_1.getContext('2d');\n              if (ctx) {\n                ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\n              }\n            };\n          } else if (tagName === 'img' && name_1 === 'rr_dataURL') {\n            var image = node_1;\n            if (!image.currentSrc.startsWith('data:')) {\n              image.setAttribute('rrweb-original-src', n.attributes.src);\n              image.src = value;\n            }\n          }\n          if (name_1 === 'rr_width') {\n            node_1.style.width = value;\n          } else if (name_1 === 'rr_height') {\n            node_1.style.height = value;\n          } else if (name_1 === 'rr_mediaCurrentTime') {\n            node_1.currentTime = n.attributes.rr_mediaCurrentTime;\n          } else if (name_1 === 'rr_mediaState') {\n            switch (value) {\n              case 'played':\n                node_1.play()[\"catch\"](function (e) {\n                  return console.warn('media playback error', e);\n                });\n                break;\n              case 'paused':\n                node_1.pause();\n                break;\n            }\n          }\n        }\n      };\n      for (var name_1 in n.attributes) {\n        _loop_1(name_1);\n      }\n      if (n.isShadowHost) {\n        if (!node_1.shadowRoot) {\n          node_1.attachShadow({\n            mode: 'open'\n          });\n        } else {\n          while (node_1.shadowRoot.firstChild) {\n            node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\n          }\n        }\n      }\n      return node_1;\n    case NodeType.Text:\n      return doc.createTextNode(n.isStyle && hackCss ? addHoverClass(n.textContent, cache) : n.textContent);\n    case NodeType.CDATA:\n      return doc.createCDATASection(n.textContent);\n    case NodeType.Comment:\n      return doc.createComment(n.textContent);\n    default:\n      return null;\n  }\n}\nfunction buildNodeWithSN(n, options) {\n  var doc = options.doc,\n    map = options.map,\n    _a = options.skipChild,\n    skipChild = _a === void 0 ? false : _a,\n    _b = options.hackCss,\n    hackCss = _b === void 0 ? true : _b,\n    afterAppend = options.afterAppend,\n    cache = options.cache;\n  var node = buildNode(n, {\n    doc: doc,\n    hackCss: hackCss,\n    cache: cache\n  });\n  if (!node) {\n    return null;\n  }\n  if (n.rootId) {\n    console.assert(map[n.rootId] === doc, 'Target document should has the same root id.');\n  }\n  if (n.type === NodeType.Document) {\n    doc.close();\n    doc.open();\n    if (n.compatMode === 'BackCompat' && n.childNodes && n.childNodes[0].type !== NodeType.DocumentType) {\n      if (n.childNodes[0].type === NodeType.Element && 'xmlns' in n.childNodes[0].attributes && n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\n        doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\n      } else {\n        doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\n      }\n    }\n    node = doc;\n  }\n  node.__sn = n;\n  map[n.id] = node;\n  if ((n.type === NodeType.Document || n.type === NodeType.Element) && !skipChild) {\n    for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\n      var childN = _c[_i];\n      var childNode = buildNodeWithSN(childN, {\n        doc: doc,\n        map: map,\n        skipChild: false,\n        hackCss: hackCss,\n        afterAppend: afterAppend,\n        cache: cache\n      });\n      if (!childNode) {\n        console.warn('Failed to rebuild', childN);\n        continue;\n      }\n      if (childN.isShadow && isElement(node) && node.shadowRoot) {\n        node.shadowRoot.appendChild(childNode);\n      } else {\n        node.appendChild(childNode);\n      }\n      if (afterAppend) {\n        afterAppend(childNode);\n      }\n    }\n  }\n  return node;\n}\nfunction visit(idNodeMap, onVisit) {\n  function walk(node) {\n    onVisit(node);\n  }\n  for (var key in idNodeMap) {\n    if (idNodeMap[key]) {\n      walk(idNodeMap[key]);\n    }\n  }\n}\nfunction handleScroll(node) {\n  var n = node.__sn;\n  if (n.type !== NodeType.Element) {\n    return;\n  }\n  var el = node;\n  for (var name_2 in n.attributes) {\n    if (!(n.attributes.hasOwnProperty(name_2) && name_2.startsWith('rr_'))) {\n      continue;\n    }\n    var value = n.attributes[name_2];\n    if (name_2 === 'rr_scrollLeft') {\n      el.scrollLeft = value;\n    }\n    if (name_2 === 'rr_scrollTop') {\n      el.scrollTop = value;\n    }\n  }\n}\nfunction rebuild(n, options) {\n  var doc = options.doc,\n    onVisit = options.onVisit,\n    _a = options.hackCss,\n    hackCss = _a === void 0 ? true : _a,\n    afterAppend = options.afterAppend,\n    cache = options.cache;\n  var idNodeMap = {};\n  var node = buildNodeWithSN(n, {\n    doc: doc,\n    map: idNodeMap,\n    skipChild: false,\n    hackCss: hackCss,\n    afterAppend: afterAppend,\n    cache: cache\n  });\n  visit(idNodeMap, function (visitedNode) {\n    if (onVisit) {\n      onVisit(visitedNode);\n    }\n    handleScroll(visitedNode);\n  });\n  return [node, idNodeMap];\n}\nexport { IGNORED_NODE, NodeType, addHoverClass, buildNodeWithSN, createCache, is2DCanvasBlank, isElement, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };","map":{"version":3,"names":["NodeType","isElement","n","nodeType","ELEMENT_NODE","isShadowRoot","_a","host","Boolean","shadowRoot","maskInputValue","maskInputOptions","tagName","type","value","maskInputFn","text","toLowerCase","repeat","length","ORIGINAL_ATTRIBUTE_NAME","is2DCanvasBlank","canvas","ctx","getContext","chunkSize","x","width","y","height","getImageData","originalGetImageData","pixelBuffer","Uint32Array","call","Math","min","data","buffer","some","pixel","_id","tagNameRegex","RegExp","IGNORED_NODE","genId","getValidTagName","element","HTMLFormElement","processedTagName","trim","test","getCssRulesString","s","rules","cssRules","Array","from","map","getCssRuleString","join","error","rule","cssStringified","cssText","isCSSImportRule","styleSheet","stringifyStyleSheet","sheet","extractOrigin","url","origin","indexOf","split","slice","canvasService","canvasCtx","URL_IN_CSS_REF","RELATIVE_PATH","DATA_URI","absoluteToStylesheet","href","replace","quote1","path1","quote2","path2","path3","filePath","maybeQuote","stack","parts","pop","_i","parts_1","part","push","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","getAbsoluteSrcsetString","doc","attributeValue","pos","collectCharacters","regEx","chars","match","exec","substring","output","absoluteToDoc","descriptorsStr","inParens","c","charAt","a","createElement","isSVGElement","el","ownerSVGElement","getHref","document","transformAttribute","name","_isBlockedElement","blockClass","blockSelector","classList","contains","eIndex","className","matches","needMaskingText","node","maskTextClass","maskTextSelector","parentNode","TEXT_NODE","onceIframeLoaded","iframeEl","listener","iframeLoadTimeout","win","contentWindow","fired","readyState","timer_1","setTimeout","addEventListener","clearTimeout","blankUrl","location","src","serializeNode","options","inlineStylesheet","_b","maskTextFn","_c","dataURLOptions","inlineImages","recordCanvas","keepIframeSrcFn","rootId","__sn","docId","id","undefined","DOCUMENT_NODE","compatMode","Document","childNodes","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","needBlock","attributes_1","_d","attributes","_e","name_1","stylesheet","styleSheets","find","rel","_cssText","innerText","textContent","checked","selected","__context","rr_dataURL","toDataURL","quality","canvasDataURL","blankCanvas","blankCanvasDataURL","image_1","oldValue_1","crossOrigin","recordInlineImage","naturalWidth","naturalHeight","drawImage","err","console","warn","currentSrc","complete","onload","rr_mediaState","paused","rr_mediaCurrentTime","currentTime","scrollLeft","rr_scrollLeft","scrollTop","rr_scrollTop","_f","getBoundingClientRect","rr_width","rr_height","contentDocument","rr_src","Element","isSVG","parentTagName","isStyle","isScript","nextSibling","previousSibling","Text","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","Comment","lowerIfExists","maybeAttr","slimDOMExcluded","sn","slimDOMOptions","comment","script","as","endsWith","headFavicon","headMetaDescKeywords","headMetaSocial","property","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","serializeNodeWithId","skipChild","onSerialize","onIframeLoad","_g","_h","_j","preserveWhiteSpace","_serializedNode","serializedNode","Object","assign","recordChild","isShadowHost","headWhitespace","bypassOptions","_k","childN","serializedChildNode","_l","_m","isShadow","iframeDoc","serializedIframeNode","snapshot","maskAllInputs","slimDOM","idNodeMap","color","date","email","month","number","range","search","tel","time","week","textarea","select","password","commentre","parse","css","lineno","column","updatePosition","str","lines","i","lastIndexOf","position","start","line","Position","whitespace","end","source","prototype","content","errorsList","msg","Error","reason","filename","silent","rulesList","parsingErrors","open","close","comments","atrule","re","m","selector","declaration","propMatch","prop","val","ret","declarations","decls","decl","keyframe","vals","values","atkeyframes","vendor","frame","frames","concat","keyframes","atsupports","supports","style","athost","atmedia","media","atcustommedia","atpage","sel","selectors","atdocument","atfontface","atimport","_compileAtrule","atcharset","atnamespace","addParent","obj","parent","isNode","childParent","keys","k","isArray","forEach","v","defineProperty","configurable","writable","enumerable","tagMap","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","clippath","feblend","fecolormatrix","fecomponenttransfer","fecomposite","feconvolvematrix","fediffuselighting","fedisplacementmap","fedistantlight","fedropshadow","feflood","fefunca","fefuncb","fefuncg","fefuncr","fegaussianblur","feimage","femerge","femergenode","femorphology","feoffset","fepointlight","fespecularlighting","fespotlight","fetile","feturbulence","foreignobject","glyphref","lineargradient","radialgradient","getTagName","escapeRegExp","HOVER_SELECTOR","HOVER_SELECTOR_GLOBAL","addHoverClass","cache","cachedStyle","stylesWithHoverClass","get","ast","selectorMatcher","filter","index","sort","b","result","newSelector","set","createCache","Map","buildNode","hackCss","implementation","createDocument","createDocumentType","node_1","createElementNS","_loop_1","hasOwnProperty","startsWith","isTextarea","isRemoteOrDynamicCss","child","createTextNode","removeChild","appendChild","setAttributeNS","setAttribute","srcset","image","play","e","pause","attachShadow","mode","firstChild","createCDATASection","createComment","buildNodeWithSN","afterAppend","assert","xmlns","write","childNode","visit","onVisit","walk","key","handleScroll","name_2","rebuild","visitedNode"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js"],"sourcesContent":["var NodeType;\n(function (NodeType) {\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\n    return n.nodeType === n.ELEMENT_NODE;\n}\nfunction isShadowRoot(n) {\n    var _a;\n    var host = (_a = n) === null || _a === void 0 ? void 0 : _a.host;\n    return Boolean(host && host.shadowRoot && host.shadowRoot === n);\n}\nfunction maskInputValue(_a) {\n    var maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\n    var text = value || '';\n    if (maskInputOptions[tagName.toLowerCase()] ||\n        maskInputOptions[type]) {\n        if (maskInputFn) {\n            text = maskInputFn(text);\n        }\n        else {\n            text = '*'.repeat(text.length);\n        }\n    }\n    return text;\n}\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\nfunction is2DCanvasBlank(canvas) {\n    var ctx = canvas.getContext('2d');\n    if (!ctx)\n        return true;\n    var chunkSize = 50;\n    for (var x = 0; x < canvas.width; x += chunkSize) {\n        for (var y = 0; y < canvas.height; y += chunkSize) {\n            var getImageData = ctx.getImageData;\n            var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\n                : getImageData;\n            var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\n            if (pixelBuffer.some(function (pixel) { return pixel !== 0; }))\n                return false;\n        }\n    }\n    return true;\n}\n\nvar _id = 1;\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\nvar IGNORED_NODE = -2;\nfunction genId() {\n    return _id++;\n}\nfunction getValidTagName(element) {\n    if (element instanceof HTMLFormElement) {\n        return 'form';\n    }\n    var processedTagName = element.tagName.toLowerCase().trim();\n    if (tagNameRegex.test(processedTagName)) {\n        return 'div';\n    }\n    return processedTagName;\n}\nfunction getCssRulesString(s) {\n    try {\n        var rules = s.rules || s.cssRules;\n        return rules ? Array.from(rules).map(getCssRuleString).join('') : null;\n    }\n    catch (error) {\n        return null;\n    }\n}\nfunction getCssRuleString(rule) {\n    var cssStringified = rule.cssText;\n    if (isCSSImportRule(rule)) {\n        try {\n            cssStringified = getCssRulesString(rule.styleSheet) || cssStringified;\n        }\n        catch (_a) {\n        }\n    }\n    return cssStringified;\n}\nfunction isCSSImportRule(rule) {\n    return 'styleSheet' in rule;\n}\nfunction stringifyStyleSheet(sheet) {\n    return sheet.cssRules\n        ? Array.from(sheet.cssRules)\n            .map(function (rule) { return rule.cssText || ''; })\n            .join('')\n        : '';\n}\nfunction extractOrigin(url) {\n    var origin = '';\n    if (url.indexOf('//') > -1) {\n        origin = url.split('/').slice(0, 3).join('/');\n    }\n    else {\n        origin = url.split('/')[0];\n    }\n    origin = origin.split('?')[0];\n    return origin;\n}\nvar canvasService;\nvar canvasCtx;\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\nfunction absoluteToStylesheet(cssText, href) {\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\n        var filePath = path1 || path2 || path3;\n        var maybeQuote = quote1 || quote2 || '';\n        if (!filePath) {\n            return origin;\n        }\n        if (!RELATIVE_PATH.test(filePath)) {\n            return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n        }\n        if (DATA_URI.test(filePath)) {\n            return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n        }\n        if (filePath[0] === '/') {\n            return \"url(\" + maybeQuote + (extractOrigin(href) + filePath) + maybeQuote + \")\";\n        }\n        var stack = href.split('/');\n        var parts = filePath.split('/');\n        stack.pop();\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var part = parts_1[_i];\n            if (part === '.') {\n                continue;\n            }\n            else if (part === '..') {\n                stack.pop();\n            }\n            else {\n                stack.push(part);\n            }\n        }\n        return \"url(\" + maybeQuote + stack.join('/') + maybeQuote + \")\";\n    });\n}\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\n    if (attributeValue.trim() === '') {\n        return attributeValue;\n    }\n    var pos = 0;\n    function collectCharacters(regEx) {\n        var chars;\n        var match = regEx.exec(attributeValue.substring(pos));\n        if (match) {\n            chars = match[0];\n            pos += chars.length;\n            return chars;\n        }\n        return '';\n    }\n    var output = [];\n    while (true) {\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\n        if (pos >= attributeValue.length) {\n            break;\n        }\n        var url = collectCharacters(SRCSET_NOT_SPACES);\n        if (url.slice(-1) === ',') {\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\n            output.push(url);\n        }\n        else {\n            var descriptorsStr = '';\n            url = absoluteToDoc(doc, url);\n            var inParens = false;\n            while (true) {\n                var c = attributeValue.charAt(pos);\n                if (c === '') {\n                    output.push((url + descriptorsStr).trim());\n                    break;\n                }\n                else if (!inParens) {\n                    if (c === ',') {\n                        pos += 1;\n                        output.push((url + descriptorsStr).trim());\n                        break;\n                    }\n                    else if (c === '(') {\n                        inParens = true;\n                    }\n                }\n                else {\n                    if (c === ')') {\n                        inParens = false;\n                    }\n                }\n                descriptorsStr += c;\n                pos += 1;\n            }\n        }\n    }\n    return output.join(', ');\n}\nfunction absoluteToDoc(doc, attributeValue) {\n    if (!attributeValue || attributeValue.trim() === '') {\n        return attributeValue;\n    }\n    var a = doc.createElement('a');\n    a.href = attributeValue;\n    return a.href;\n}\nfunction isSVGElement(el) {\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\n}\nfunction getHref() {\n    var a = document.createElement('a');\n    a.href = '';\n    return a.href;\n}\nfunction transformAttribute(doc, tagName, name, value) {\n    if (name === 'src' || (name === 'href' && value)) {\n        return absoluteToDoc(doc, value);\n    }\n    else if (name === 'xlink:href' && value && value[0] !== '#') {\n        return absoluteToDoc(doc, value);\n    }\n    else if (name === 'background' &&\n        value &&\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\n        return absoluteToDoc(doc, value);\n    }\n    else if (name === 'srcset' && value) {\n        return getAbsoluteSrcsetString(doc, value);\n    }\n    else if (name === 'style' && value) {\n        return absoluteToStylesheet(value, getHref());\n    }\n    else if (tagName === 'object' && name === 'data' && value) {\n        return absoluteToDoc(doc, value);\n    }\n    else {\n        return value;\n    }\n}\nfunction _isBlockedElement(element, blockClass, blockSelector) {\n    if (typeof blockClass === 'string') {\n        if (element.classList.contains(blockClass)) {\n            return true;\n        }\n    }\n    else {\n        for (var eIndex = 0; eIndex < element.classList.length; eIndex++) {\n            var className = element.classList[eIndex];\n            if (blockClass.test(className)) {\n                return true;\n            }\n        }\n    }\n    if (blockSelector) {\n        return element.matches(blockSelector);\n    }\n    return false;\n}\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\n    if (!node) {\n        return false;\n    }\n    if (node.nodeType === node.ELEMENT_NODE) {\n        if (typeof maskTextClass === 'string') {\n            if (node.classList.contains(maskTextClass)) {\n                return true;\n            }\n        }\n        else {\n            for (var eIndex = 0; eIndex < node.classList.length; eIndex++) {\n                var className = node.classList[eIndex];\n                if (maskTextClass.test(className)) {\n                    return true;\n                }\n            }\n        }\n        if (maskTextSelector) {\n            if (node.matches(maskTextSelector)) {\n                return true;\n            }\n        }\n        return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n    }\n    if (node.nodeType === node.TEXT_NODE) {\n        return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n    }\n    return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n}\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\n    var win = iframeEl.contentWindow;\n    if (!win) {\n        return;\n    }\n    var fired = false;\n    var readyState;\n    try {\n        readyState = win.document.readyState;\n    }\n    catch (error) {\n        return;\n    }\n    if (readyState !== 'complete') {\n        var timer_1 = setTimeout(function () {\n            if (!fired) {\n                listener();\n                fired = true;\n            }\n        }, iframeLoadTimeout);\n        iframeEl.addEventListener('load', function () {\n            clearTimeout(timer_1);\n            fired = true;\n            listener();\n        });\n        return;\n    }\n    var blankUrl = 'about:blank';\n    if (win.location.href !== blankUrl ||\n        iframeEl.src === blankUrl ||\n        iframeEl.src === '') {\n        setTimeout(listener, 0);\n        return;\n    }\n    iframeEl.addEventListener('load', listener);\n}\nfunction serializeNode(n, options) {\n    var _a;\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _b = options.maskInputOptions, maskInputOptions = _b === void 0 ? {} : _b, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, _c = options.dataURLOptions, dataURLOptions = _c === void 0 ? {} : _c, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn;\n    var rootId;\n    if (doc.__sn) {\n        var docId = doc.__sn.id;\n        rootId = docId === 1 ? undefined : docId;\n    }\n    switch (n.nodeType) {\n        case n.DOCUMENT_NODE:\n            if (n.compatMode !== 'CSS1Compat') {\n                return {\n                    type: NodeType.Document,\n                    childNodes: [],\n                    compatMode: n.compatMode,\n                    rootId: rootId\n                };\n            }\n            else {\n                return {\n                    type: NodeType.Document,\n                    childNodes: [],\n                    rootId: rootId\n                };\n            }\n        case n.DOCUMENT_TYPE_NODE:\n            return {\n                type: NodeType.DocumentType,\n                name: n.name,\n                publicId: n.publicId,\n                systemId: n.systemId,\n                rootId: rootId\n            };\n        case n.ELEMENT_NODE:\n            var needBlock = _isBlockedElement(n, blockClass, blockSelector);\n            var tagName = getValidTagName(n);\n            var attributes_1 = {};\n            for (var _i = 0, _d = Array.from(n.attributes); _i < _d.length; _i++) {\n                var _e = _d[_i], name_1 = _e.name, value = _e.value;\n                attributes_1[name_1] = transformAttribute(doc, tagName, name_1, value);\n            }\n            if (tagName === 'link' && inlineStylesheet) {\n                var stylesheet = Array.from(doc.styleSheets).find(function (s) {\n                    return s.href === n.href;\n                });\n                var cssText = null;\n                if (stylesheet) {\n                    cssText = getCssRulesString(stylesheet);\n                }\n                if (cssText) {\n                    delete attributes_1.rel;\n                    delete attributes_1.href;\n                    attributes_1._cssText = absoluteToStylesheet(cssText, stylesheet.href);\n                }\n            }\n            if (tagName === 'style' &&\n                n.sheet &&\n                !(n.innerText ||\n                    n.textContent ||\n                    '').trim().length) {\n                var cssText = getCssRulesString(n.sheet);\n                if (cssText) {\n                    attributes_1._cssText = absoluteToStylesheet(cssText, getHref());\n                }\n            }\n            if (tagName === 'input' ||\n                tagName === 'textarea' ||\n                tagName === 'select') {\n                var value = n.value;\n                if (attributes_1.type !== 'radio' &&\n                    attributes_1.type !== 'checkbox' &&\n                    attributes_1.type !== 'submit' &&\n                    attributes_1.type !== 'button' &&\n                    value) {\n                    attributes_1.value = maskInputValue({\n                        type: attributes_1.type,\n                        tagName: tagName,\n                        value: value,\n                        maskInputOptions: maskInputOptions,\n                        maskInputFn: maskInputFn\n                    });\n                }\n                else if (n.checked) {\n                    attributes_1.checked = n.checked;\n                }\n            }\n            if (tagName === 'option') {\n                if (n.selected && !maskInputOptions['select']) {\n                    attributes_1.selected = true;\n                }\n                else {\n                    delete attributes_1.selected;\n                }\n            }\n            if (tagName === 'canvas' && recordCanvas) {\n                if (n.__context === '2d') {\n                    if (!is2DCanvasBlank(n)) {\n                        attributes_1.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n                    }\n                }\n                else if (!('__context' in n)) {\n                    var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n                    var blankCanvas = document.createElement('canvas');\n                    blankCanvas.width = n.width;\n                    blankCanvas.height = n.height;\n                    var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n                    if (canvasDataURL !== blankCanvasDataURL) {\n                        attributes_1.rr_dataURL = canvasDataURL;\n                    }\n                }\n            }\n            if (tagName === 'img' && inlineImages) {\n                if (!canvasService) {\n                    canvasService = doc.createElement('canvas');\n                    canvasCtx = canvasService.getContext('2d');\n                }\n                var image_1 = n;\n                var oldValue_1 = image_1.crossOrigin;\n                image_1.crossOrigin = 'anonymous';\n                var recordInlineImage = function () {\n                    try {\n                        canvasService.width = image_1.naturalWidth;\n                        canvasService.height = image_1.naturalHeight;\n                        canvasCtx.drawImage(image_1, 0, 0);\n                        attributes_1.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n                    }\n                    catch (err) {\n                        console.warn(\"Cannot inline img src=\" + image_1.currentSrc + \"! Error: \" + err);\n                    }\n                    oldValue_1\n                        ? (attributes_1.crossOrigin = oldValue_1)\n                        : delete attributes_1.crossOrigin;\n                };\n                if (image_1.complete && image_1.naturalWidth !== 0)\n                    recordInlineImage();\n                else\n                    image_1.onload = recordInlineImage;\n            }\n            if (tagName === 'audio' || tagName === 'video') {\n                attributes_1.rr_mediaState = n.paused\n                    ? 'paused'\n                    : 'played';\n                attributes_1.rr_mediaCurrentTime = n.currentTime;\n            }\n            if (n.scrollLeft) {\n                attributes_1.rr_scrollLeft = n.scrollLeft;\n            }\n            if (n.scrollTop) {\n                attributes_1.rr_scrollTop = n.scrollTop;\n            }\n            if (needBlock) {\n                var _f = n.getBoundingClientRect(), width = _f.width, height = _f.height;\n                attributes_1 = {\n                    \"class\": attributes_1[\"class\"],\n                    rr_width: width + \"px\",\n                    rr_height: height + \"px\"\n                };\n            }\n            if (tagName === 'iframe' && !keepIframeSrcFn(attributes_1.src)) {\n                if (!n.contentDocument) {\n                    attributes_1.rr_src = attributes_1.src;\n                }\n                delete attributes_1.src;\n            }\n            return {\n                type: NodeType.Element,\n                tagName: tagName,\n                attributes: attributes_1,\n                childNodes: [],\n                isSVG: isSVGElement(n) || undefined,\n                needBlock: needBlock,\n                rootId: rootId\n            };\n        case n.TEXT_NODE:\n            var parentTagName = n.parentNode && n.parentNode.tagName;\n            var textContent = n.textContent;\n            var isStyle = parentTagName === 'STYLE' ? true : undefined;\n            var isScript = parentTagName === 'SCRIPT' ? true : undefined;\n            if (isStyle && textContent) {\n                try {\n                    if (n.nextSibling || n.previousSibling) {\n                    }\n                    else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\n                        textContent = stringifyStyleSheet(n.parentNode.sheet);\n                    }\n                }\n                catch (err) {\n                    console.warn(\"Cannot get CSS styles from text's parentNode. Error: \" + err, n);\n                }\n                textContent = absoluteToStylesheet(textContent, getHref());\n            }\n            if (isScript) {\n                textContent = 'SCRIPT_PLACEHOLDER';\n            }\n            if (!isStyle &&\n                !isScript &&\n                needMaskingText(n, maskTextClass, maskTextSelector) &&\n                textContent) {\n                textContent = maskTextFn\n                    ? maskTextFn(textContent)\n                    : textContent.replace(/[\\S]/g, '*');\n            }\n            return {\n                type: NodeType.Text,\n                textContent: textContent || '',\n                isStyle: isStyle,\n                rootId: rootId\n            };\n        case n.CDATA_SECTION_NODE:\n            return {\n                type: NodeType.CDATA,\n                textContent: '',\n                rootId: rootId\n            };\n        case n.COMMENT_NODE:\n            return {\n                type: NodeType.Comment,\n                textContent: n.textContent || '',\n                rootId: rootId\n            };\n        default:\n            return false;\n    }\n}\nfunction lowerIfExists(maybeAttr) {\n    if (maybeAttr === undefined) {\n        return '';\n    }\n    else {\n        return maybeAttr.toLowerCase();\n    }\n}\nfunction slimDOMExcluded(sn, slimDOMOptions) {\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\n        return true;\n    }\n    else if (sn.type === NodeType.Element) {\n        if (slimDOMOptions.script &&\n            (sn.tagName === 'script' ||\n                (sn.tagName === 'link' &&\n                    sn.attributes.rel === 'preload' &&\n                    sn.attributes.as === 'script') ||\n                (sn.tagName === 'link' &&\n                    sn.attributes.rel === 'prefetch' &&\n                    typeof sn.attributes.href === 'string' &&\n                    sn.attributes.href.endsWith('.js')))) {\n            return true;\n        }\n        else if (slimDOMOptions.headFavicon &&\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\n                (sn.tagName === 'meta' &&\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\n            return true;\n        }\n        else if (sn.tagName === 'meta') {\n            if (slimDOMOptions.headMetaDescKeywords &&\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaSocial &&\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaRobots &&\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaHttpEquiv &&\n                sn.attributes['http-equiv'] !== undefined) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaAuthorship &&\n                (lowerIfExists(sn.attributes.name) === 'author' ||\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaVerification &&\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction serializeNodeWithId(n, options) {\n    var doc = options.doc, map = options.map, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.dataURLOptions, dataURLOptions = _d === void 0 ? {} : _d, _e = options.inlineImages, inlineImages = _e === void 0 ? false : _e, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _g = options.iframeLoadTimeout, iframeLoadTimeout = _g === void 0 ? 5000 : _g, _h = options.keepIframeSrcFn, keepIframeSrcFn = _h === void 0 ? function () { return false; } : _h;\n    var _j = options.preserveWhiteSpace, preserveWhiteSpace = _j === void 0 ? true : _j;\n    var _serializedNode = serializeNode(n, {\n        doc: doc,\n        blockClass: blockClass,\n        blockSelector: blockSelector,\n        maskTextClass: maskTextClass,\n        maskTextSelector: maskTextSelector,\n        inlineStylesheet: inlineStylesheet,\n        maskInputOptions: maskInputOptions,\n        maskTextFn: maskTextFn,\n        maskInputFn: maskInputFn,\n        dataURLOptions: dataURLOptions,\n        inlineImages: inlineImages,\n        recordCanvas: recordCanvas,\n        keepIframeSrcFn: keepIframeSrcFn\n    });\n    if (!_serializedNode) {\n        console.warn(n, 'not serialized');\n        return null;\n    }\n    var id;\n    if ('__sn' in n) {\n        id = n.__sn.id;\n    }\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\n        (!preserveWhiteSpace &&\n            _serializedNode.type === NodeType.Text &&\n            !_serializedNode.isStyle &&\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\n        id = IGNORED_NODE;\n    }\n    else {\n        id = genId();\n    }\n    var serializedNode = Object.assign(_serializedNode, { id: id });\n    n.__sn = serializedNode;\n    if (id === IGNORED_NODE) {\n        return null;\n    }\n    map[id] = n;\n    if (onSerialize) {\n        onSerialize(n);\n    }\n    var recordChild = !skipChild;\n    if (serializedNode.type === NodeType.Element) {\n        recordChild = recordChild && !serializedNode.needBlock;\n        delete serializedNode.needBlock;\n        if (n.shadowRoot)\n            serializedNode.isShadowHost = true;\n    }\n    if ((serializedNode.type === NodeType.Document ||\n        serializedNode.type === NodeType.Element) &&\n        recordChild) {\n        if (slimDOMOptions.headWhitespace &&\n            _serializedNode.type === NodeType.Element &&\n            _serializedNode.tagName === 'head') {\n            preserveWhiteSpace = false;\n        }\n        var bypassOptions = {\n            doc: doc,\n            map: map,\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            maskTextClass: maskTextClass,\n            maskTextSelector: maskTextSelector,\n            skipChild: skipChild,\n            inlineStylesheet: inlineStylesheet,\n            maskInputOptions: maskInputOptions,\n            maskTextFn: maskTextFn,\n            maskInputFn: maskInputFn,\n            slimDOMOptions: slimDOMOptions,\n            dataURLOptions: dataURLOptions,\n            inlineImages: inlineImages,\n            recordCanvas: recordCanvas,\n            preserveWhiteSpace: preserveWhiteSpace,\n            onSerialize: onSerialize,\n            onIframeLoad: onIframeLoad,\n            iframeLoadTimeout: iframeLoadTimeout,\n            keepIframeSrcFn: keepIframeSrcFn\n        };\n        for (var _i = 0, _k = Array.from(n.childNodes); _i < _k.length; _i++) {\n            var childN = _k[_i];\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n            if (serializedChildNode) {\n                serializedNode.childNodes.push(serializedChildNode);\n            }\n        }\n        if (isElement(n) && n.shadowRoot) {\n            for (var _l = 0, _m = Array.from(n.shadowRoot.childNodes); _l < _m.length; _l++) {\n                var childN = _m[_l];\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n                if (serializedChildNode) {\n                    serializedChildNode.isShadow = true;\n                    serializedNode.childNodes.push(serializedChildNode);\n                }\n            }\n        }\n    }\n    if (n.parentNode && isShadowRoot(n.parentNode)) {\n        serializedNode.isShadow = true;\n    }\n    if (serializedNode.type === NodeType.Element &&\n        serializedNode.tagName === 'iframe') {\n        onceIframeLoaded(n, function () {\n            var iframeDoc = n.contentDocument;\n            if (iframeDoc && onIframeLoad) {\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\n                    doc: iframeDoc,\n                    map: map,\n                    blockClass: blockClass,\n                    blockSelector: blockSelector,\n                    maskTextClass: maskTextClass,\n                    maskTextSelector: maskTextSelector,\n                    skipChild: false,\n                    inlineStylesheet: inlineStylesheet,\n                    maskInputOptions: maskInputOptions,\n                    maskTextFn: maskTextFn,\n                    maskInputFn: maskInputFn,\n                    slimDOMOptions: slimDOMOptions,\n                    dataURLOptions: dataURLOptions,\n                    inlineImages: inlineImages,\n                    recordCanvas: recordCanvas,\n                    preserveWhiteSpace: preserveWhiteSpace,\n                    onSerialize: onSerialize,\n                    onIframeLoad: onIframeLoad,\n                    iframeLoadTimeout: iframeLoadTimeout,\n                    keepIframeSrcFn: keepIframeSrcFn\n                });\n                if (serializedIframeNode) {\n                    onIframeLoad(n, serializedIframeNode);\n                }\n            }\n        }, iframeLoadTimeout);\n    }\n    return serializedNode;\n}\nfunction snapshot(n, options) {\n    var _a = options || {}, _b = _a.blockClass, blockClass = _b === void 0 ? 'rr-block' : _b, _c = _a.blockSelector, blockSelector = _c === void 0 ? null : _c, _d = _a.maskTextClass, maskTextClass = _d === void 0 ? 'rr-mask' : _d, _e = _a.maskTextSelector, maskTextSelector = _e === void 0 ? null : _e, _f = _a.inlineStylesheet, inlineStylesheet = _f === void 0 ? true : _f, _g = _a.inlineImages, inlineImages = _g === void 0 ? false : _g, _h = _a.recordCanvas, recordCanvas = _h === void 0 ? false : _h, _j = _a.maskAllInputs, maskAllInputs = _j === void 0 ? false : _j, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _k = _a.slimDOM, slimDOM = _k === void 0 ? false : _k, dataURLOptions = _a.dataURLOptions, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, _l = _a.keepIframeSrcFn, keepIframeSrcFn = _l === void 0 ? function () { return false; } : _l;\n    var idNodeMap = {};\n    var maskInputOptions = maskAllInputs === true\n        ? {\n            color: true,\n            date: true,\n            'datetime-local': true,\n            email: true,\n            month: true,\n            number: true,\n            range: true,\n            search: true,\n            tel: true,\n            text: true,\n            time: true,\n            url: true,\n            week: true,\n            textarea: true,\n            select: true,\n            password: true\n        }\n        : maskAllInputs === false\n            ? {\n                password: true\n            }\n            : maskAllInputs;\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\n        ?\n            {\n                script: true,\n                comment: true,\n                headFavicon: true,\n                headWhitespace: true,\n                headMetaDescKeywords: slimDOM === 'all',\n                headMetaSocial: true,\n                headMetaRobots: true,\n                headMetaHttpEquiv: true,\n                headMetaAuthorship: true,\n                headMetaVerification: true\n            }\n        : slimDOM === false\n            ? {}\n            : slimDOM;\n    return [\n        serializeNodeWithId(n, {\n            doc: n,\n            map: idNodeMap,\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            maskTextClass: maskTextClass,\n            maskTextSelector: maskTextSelector,\n            skipChild: false,\n            inlineStylesheet: inlineStylesheet,\n            maskInputOptions: maskInputOptions,\n            maskTextFn: maskTextFn,\n            maskInputFn: maskInputFn,\n            slimDOMOptions: slimDOMOptions,\n            dataURLOptions: dataURLOptions,\n            inlineImages: inlineImages,\n            recordCanvas: recordCanvas,\n            preserveWhiteSpace: preserveWhiteSpace,\n            onSerialize: onSerialize,\n            onIframeLoad: onIframeLoad,\n            iframeLoadTimeout: iframeLoadTimeout,\n            keepIframeSrcFn: keepIframeSrcFn\n        }),\n        idNodeMap,\n    ];\n}\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\nfunction parse(css, options) {\n    if (options === void 0) { options = {}; }\n    var lineno = 1;\n    var column = 1;\n    function updatePosition(str) {\n        var lines = str.match(/\\n/g);\n        if (lines) {\n            lineno += lines.length;\n        }\n        var i = str.lastIndexOf('\\n');\n        column = i === -1 ? column + str.length : str.length - i;\n    }\n    function position() {\n        var start = { line: lineno, column: column };\n        return function (node) {\n            node.position = new Position(start);\n            whitespace();\n            return node;\n        };\n    }\n    var Position = (function () {\n        function Position(start) {\n            this.start = start;\n            this.end = { line: lineno, column: column };\n            this.source = options.source;\n        }\n        return Position;\n    }());\n    Position.prototype.content = css;\n    var errorsList = [];\n    function error(msg) {\n        var err = new Error(options.source + ':' + lineno + ':' + column + ': ' + msg);\n        err.reason = msg;\n        err.filename = options.source;\n        err.line = lineno;\n        err.column = column;\n        err.source = css;\n        if (options.silent) {\n            errorsList.push(err);\n        }\n        else {\n            throw err;\n        }\n    }\n    function stylesheet() {\n        var rulesList = rules();\n        return {\n            type: 'stylesheet',\n            stylesheet: {\n                source: options.source,\n                rules: rulesList,\n                parsingErrors: errorsList\n            }\n        };\n    }\n    function open() {\n        return match(/^{\\s*/);\n    }\n    function close() {\n        return match(/^}/);\n    }\n    function rules() {\n        var node;\n        var rules = [];\n        whitespace();\n        comments(rules);\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\n            if (node !== false) {\n                rules.push(node);\n                comments(rules);\n            }\n        }\n        return rules;\n    }\n    function match(re) {\n        var m = re.exec(css);\n        if (!m) {\n            return;\n        }\n        var str = m[0];\n        updatePosition(str);\n        css = css.slice(str.length);\n        return m;\n    }\n    function whitespace() {\n        match(/^\\s*/);\n    }\n    function comments(rules) {\n        if (rules === void 0) { rules = []; }\n        var c;\n        while ((c = comment())) {\n            if (c !== false) {\n                rules.push(c);\n            }\n            c = comment();\n        }\n        return rules;\n    }\n    function comment() {\n        var pos = position();\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\n            return;\n        }\n        var i = 2;\n        while ('' !== css.charAt(i) &&\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\n            ++i;\n        }\n        i += 2;\n        if ('' === css.charAt(i - 1)) {\n            return error('End of comment missing');\n        }\n        var str = css.slice(2, i - 2);\n        column += 2;\n        updatePosition(str);\n        css = css.slice(i);\n        column += 2;\n        return pos({\n            type: 'comment',\n            comment: str\n        });\n    }\n    function selector() {\n        var m = match(/^([^{]+)/);\n        if (!m) {\n            return;\n        }\n        return trim(m[0])\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\n            return m.replace(/,/g, '\\u200C');\n        })\n            .split(/\\s*(?![^(]*\\)),\\s*/)\n            .map(function (s) {\n            return s.replace(/\\u200C/g, ',');\n        });\n    }\n    function declaration() {\n        var pos = position();\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n        if (!propMatch) {\n            return;\n        }\n        var prop = trim(propMatch[0]);\n        if (!match(/^:\\s*/)) {\n            return error(\"property missing ':'\");\n        }\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\n        var ret = pos({\n            type: 'declaration',\n            property: prop.replace(commentre, ''),\n            value: val ? trim(val[0]).replace(commentre, '') : ''\n        });\n        match(/^[;\\s]*/);\n        return ret;\n    }\n    function declarations() {\n        var decls = [];\n        if (!open()) {\n            return error(\"missing '{'\");\n        }\n        comments(decls);\n        var decl;\n        while ((decl = declaration())) {\n            if (decl !== false) {\n                decls.push(decl);\n                comments(decls);\n            }\n            decl = declaration();\n        }\n        if (!close()) {\n            return error(\"missing '}'\");\n        }\n        return decls;\n    }\n    function keyframe() {\n        var m;\n        var vals = [];\n        var pos = position();\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\n            vals.push(m[1]);\n            match(/^,\\s*/);\n        }\n        if (!vals.length) {\n            return;\n        }\n        return pos({\n            type: 'keyframe',\n            values: vals,\n            declarations: declarations()\n        });\n    }\n    function atkeyframes() {\n        var pos = position();\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\n        if (!m) {\n            return;\n        }\n        var vendor = m[1];\n        m = match(/^([-\\w]+)\\s*/);\n        if (!m) {\n            return error('@keyframes missing name');\n        }\n        var name = m[1];\n        if (!open()) {\n            return error(\"@keyframes missing '{'\");\n        }\n        var frame;\n        var frames = comments();\n        while ((frame = keyframe())) {\n            frames.push(frame);\n            frames = frames.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@keyframes missing '}'\");\n        }\n        return pos({\n            type: 'keyframes',\n            name: name,\n            vendor: vendor,\n            keyframes: frames\n        });\n    }\n    function atsupports() {\n        var pos = position();\n        var m = match(/^@supports *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var supports = trim(m[1]);\n        if (!open()) {\n            return error(\"@supports missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@supports missing '}'\");\n        }\n        return pos({\n            type: 'supports',\n            supports: supports,\n            rules: style\n        });\n    }\n    function athost() {\n        var pos = position();\n        var m = match(/^@host\\s*/);\n        if (!m) {\n            return;\n        }\n        if (!open()) {\n            return error(\"@host missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@host missing '}'\");\n        }\n        return pos({\n            type: 'host',\n            rules: style\n        });\n    }\n    function atmedia() {\n        var pos = position();\n        var m = match(/^@media *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var media = trim(m[1]);\n        if (!open()) {\n            return error(\"@media missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@media missing '}'\");\n        }\n        return pos({\n            type: 'media',\n            media: media,\n            rules: style\n        });\n    }\n    function atcustommedia() {\n        var pos = position();\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n        if (!m) {\n            return;\n        }\n        return pos({\n            type: 'custom-media',\n            name: trim(m[1]),\n            media: trim(m[2])\n        });\n    }\n    function atpage() {\n        var pos = position();\n        var m = match(/^@page */);\n        if (!m) {\n            return;\n        }\n        var sel = selector() || [];\n        if (!open()) {\n            return error(\"@page missing '{'\");\n        }\n        var decls = comments();\n        var decl;\n        while ((decl = declaration())) {\n            decls.push(decl);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@page missing '}'\");\n        }\n        return pos({\n            type: 'page',\n            selectors: sel,\n            declarations: decls\n        });\n    }\n    function atdocument() {\n        var pos = position();\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var vendor = trim(m[1]);\n        var doc = trim(m[2]);\n        if (!open()) {\n            return error(\"@document missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@document missing '}'\");\n        }\n        return pos({\n            type: 'document',\n            document: doc,\n            vendor: vendor,\n            rules: style\n        });\n    }\n    function atfontface() {\n        var pos = position();\n        var m = match(/^@font-face\\s*/);\n        if (!m) {\n            return;\n        }\n        if (!open()) {\n            return error(\"@font-face missing '{'\");\n        }\n        var decls = comments();\n        var decl;\n        while ((decl = declaration())) {\n            decls.push(decl);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@font-face missing '}'\");\n        }\n        return pos({\n            type: 'font-face',\n            declarations: decls\n        });\n    }\n    var atimport = _compileAtrule('import');\n    var atcharset = _compileAtrule('charset');\n    var atnamespace = _compileAtrule('namespace');\n    function _compileAtrule(name) {\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\n        return function () {\n            var pos = position();\n            var m = match(re);\n            if (!m) {\n                return;\n            }\n            var ret = { type: name };\n            ret[name] = m[1].trim();\n            return pos(ret);\n        };\n    }\n    function atrule() {\n        if (css[0] !== '@') {\n            return;\n        }\n        return (atkeyframes() ||\n            atmedia() ||\n            atcustommedia() ||\n            atsupports() ||\n            atimport() ||\n            atcharset() ||\n            atnamespace() ||\n            atdocument() ||\n            atpage() ||\n            athost() ||\n            atfontface());\n    }\n    function rule() {\n        var pos = position();\n        var sel = selector();\n        if (!sel) {\n            return error('selector missing');\n        }\n        comments();\n        return pos({\n            type: 'rule',\n            selectors: sel,\n            declarations: declarations()\n        });\n    }\n    return addParent(stylesheet());\n}\nfunction trim(str) {\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\n}\nfunction addParent(obj, parent) {\n    var isNode = obj && typeof obj.type === 'string';\n    var childParent = isNode ? obj : parent;\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n        var k = _a[_i];\n        var value = obj[k];\n        if (Array.isArray(value)) {\n            value.forEach(function (v) {\n                addParent(v, childParent);\n            });\n        }\n        else if (value && typeof value === 'object') {\n            addParent(value, childParent);\n        }\n    }\n    if (isNode) {\n        Object.defineProperty(obj, 'parent', {\n            configurable: true,\n            writable: true,\n            enumerable: false,\n            value: parent || null\n        });\n    }\n    return obj;\n}\n\nvar tagMap = {\n    script: 'noscript',\n    altglyph: 'altGlyph',\n    altglyphdef: 'altGlyphDef',\n    altglyphitem: 'altGlyphItem',\n    animatecolor: 'animateColor',\n    animatemotion: 'animateMotion',\n    animatetransform: 'animateTransform',\n    clippath: 'clipPath',\n    feblend: 'feBlend',\n    fecolormatrix: 'feColorMatrix',\n    fecomponenttransfer: 'feComponentTransfer',\n    fecomposite: 'feComposite',\n    feconvolvematrix: 'feConvolveMatrix',\n    fediffuselighting: 'feDiffuseLighting',\n    fedisplacementmap: 'feDisplacementMap',\n    fedistantlight: 'feDistantLight',\n    fedropshadow: 'feDropShadow',\n    feflood: 'feFlood',\n    fefunca: 'feFuncA',\n    fefuncb: 'feFuncB',\n    fefuncg: 'feFuncG',\n    fefuncr: 'feFuncR',\n    fegaussianblur: 'feGaussianBlur',\n    feimage: 'feImage',\n    femerge: 'feMerge',\n    femergenode: 'feMergeNode',\n    femorphology: 'feMorphology',\n    feoffset: 'feOffset',\n    fepointlight: 'fePointLight',\n    fespecularlighting: 'feSpecularLighting',\n    fespotlight: 'feSpotLight',\n    fetile: 'feTile',\n    feturbulence: 'feTurbulence',\n    foreignobject: 'foreignObject',\n    glyphref: 'glyphRef',\n    lineargradient: 'linearGradient',\n    radialgradient: 'radialGradient'\n};\nfunction getTagName(n) {\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\n    if (tagName === 'link' && n.attributes._cssText) {\n        tagName = 'style';\n    }\n    return tagName;\n}\nfunction escapeRegExp(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\nfunction addHoverClass(cssText, cache) {\n    var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\n    if (cachedStyle)\n        return cachedStyle;\n    var ast = parse(cssText, {\n        silent: true\n    });\n    if (!ast.stylesheet) {\n        return cssText;\n    }\n    var selectors = [];\n    ast.stylesheet.rules.forEach(function (rule) {\n        if ('selectors' in rule) {\n            (rule.selectors || []).forEach(function (selector) {\n                if (HOVER_SELECTOR.test(selector)) {\n                    selectors.push(selector);\n                }\n            });\n        }\n    });\n    if (selectors.length === 0) {\n        return cssText;\n    }\n    var selectorMatcher = new RegExp(selectors\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\n        .sort(function (a, b) { return b.length - a.length; })\n        .map(function (selector) {\n        return escapeRegExp(selector);\n    })\n        .join('|'), 'g');\n    var result = cssText.replace(selectorMatcher, function (selector) {\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\n        return selector + \", \" + newSelector;\n    });\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\n    return result;\n}\nfunction createCache() {\n    var stylesWithHoverClass = new Map();\n    return {\n        stylesWithHoverClass: stylesWithHoverClass\n    };\n}\nfunction buildNode(n, options) {\n    var doc = options.doc, hackCss = options.hackCss, cache = options.cache;\n    switch (n.type) {\n        case NodeType.Document:\n            return doc.implementation.createDocument(null, '', null);\n        case NodeType.DocumentType:\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\n        case NodeType.Element:\n            var tagName = getTagName(n);\n            var node_1;\n            if (n.isSVG) {\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\n            }\n            else {\n                node_1 = doc.createElement(tagName);\n            }\n            var _loop_1 = function (name_1) {\n                if (!n.attributes.hasOwnProperty(name_1)) {\n                    return \"continue\";\n                }\n                var value = n.attributes[name_1];\n                if (tagName === 'option' && name_1 === 'selected' && value === false) {\n                    return \"continue\";\n                }\n                value =\n                    typeof value === 'boolean' || typeof value === 'number' ? '' : value;\n                if (!name_1.startsWith('rr_')) {\n                    var isTextarea = tagName === 'textarea' && name_1 === 'value';\n                    var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\n                    if (isRemoteOrDynamicCss && hackCss) {\n                        value = addHoverClass(value, cache);\n                    }\n                    if (isTextarea || isRemoteOrDynamicCss) {\n                        var child = doc.createTextNode(value);\n                        for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\n                            var c = _a[_i];\n                            if (c.nodeType === node_1.TEXT_NODE) {\n                                node_1.removeChild(c);\n                            }\n                        }\n                        node_1.appendChild(child);\n                        return \"continue\";\n                    }\n                    try {\n                        if (n.isSVG && name_1 === 'xlink:href') {\n                            node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value);\n                        }\n                        else if (name_1 === 'onload' ||\n                            name_1 === 'onclick' ||\n                            name_1.substring(0, 7) === 'onmouse') {\n                            node_1.setAttribute('_' + name_1, value);\n                        }\n                        else if (tagName === 'meta' &&\n                            n.attributes['http-equiv'] === 'Content-Security-Policy' &&\n                            name_1 === 'content') {\n                            node_1.setAttribute('csp-content', value);\n                            return \"continue\";\n                        }\n                        else if (tagName === 'link' &&\n                            n.attributes.rel === 'preload' &&\n                            n.attributes.as === 'script') {\n                        }\n                        else if (tagName === 'link' &&\n                            n.attributes.rel === 'prefetch' &&\n                            typeof n.attributes.href === 'string' &&\n                            n.attributes.href.endsWith('.js')) {\n                        }\n                        else if (tagName === 'img' &&\n                            n.attributes.srcset &&\n                            n.attributes.rr_dataURL) {\n                            node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\n                        }\n                        else {\n                            node_1.setAttribute(name_1, value);\n                        }\n                    }\n                    catch (error) {\n                    }\n                }\n                else {\n                    if (tagName === 'canvas' && name_1 === 'rr_dataURL') {\n                        var image_1 = document.createElement('img');\n                        image_1.src = value;\n                        image_1.onload = function () {\n                            var ctx = node_1.getContext('2d');\n                            if (ctx) {\n                                ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\n                            }\n                        };\n                    }\n                    else if (tagName === 'img' && name_1 === 'rr_dataURL') {\n                        var image = node_1;\n                        if (!image.currentSrc.startsWith('data:')) {\n                            image.setAttribute('rrweb-original-src', n.attributes.src);\n                            image.src = value;\n                        }\n                    }\n                    if (name_1 === 'rr_width') {\n                        node_1.style.width = value;\n                    }\n                    else if (name_1 === 'rr_height') {\n                        node_1.style.height = value;\n                    }\n                    else if (name_1 === 'rr_mediaCurrentTime') {\n                        node_1.currentTime = n.attributes\n                            .rr_mediaCurrentTime;\n                    }\n                    else if (name_1 === 'rr_mediaState') {\n                        switch (value) {\n                            case 'played':\n                                node_1\n                                    .play()[\"catch\"](function (e) { return console.warn('media playback error', e); });\n                                break;\n                            case 'paused':\n                                node_1.pause();\n                                break;\n                        }\n                    }\n                }\n            };\n            for (var name_1 in n.attributes) {\n                _loop_1(name_1);\n            }\n            if (n.isShadowHost) {\n                if (!node_1.shadowRoot) {\n                    node_1.attachShadow({ mode: 'open' });\n                }\n                else {\n                    while (node_1.shadowRoot.firstChild) {\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\n                    }\n                }\n            }\n            return node_1;\n        case NodeType.Text:\n            return doc.createTextNode(n.isStyle && hackCss\n                ? addHoverClass(n.textContent, cache)\n                : n.textContent);\n        case NodeType.CDATA:\n            return doc.createCDATASection(n.textContent);\n        case NodeType.Comment:\n            return doc.createComment(n.textContent);\n        default:\n            return null;\n    }\n}\nfunction buildNodeWithSN(n, options) {\n    var doc = options.doc, map = options.map, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend, cache = options.cache;\n    var node = buildNode(n, { doc: doc, hackCss: hackCss, cache: cache });\n    if (!node) {\n        return null;\n    }\n    if (n.rootId) {\n        console.assert(map[n.rootId] === doc, 'Target document should has the same root id.');\n    }\n    if (n.type === NodeType.Document) {\n        doc.close();\n        doc.open();\n        if (n.compatMode === 'BackCompat' &&\n            n.childNodes &&\n            n.childNodes[0].type !== NodeType.DocumentType) {\n            if (n.childNodes[0].type === NodeType.Element &&\n                'xmlns' in n.childNodes[0].attributes &&\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\n            }\n            else {\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\n            }\n        }\n        node = doc;\n    }\n    node.__sn = n;\n    map[n.id] = node;\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\n        !skipChild) {\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\n            var childN = _c[_i];\n            var childNode = buildNodeWithSN(childN, {\n                doc: doc,\n                map: map,\n                skipChild: false,\n                hackCss: hackCss,\n                afterAppend: afterAppend,\n                cache: cache\n            });\n            if (!childNode) {\n                console.warn('Failed to rebuild', childN);\n                continue;\n            }\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\n                node.shadowRoot.appendChild(childNode);\n            }\n            else {\n                node.appendChild(childNode);\n            }\n            if (afterAppend) {\n                afterAppend(childNode);\n            }\n        }\n    }\n    return node;\n}\nfunction visit(idNodeMap, onVisit) {\n    function walk(node) {\n        onVisit(node);\n    }\n    for (var key in idNodeMap) {\n        if (idNodeMap[key]) {\n            walk(idNodeMap[key]);\n        }\n    }\n}\nfunction handleScroll(node) {\n    var n = node.__sn;\n    if (n.type !== NodeType.Element) {\n        return;\n    }\n    var el = node;\n    for (var name_2 in n.attributes) {\n        if (!(n.attributes.hasOwnProperty(name_2) && name_2.startsWith('rr_'))) {\n            continue;\n        }\n        var value = n.attributes[name_2];\n        if (name_2 === 'rr_scrollLeft') {\n            el.scrollLeft = value;\n        }\n        if (name_2 === 'rr_scrollTop') {\n            el.scrollTop = value;\n        }\n    }\n}\nfunction rebuild(n, options) {\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend, cache = options.cache;\n    var idNodeMap = {};\n    var node = buildNodeWithSN(n, {\n        doc: doc,\n        map: idNodeMap,\n        skipChild: false,\n        hackCss: hackCss,\n        afterAppend: afterAppend,\n        cache: cache\n    });\n    visit(idNodeMap, function (visitedNode) {\n        if (onVisit) {\n            onVisit(visitedNode);\n        }\n        handleScroll(visitedNode);\n    });\n    return [node, idNodeMap];\n}\n\nexport { IGNORED_NODE, NodeType, addHoverClass, buildNodeWithSN, createCache, is2DCanvasBlank, isElement, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}