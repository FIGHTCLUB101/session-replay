{"ast":null,"code":"import { __assign } from '../../ext/tslib/tslib.es6.js';\nimport { initMutationObserver, initScrollObserver } from './observer.js';\nimport { patch } from '../utils.js';\nvar ShadowDomManager = function () {\n  function ShadowDomManager(options) {\n    this.restorePatches = [];\n    this.mutationCb = options.mutationCb;\n    this.scrollCb = options.scrollCb;\n    this.bypassOptions = options.bypassOptions;\n    this.mirror = options.mirror;\n    var manager = this;\n    this.restorePatches.push(patch(HTMLElement.prototype, 'attachShadow', function (original) {\n      return function () {\n        var shadowRoot = original.apply(this, arguments);\n        if (this.shadowRoot) manager.addShadowRoot(this.shadowRoot, this.ownerDocument);\n        return shadowRoot;\n      };\n    }));\n  }\n  ShadowDomManager.prototype.addShadowRoot = function (shadowRoot, doc) {\n    initMutationObserver(__assign(__assign({}, this.bypassOptions), {\n      doc: doc,\n      mutationCb: this.mutationCb,\n      mirror: this.mirror,\n      shadowDomManager: this\n    }), shadowRoot);\n    initScrollObserver(__assign(__assign({}, this.bypassOptions), {\n      scrollCb: this.scrollCb,\n      doc: shadowRoot,\n      mirror: this.mirror\n    }));\n  };\n  ShadowDomManager.prototype.observeAttachShadow = function (iframeElement) {\n    if (iframeElement.contentWindow) {\n      var manager_1 = this;\n      this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype, 'attachShadow', function (original) {\n        return function () {\n          var shadowRoot = original.apply(this, arguments);\n          if (this.shadowRoot) manager_1.addShadowRoot(this.shadowRoot, iframeElement.contentDocument);\n          return shadowRoot;\n        };\n      }));\n    }\n  };\n  ShadowDomManager.prototype.reset = function () {\n    this.restorePatches.forEach(function (restorePatch) {\n      return restorePatch();\n    });\n  };\n  return ShadowDomManager;\n}();\nexport { ShadowDomManager };","map":{"version":3,"names":["__assign","initMutationObserver","initScrollObserver","patch","ShadowDomManager","options","restorePatches","mutationCb","scrollCb","bypassOptions","mirror","manager","push","HTMLElement","prototype","original","shadowRoot","apply","arguments","addShadowRoot","ownerDocument","doc","shadowDomManager","observeAttachShadow","iframeElement","contentWindow","manager_1","contentDocument","reset","forEach","restorePatch"],"sources":["C:/Users/PRIYAM/OneDrive/Desktop/session replay/frontend/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/shadow-dom-manager.js"],"sourcesContent":["import { __assign } from '../../ext/tslib/tslib.es6.js';\nimport { initMutationObserver, initScrollObserver } from './observer.js';\nimport { patch } from '../utils.js';\n\nvar ShadowDomManager = (function () {\n    function ShadowDomManager(options) {\n        this.restorePatches = [];\n        this.mutationCb = options.mutationCb;\n        this.scrollCb = options.scrollCb;\n        this.bypassOptions = options.bypassOptions;\n        this.mirror = options.mirror;\n        var manager = this;\n        this.restorePatches.push(patch(HTMLElement.prototype, 'attachShadow', function (original) {\n            return function () {\n                var shadowRoot = original.apply(this, arguments);\n                if (this.shadowRoot)\n                    manager.addShadowRoot(this.shadowRoot, this.ownerDocument);\n                return shadowRoot;\n            };\n        }));\n    }\n    ShadowDomManager.prototype.addShadowRoot = function (shadowRoot, doc) {\n        initMutationObserver(__assign(__assign({}, this.bypassOptions), { doc: doc, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), shadowRoot);\n        initScrollObserver(__assign(__assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: shadowRoot, mirror: this.mirror }));\n    };\n    ShadowDomManager.prototype.observeAttachShadow = function (iframeElement) {\n        if (iframeElement.contentWindow) {\n            var manager_1 = this;\n            this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype, 'attachShadow', function (original) {\n                return function () {\n                    var shadowRoot = original.apply(this, arguments);\n                    if (this.shadowRoot)\n                        manager_1.addShadowRoot(this.shadowRoot, iframeElement.contentDocument);\n                    return shadowRoot;\n                };\n            }));\n        }\n    };\n    ShadowDomManager.prototype.reset = function () {\n        this.restorePatches.forEach(function (restorePatch) { return restorePatch(); });\n    };\n    return ShadowDomManager;\n}());\n\nexport { ShadowDomManager };\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,oBAAoB,EAAEC,kBAAkB,QAAQ,eAAe;AACxE,SAASC,KAAK,QAAQ,aAAa;AAEnC,IAAIC,gBAAgB,GAAI,YAAY;EAChC,SAASA,gBAAgBA,CAACC,OAAO,EAAE;IAC/B,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,CAACC,UAAU,GAAGF,OAAO,CAACE,UAAU;IACpC,IAAI,CAACC,QAAQ,GAAGH,OAAO,CAACG,QAAQ;IAChC,IAAI,CAACC,aAAa,GAAGJ,OAAO,CAACI,aAAa;IAC1C,IAAI,CAACC,MAAM,GAAGL,OAAO,CAACK,MAAM;IAC5B,IAAIC,OAAO,GAAG,IAAI;IAClB,IAAI,CAACL,cAAc,CAACM,IAAI,CAACT,KAAK,CAACU,WAAW,CAACC,SAAS,EAAE,cAAc,EAAE,UAAUC,QAAQ,EAAE;MACtF,OAAO,YAAY;QACf,IAAIC,UAAU,GAAGD,QAAQ,CAACE,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;QAChD,IAAI,IAAI,CAACF,UAAU,EACfL,OAAO,CAACQ,aAAa,CAAC,IAAI,CAACH,UAAU,EAAE,IAAI,CAACI,aAAa,CAAC;QAC9D,OAAOJ,UAAU;MACrB,CAAC;IACL,CAAC,CAAC,CAAC;EACP;EACAZ,gBAAgB,CAACU,SAAS,CAACK,aAAa,GAAG,UAAUH,UAAU,EAAEK,GAAG,EAAE;IAClEpB,oBAAoB,CAACD,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAACS,aAAa,CAAC,EAAE;MAAEY,GAAG,EAAEA,GAAG;MAAEd,UAAU,EAAE,IAAI,CAACA,UAAU;MAAEG,MAAM,EAAE,IAAI,CAACA,MAAM;MAAEY,gBAAgB,EAAE;IAAK,CAAC,CAAC,EAAEN,UAAU,CAAC;IACpKd,kBAAkB,CAACF,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAACS,aAAa,CAAC,EAAE;MAAED,QAAQ,EAAE,IAAI,CAACA,QAAQ;MAAEa,GAAG,EAAEL,UAAU;MAAEN,MAAM,EAAE,IAAI,CAACA;IAAO,CAAC,CAAC,CAAC;EACrI,CAAC;EACDN,gBAAgB,CAACU,SAAS,CAACS,mBAAmB,GAAG,UAAUC,aAAa,EAAE;IACtE,IAAIA,aAAa,CAACC,aAAa,EAAE;MAC7B,IAAIC,SAAS,GAAG,IAAI;MACpB,IAAI,CAACpB,cAAc,CAACM,IAAI,CAACT,KAAK,CAACqB,aAAa,CAACC,aAAa,CAACZ,WAAW,CAACC,SAAS,EAAE,cAAc,EAAE,UAAUC,QAAQ,EAAE;QAClH,OAAO,YAAY;UACf,IAAIC,UAAU,GAAGD,QAAQ,CAACE,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;UAChD,IAAI,IAAI,CAACF,UAAU,EACfU,SAAS,CAACP,aAAa,CAAC,IAAI,CAACH,UAAU,EAAEQ,aAAa,CAACG,eAAe,CAAC;UAC3E,OAAOX,UAAU;QACrB,CAAC;MACL,CAAC,CAAC,CAAC;IACP;EACJ,CAAC;EACDZ,gBAAgB,CAACU,SAAS,CAACc,KAAK,GAAG,YAAY;IAC3C,IAAI,CAACtB,cAAc,CAACuB,OAAO,CAAC,UAAUC,YAAY,EAAE;MAAE,OAAOA,YAAY,CAAC,CAAC;IAAE,CAAC,CAAC;EACnF,CAAC;EACD,OAAO1B,gBAAgB;AAC3B,CAAC,CAAC,CAAE;AAEJ,SAASA,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}